import{r as a,j as r,b as z,c as B,m as R}from"./animations-muhxMtO2.js";import{d as ie,j as le,i as ce,B as F,L as de}from"./index-BqFqAFhi.js";import{I as V}from"./input-DaJfUzPE.js";import{C as ue,a as pe,b as me,d as fe,c as he}from"./card--2NwihKc.js";import{c as xe,l as X,g as ve,k as ge,x as be,i as q,A as ye,d as we,h as A,n as Ce,s as Te,t as je,bu as Ee,bv as Ne,y as Pe}from"./ui-4Jv8TcDS.js";import"./vendor-CSbuTdnm.js";import"./charts-x2pUV8ZK.js";import"./utils-BJeS7sC5.js";var[O,rt]=xe("Tooltip",[X]),_=X(),U="TooltipProvider",Re=700,S="tooltip.open",[Ae,G]=O(U),W=t=>{const{__scopeTooltip:o,delayDuration:e=Re,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:c}=t,i=a.useRef(!0),h=a.useRef(!1),l=a.useRef(0);return a.useEffect(()=>{const p=l.current;return()=>window.clearTimeout(p)},[]),r.jsx(Ae,{scope:o,isOpenDelayedRef:i,delayDuration:e,onOpen:a.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:h,onPointerInTransitChange:a.useCallback(p=>{h.current=p},[]),disableHoverableContent:s,children:c})};W.displayName=U;var L="Tooltip",[ke,D]=O(L),K=t=>{const{__scopeTooltip:o,children:e,open:n,defaultOpen:s,onOpenChange:c,disableHoverableContent:i,delayDuration:h}=t,l=G(L,t.__scopeTooltip),p=_(o),[d,m]=a.useState(null),x=ve(),f=a.useRef(0),v=i??l.disableHoverableContent,g=h??l.delayDuration,b=a.useRef(!1),[C,y]=ge({prop:n,defaultProp:s??!1,onChange:P=>{P?(l.onOpen(),document.dispatchEvent(new CustomEvent(S))):l.onClose(),c?.(P)},caller:L}),T=a.useMemo(()=>C?b.current?"delayed-open":"instant-open":"closed",[C]),j=a.useCallback(()=>{window.clearTimeout(f.current),f.current=0,b.current=!1,y(!0)},[y]),E=a.useCallback(()=>{window.clearTimeout(f.current),f.current=0,y(!1)},[y]),N=a.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{b.current=!0,y(!0),f.current=0},g)},[g,y]);return a.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),r.jsx(be,{...p,children:r.jsx(ke,{scope:o,contentId:x,open:C,stateAttribute:T,trigger:d,onTriggerChange:m,onTriggerEnter:a.useCallback(()=>{l.isOpenDelayedRef.current?N():j()},[l.isOpenDelayedRef,N,j]),onTriggerLeave:a.useCallback(()=>{v?E():(window.clearTimeout(f.current),f.current=0)},[E,v]),onOpen:j,onClose:E,disableHoverableContent:v,children:e})})};K.displayName=L;var I="TooltipTrigger",J=a.forwardRef((t,o)=>{const{__scopeTooltip:e,...n}=t,s=D(I,e),c=G(I,e),i=_(e),h=a.useRef(null),l=q(o,h,s.onTriggerChange),p=a.useRef(!1),d=a.useRef(!1),m=a.useCallback(()=>p.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),r.jsx(ye,{asChild:!0,...i,children:r.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:A(t.onPointerMove,x=>{x.pointerType!=="touch"&&!d.current&&!c.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:A(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:A(t.onPointerDown,()=>{s.open&&s.onClose(),p.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:A(t.onFocus,()=>{p.current||s.onOpen()}),onBlur:A(t.onBlur,s.onClose),onClick:A(t.onClick,s.onClose)})})});J.displayName=I;var Le="TooltipPortal",[ot,Me]=O(Le,{forceMount:void 0}),k="TooltipContent",Q=a.forwardRef((t,o)=>{const e=Me(k,t.__scopeTooltip),{forceMount:n=e.forceMount,side:s="top",...c}=t,i=D(k,t.__scopeTooltip);return r.jsx(Ce,{present:n||i.open,children:i.disableHoverableContent?r.jsx(Z,{side:s,...c,ref:o}):r.jsx(Oe,{side:s,...c,ref:o})})}),Oe=a.forwardRef((t,o)=>{const e=D(k,t.__scopeTooltip),n=G(k,t.__scopeTooltip),s=a.useRef(null),c=q(o,s),[i,h]=a.useState(null),{trigger:l,onClose:p}=e,d=s.current,{onPointerInTransitChange:m}=n,x=a.useCallback(()=>{h(null),m(!1)},[m]),f=a.useCallback((v,g)=>{const b=v.currentTarget,C={x:v.clientX,y:v.clientY},y=He(C,b.getBoundingClientRect()),T=Ge(C,y),j=ze(g.getBoundingClientRect()),E=Fe([...T,...j]);h(E),m(!0)},[m]);return a.useEffect(()=>()=>x(),[x]),a.useEffect(()=>{if(l&&d){const v=b=>f(b,d),g=b=>f(b,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",g)}}},[l,d,f,x]),a.useEffect(()=>{if(i){const v=g=>{const b=g.target,C={x:g.clientX,y:g.clientY},y=l?.contains(b)||d?.contains(b),T=!Be(C,i);y?x():T&&(x(),p())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,i,p,x]),r.jsx(Z,{...t,ref:c})}),[_e,De]=O(L,{isInside:!1}),Se=Ee("TooltipContent"),Z=a.forwardRef((t,o)=>{const{__scopeTooltip:e,children:n,"aria-label":s,onEscapeKeyDown:c,onPointerDownOutside:i,...h}=t,l=D(k,e),p=_(e),{onClose:d}=l;return a.useEffect(()=>(document.addEventListener(S,d),()=>document.removeEventListener(S,d)),[d]),a.useEffect(()=>{if(l.trigger){const m=x=>{x.target?.contains(l.trigger)&&d()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[l.trigger,d]),r.jsx(Te,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:d,children:r.jsxs(je,{"data-state":l.stateAttribute,...p,...h,ref:o,style:{...h.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(Se,{children:n}),r.jsx(_e,{scope:e,isInside:!0,children:r.jsx(Ne,{id:l.contentId,role:"tooltip",children:s||n})})]})})});Q.displayName=k;var ee="TooltipArrow",Ie=a.forwardRef((t,o)=>{const{__scopeTooltip:e,...n}=t,s=_(e);return De(ee,e).isInside?null:r.jsx(Pe,{...s,...n,ref:o})});Ie.displayName=ee;function He(t,o){const e=Math.abs(o.top-t.y),n=Math.abs(o.bottom-t.y),s=Math.abs(o.right-t.x),c=Math.abs(o.left-t.x);switch(Math.min(e,n,s,c)){case c:return"left";case s:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Ge(t,o,e=5){const n=[];switch(o){case"top":n.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":n.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":n.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":n.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return n}function ze(t){const{top:o,right:e,bottom:n,left:s}=t;return[{x:s,y:o},{x:e,y:o},{x:e,y:n},{x:s,y:n}]}function Be(t,o){const{x:e,y:n}=t;let s=!1;for(let c=0,i=o.length-1;c<o.length;i=c++){const h=o[c],l=o[i],p=h.x,d=h.y,m=l.x,x=l.y;d>n!=x>n&&e<(m-p)*(n-d)/(x-d)+p&&(s=!s)}return s}function Fe(t){const o=t.slice();return o.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),Ve(o)}function Ve(t){if(t.length<=1)return t.slice();const o=[];for(let n=0;n<t.length;n++){const s=t[n];for(;o.length>=2;){const c=o[o.length-1],i=o[o.length-2];if((c.x-i.x)*(s.y-i.y)>=(c.y-i.y)*(s.x-i.x))o.pop();else break}o.push(s)}o.pop();const e=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;e.length>=2;){const c=e[e.length-1],i=e[e.length-2];if((c.x-i.x)*(s.y-i.y)>=(c.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}return e.pop(),o.length===1&&e.length===1&&o[0].x===e[0].x&&o[0].y===e[0].y?o:o.concat(e)}var $e=W,Ye=K,Xe=J,te=Q;const qe=$e,$=Ye,Y=Xe,H=a.forwardRef(({className:t,sideOffset:o=4,...e},n)=>r.jsx(te,{ref:n,sideOffset:o,className:ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));H.displayName=te.displayName;const nt=()=>{const[t,o]=a.useState(""),[e,n]=a.useState(""),[s,c]=a.useState(""),[i,h]=a.useState(!1),[l,p]=a.useState(""),[d,m]=a.useState(""),{signIn:x,signInWithGoogle:f,isAuthenticated:v,admin:g}=le(),b=ce(),C=u=>u==="juanramiro139@gmail.com";a.useEffect(()=>{if(v&&g){console.log("✅ Usuario administrador autenticado, redirigiendo al panel...");const u=setTimeout(()=>{b("/admin/places",{replace:!0})},500);return()=>clearTimeout(u)}},[v,g,b]);const y=u=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?C(u)?(p(""),!0):(p("No tienes permisos para acceder al panel administrativo"),!1):(p("Formato de email inválido"),!1),T=u=>u.length<6?(m("La contraseña debe tener al menos 6 caracteres"),!1):(m(""),!0),j=async u=>{u.preventDefault(),c(""),h(!0);let w=!0;if(y(t)||(w=!1),T(e)||(w=!1),!w){h(!1);return}try{await x(t,e),console.log("✅ Login exitoso como administrador, esperando redirección...")}catch(M){M instanceof Error?c(M.message):c("Error desconocido durante el login")}finally{h(!1)}},E=async()=>{try{await f()}catch(u){u instanceof Error?c(u.message):c("Error desconocido durante el login con Google")}},N=z(0),P=z(0),re=B(P,[-100,100],[10,-10]),oe=B(N,[-100,100],[-10,10]),ne=u=>{const w=u.currentTarget.getBoundingClientRect(),M=u.clientX-w.left-w.width/2,ae=u.clientY-w.top-w.height/2;N.set(M/10),P.set(ae/10)},se=()=>{N.set(0),P.set(0)};return v?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:g?"Redirigiendo al panel de administración...":"Verificando permisos..."}),r.jsx("p",{className:"text-gray-300",children:g?"Serás redirigido automáticamente":"Por favor espera..."})]})}):r.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-black",children:[r.jsxs(R.div,{className:"absolute inset-0",animate:{scale:[1,1.05,1],rotate:[0,1,0]},transition:{duration:20,repeat:1/0,repeatType:"mirror",ease:"linear"},children:[r.jsx("img",{src:"https://res.cloudinary.com/dva96am1o/image/upload/v1763833761/puenteApolateno_oj0xsh.jpg",alt:"Puente Apolateno",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-black/50 to-green-900/30"}),r.jsx(R.div,{className:"absolute inset-0 pointer-events-none",animate:{x:[0,50,0],y:[0,-30,0]},transition:{repeat:1/0,duration:30,ease:"easeInOut"},children:[...Array(50)].map((u,w)=>r.jsx("div",{className:"absolute w-1 h-1 bg-white/30 rounded-full",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`}},w))})]}),r.jsx(qe,{children:r.jsx(R.div,{style:{rotateX:re,rotateY:oe},onMouseMove:ne,onMouseLeave:se,initial:{opacity:0,y:40,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:"easeOut"},className:"relative z-10 w-full max-w-md cursor-pointer",children:r.jsxs(ue,{className:"backdrop-blur-md bg-white/10 border-white/20 shadow-2xl rounded-3xl overflow-hidden hover:scale-105 transform transition-transform duration-500 border-glow",children:[r.jsxs(pe,{className:"text-center space-y-3",children:[r.jsx(me,{className:"text-3xl font-extrabold text-white drop-shadow-lg animate-pulse",children:"Panel Administrativo"}),r.jsx(fe,{className:"text-white/80",children:"Acceso restringido - Solo administradores autorizados"})]}),r.jsxs(he,{children:[r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs($,{delayDuration:200,children:[r.jsx(Y,{asChild:!0,children:r.jsx(V,{type:"email",placeholder:"Correo electrónico de administrador",value:t,onChange:u=>o(u.target.value),required:!0,disabled:i,className:`transition-all duration-300 ${l?"border-red-500":"focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400"}`})}),r.jsx(H,{side:"top",className:"bg-slate-100/90 backdrop-blur-sm text-gray-900 shadow-lg",children:l||"Solo el administrador autorizado puede acceder"})]}),r.jsxs($,{delayDuration:200,children:[r.jsx(Y,{asChild:!0,children:r.jsx(V,{type:"password",placeholder:"Contraseña",value:e,onChange:u=>n(u.target.value),required:!0,disabled:i,className:`transition-all duration-300 ${d?"border-red-500":"focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400"}`})}),r.jsx(H,{side:"top",className:"bg-slate-100/90 backdrop-blur-sm text-gray-900 shadow-lg",children:d||"Mínimo 6 caracteres, combina letras y números"})]}),s&&r.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm p-2 rounded-md bg-red-100/20 border border-red-400/30",children:s}),r.jsx(R.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:r.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white shadow-lg transition-transform duration-300",disabled:i,children:i?"Verificando acceso...":"Acceder al Panel Admin"})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 border-t border-white/20"}),r.jsx("span",{className:"text-white/60 text-xs",children:"O continúa con"}),r.jsx("div",{className:"flex-1 border-t border-white/20"})]}),r.jsx(R.div,{whileHover:{scale:1.02},children:r.jsxs(F,{variant:"outline",className:"w-full mt-4 border-white/30 bg-white/20 text-white hover:bg-white/30 hover:text-gray-900 backdrop-blur-md transition-all duration-300",onClick:E,type:"button",disabled:i,children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(de,{to:"/",className:"text-sm text-white/70 hover:text-white transition",children:"← Volver al inicio"})})]})]})})})]})};export{nt as Login};
