import{j as r,r as a,b as z,c as B,m as P}from"./animations-w5RCdeks.js";import{d as ue,j as pe,i as me,a as fe,B as F,L as he}from"./index-Cjg6ZIXX.js";import{I as $}from"./input-Ct0LZSrI.js";import{C as xe,a as ve,b as ge,d as be,c as ye}from"./card-Dck1QLHG.js";import{e as we,m as X,g as Ce,l as Te,w as je,j as q,A as Ee,h as Ne,i as R,n as Pe,r as Re,s as Ae,bs as Le,x as _e}from"./ui-vuw2n6JC.js";import"./vendor-BImi-76D.js";import"./charts-qq9cUDqM.js";import"./utils-BNe0Xlio.js";var ke=Symbol("radix.slottable");function Me(t){const o=({children:e})=>r.jsx(r.Fragment,{children:e});return o.displayName=`${t}.Slottable`,o.__radixId=ke,o}var[M]=we("Tooltip",[X]),O=X(),U="TooltipProvider",Oe=700,S="tooltip.open",[De,G]=M(U),W=t=>{const{__scopeTooltip:o,delayDuration:e=Oe,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:c}=t,i=a.useRef(!0),p=a.useRef(!1),l=a.useRef(0);return a.useEffect(()=>{const m=l.current;return()=>window.clearTimeout(m)},[]),r.jsx(De,{scope:o,isOpenDelayedRef:i,delayDuration:e,onOpen:a.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:p,onPointerInTransitChange:a.useCallback(m=>{p.current=m},[]),disableHoverableContent:s,children:c})};W.displayName=U;var L="Tooltip",[Se,D]=M(L),K=t=>{const{__scopeTooltip:o,children:e,open:n,defaultOpen:s,onOpenChange:c,disableHoverableContent:i,delayDuration:p}=t,l=G(L,t.__scopeTooltip),m=O(o),[d,f]=a.useState(null),x=Ce(),h=a.useRef(0),v=i??l.disableHoverableContent,b=p??l.delayDuration,g=a.useRef(!1),[C,y]=Te({prop:n,defaultProp:s??!1,onChange:_=>{_?(l.onOpen(),document.dispatchEvent(new CustomEvent(S))):l.onClose(),c?.(_)},caller:L}),E=a.useMemo(()=>C?g.current?"delayed-open":"instant-open":"closed",[C]),T=a.useCallback(()=>{window.clearTimeout(h.current),h.current=0,g.current=!1,y(!0)},[y]),j=a.useCallback(()=>{window.clearTimeout(h.current),h.current=0,y(!1)},[y]),N=a.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{g.current=!0,y(!0),h.current=0},b)},[b,y]);return a.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),r.jsx(je,{...m,children:r.jsx(Se,{scope:o,contentId:x,open:C,stateAttribute:E,trigger:d,onTriggerChange:f,onTriggerEnter:a.useCallback(()=>{l.isOpenDelayedRef.current?N():T()},[l.isOpenDelayedRef,N,T]),onTriggerLeave:a.useCallback(()=>{v?j():(window.clearTimeout(h.current),h.current=0)},[j,v]),onOpen:T,onClose:j,disableHoverableContent:v,children:e})})};K.displayName=L;var I="TooltipTrigger",J=a.forwardRef((t,o)=>{const{__scopeTooltip:e,...n}=t,s=D(I,e),c=G(I,e),i=O(e),p=a.useRef(null),l=q(o,p,s.onTriggerChange),m=a.useRef(!1),d=a.useRef(!1),f=a.useCallback(()=>m.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),r.jsx(Ee,{asChild:!0,...i,children:r.jsx(Ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:R(t.onPointerMove,x=>{x.pointerType!=="touch"&&!d.current&&!c.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:R(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:R(t.onPointerDown,()=>{s.open&&s.onClose(),m.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:R(t.onFocus,()=>{m.current||s.onOpen()}),onBlur:R(t.onBlur,s.onClose),onClick:R(t.onClick,s.onClose)})})});J.displayName=I;var Ie="TooltipPortal",[lt,He]=M(Ie,{forceMount:void 0}),A="TooltipContent",Q=a.forwardRef((t,o)=>{const e=He(A,t.__scopeTooltip),{forceMount:n=e.forceMount,side:s="top",...c}=t,i=D(A,t.__scopeTooltip);return r.jsx(Pe,{present:n||i.open,children:i.disableHoverableContent?r.jsx(Z,{side:s,...c,ref:o}):r.jsx(Ge,{side:s,...c,ref:o})})}),Ge=a.forwardRef((t,o)=>{const e=D(A,t.__scopeTooltip),n=G(A,t.__scopeTooltip),s=a.useRef(null),c=q(o,s),[i,p]=a.useState(null),{trigger:l,onClose:m}=e,d=s.current,{onPointerInTransitChange:f}=n,x=a.useCallback(()=>{p(null),f(!1)},[f]),h=a.useCallback((v,b)=>{const g=v.currentTarget,C={x:v.clientX,y:v.clientY},y=Ve(C,g.getBoundingClientRect()),E=Ye(C,y),T=Xe(b.getBoundingClientRect()),j=Ue([...E,...T]);p(j),f(!0)},[f]);return a.useEffect(()=>()=>x(),[x]),a.useEffect(()=>{if(l&&d){const v=g=>h(g,d),b=g=>h(g,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,h,x]),a.useEffect(()=>{if(i){const v=b=>{const g=b.target,C={x:b.clientX,y:b.clientY},y=l?.contains(g)||d?.contains(g),E=!qe(C,i);y?x():E&&(x(),m())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,i,m,x]),r.jsx(Z,{...t,ref:c})}),[ze,Be]=M(L,{isInside:!1}),Fe=Me("TooltipContent"),Z=a.forwardRef((t,o)=>{const{__scopeTooltip:e,children:n,"aria-label":s,onEscapeKeyDown:c,onPointerDownOutside:i,...p}=t,l=D(A,e),m=O(e),{onClose:d}=l;return a.useEffect(()=>(document.addEventListener(S,d),()=>document.removeEventListener(S,d)),[d]),a.useEffect(()=>{if(l.trigger){const f=x=>{x.target?.contains(l.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,d]),r.jsx(Re,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:i,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:r.jsxs(Ae,{"data-state":l.stateAttribute,...m,...p,ref:o,style:{...p.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(Fe,{children:n}),r.jsx(ze,{scope:e,isInside:!0,children:r.jsx(Le,{id:l.contentId,role:"tooltip",children:s||n})})]})})});Q.displayName=A;var ee="TooltipArrow",$e=a.forwardRef((t,o)=>{const{__scopeTooltip:e,...n}=t,s=O(e);return Be(ee,e).isInside?null:r.jsx(_e,{...s,...n,ref:o})});$e.displayName=ee;function Ve(t,o){const e=Math.abs(o.top-t.y),n=Math.abs(o.bottom-t.y),s=Math.abs(o.right-t.x),c=Math.abs(o.left-t.x);switch(Math.min(e,n,s,c)){case c:return"left";case s:return"right";case e:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Ye(t,o,e=5){const n=[];switch(o){case"top":n.push({x:t.x-e,y:t.y+e},{x:t.x+e,y:t.y+e});break;case"bottom":n.push({x:t.x-e,y:t.y-e},{x:t.x+e,y:t.y-e});break;case"left":n.push({x:t.x+e,y:t.y-e},{x:t.x+e,y:t.y+e});break;case"right":n.push({x:t.x-e,y:t.y-e},{x:t.x-e,y:t.y+e});break}return n}function Xe(t){const{top:o,right:e,bottom:n,left:s}=t;return[{x:s,y:o},{x:e,y:o},{x:e,y:n},{x:s,y:n}]}function qe(t,o){const{x:e,y:n}=t;let s=!1;for(let c=0,i=o.length-1;c<o.length;i=c++){const p=o[c],l=o[i],m=p.x,d=p.y,f=l.x,x=l.y;d>n!=x>n&&e<(f-m)*(n-d)/(x-d)+m&&(s=!s)}return s}function Ue(t){const o=t.slice();return o.sort((e,n)=>e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0),We(o)}function We(t){if(t.length<=1)return t.slice();const o=[];for(let n=0;n<t.length;n++){const s=t[n];for(;o.length>=2;){const c=o[o.length-1],i=o[o.length-2];if((c.x-i.x)*(s.y-i.y)>=(c.y-i.y)*(s.x-i.x))o.pop();else break}o.push(s)}o.pop();const e=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;e.length>=2;){const c=e[e.length-1],i=e[e.length-2];if((c.x-i.x)*(s.y-i.y)>=(c.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}return e.pop(),o.length===1&&e.length===1&&o[0].x===e[0].x&&o[0].y===e[0].y?o:o.concat(e)}var Ke=W,Je=K,Qe=J,te=Q;const Ze=Ke,V=Je,Y=Qe,H=a.forwardRef(({className:t,sideOffset:o=4,...e},n)=>r.jsx(te,{ref:n,sideOffset:o,className:ue("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));H.displayName=te.displayName;const ct=()=>{const[t,o]=a.useState(""),[e,n]=a.useState(""),[s,c]=a.useState(""),[i,p]=a.useState(!1),[l,m]=a.useState(""),[d,f]=a.useState(""),[x,h]=a.useState(!1),{signIn:v,signInWithGoogle:b,isAuthenticated:g,admin:C,setRedirectPath:y}=pe(),E=me(),T=fe(),j=z(0),N=z(0),_=B(N,[-100,100],[10,-10]),re=B(j,[-100,100],[-10,10]),oe=u=>{const w=u.currentTarget.getBoundingClientRect(),k=u.clientX-w.left-w.width/2,de=u.clientY-w.top-w.height/2;j.set(k/10),N.set(de/10)},ne=()=>{j.set(0),N.set(0)};a.useEffect(()=>{(async()=>{g&&C&&!x&&(h(!0),console.log("‚úÖ Usuario administrador autenticado, redirigiendo..."),setTimeout(()=>{E("/admin-places",{replace:!0})},1e3))})()},[g,C,E,x]),a.useEffect(()=>{const u=T.pathname+T.search;u!=="/login"&&(console.log("üìç Login - Guardando ruta actual:",u),y(u))},[T,y]);const se=u=>u==="juanramiro139@gmail.com",ae=u=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)?se(u)?(m(""),!0):(m("No tienes permisos para acceder al panel administrativo"),!1):(m("Formato de email inv√°lido"),!1),ie=u=>u.length<6?(f("La contrase√±a debe tener al menos 6 caracteres"),!1):(f(""),!0),le=async u=>{u.preventDefault(),c(""),p(!0);let w=!0;if(ae(t)||(w=!1),ie(e)||(w=!1),!w){p(!1);return}try{await v(t,e),console.log("‚úÖ Login exitoso, esperando redirecci√≥n autom√°tica...")}catch(k){k instanceof Error?c(k.message):c("Error desconocido durante el login"),p(!1)}},ce=async()=>{try{p(!0),await b()}catch(u){u instanceof Error?c(u.message):c("Error desconocido durante el login con Google"),p(!1)}};return x?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black",children:r.jsxs("div",{className:"text-center text-white",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Redirigiendo al panel..."}),r.jsx("p",{className:"text-gray-300",children:"Autenticaci√≥n exitosa"})]})}):r.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden bg-black",children:[r.jsxs(P.div,{className:"absolute inset-0",animate:{scale:[1,1.05,1],rotate:[0,1,0]},transition:{duration:20,repeat:1/0,repeatType:"mirror",ease:"linear"},children:[r.jsx("img",{src:"https://res.cloudinary.com/dva96am1o/image/upload/v1763833761/puenteApolateno_oj0xsh.jpg",alt:"Puente Apolateno",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/80 via-black/50 to-green-900/30"}),r.jsx(P.div,{className:"absolute inset-0 pointer-events-none",animate:{x:[0,50,0],y:[0,-30,0]},transition:{repeat:1/0,duration:30,ease:"easeInOut"},children:[...Array(50)].map((u,w)=>r.jsx("div",{className:"absolute w-1 h-1 bg-white/30 rounded-full",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`}},w))})]}),r.jsx(Ze,{children:r.jsx(P.div,{style:{rotateX:_,rotateY:re},onMouseMove:oe,onMouseLeave:ne,initial:{opacity:0,y:40,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:"easeOut"},className:"relative z-10 w-full max-w-md cursor-pointer",children:r.jsxs(xe,{className:"backdrop-blur-md bg-white/10 border-white/20 shadow-2xl rounded-3xl overflow-hidden hover:scale-105 transform transition-transform duration-500 border-glow",children:[r.jsxs(ve,{className:"text-center space-y-3",children:[r.jsx(ge,{className:"text-3xl font-extrabold text-white drop-shadow-lg animate-pulse",children:"Panel Administrativo"}),r.jsx(be,{className:"text-white/80",children:"Acceso restringido - Solo administradores autorizados"})]}),r.jsxs(ye,{children:[r.jsxs("form",{onSubmit:le,className:"space-y-4",children:[r.jsxs(V,{delayDuration:200,children:[r.jsx(Y,{asChild:!0,children:r.jsx($,{type:"email",placeholder:"Correo electr√≥nico de administrador",value:t,onChange:u=>o(u.target.value),required:!0,disabled:i,className:`transition-all duration-300 ${l?"border-red-500":"focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400"}`})}),r.jsx(H,{side:"top",className:"bg-slate-100/90 backdrop-blur-sm text-gray-900 shadow-lg",children:l||"Solo el administrador autorizado puede acceder"})]}),r.jsxs(V,{delayDuration:200,children:[r.jsx(Y,{asChild:!0,children:r.jsx($,{type:"password",placeholder:"Contrase√±a",value:e,onChange:u=>n(u.target.value),required:!0,disabled:i,className:`transition-all duration-300 ${d?"border-red-500":"focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400"}`})}),r.jsx(H,{side:"top",className:"bg-slate-100/90 backdrop-blur-sm text-gray-900 shadow-lg",children:d||"M√≠nimo 6 caracteres, combina letras y n√∫meros"})]}),s&&r.jsx(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm p-2 rounded-md bg-red-100/20 border border-red-400/30",children:s}),r.jsx(P.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:r.jsx(F,{type:"submit",className:"w-full bg-gradient-to-r from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white shadow-lg transition-transform duration-300",disabled:i,children:i?"Verificando acceso...":"Acceder al Panel Admin"})})]}),r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 border-t border-white/20"}),r.jsx("span",{className:"text-white/60 text-xs",children:"O contin√∫a con"}),r.jsx("div",{className:"flex-1 border-t border-white/20"})]}),r.jsx(P.div,{whileHover:{scale:1.02},children:r.jsxs(F,{variant:"outline",className:"w-full mt-4 border-white/30 bg-white/20 text-white hover:bg-white/30 hover:text-gray-900 backdrop-blur-md transition-all duration-300",onClick:ce,type:"button",disabled:i,children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(he,{to:"/",className:"text-sm text-white/70 hover:text-white transition",children:"‚Üê Volver al inicio"})})]})]})})})]})};export{ct as Login};
