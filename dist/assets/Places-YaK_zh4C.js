import{r as t,j as e,m as ke}from"./animations-muhxMtO2.js";import{B as G,d as K,k as ee,m as qe,R as _t,I as St,b as _e,S as Mt,n as Et}from"./index-SFMBmmo4.js";import{u as Fe,L as de,D as Se,a as Me,b as Ee,c as De,A as Dt,e as Tt,g as Pt,f as Ye,T as Lt,S as xe}from"./skeleton-x27omLgI.js";import{bp as Ce,X as Te,bk as It,bj as we,aK as $t,aG as zt,aw as Gt,z as At,K as He,bU as fe,bV as Ot,M as ne,ac as Ut,bP as Bt,bR as Vt,bD as ue,bW as Pe,aH as Le,j as qt,k as Xe,c as Ie,d as me,i as pe,h as je,n as Ft,bX as Ze,bY as Ke,E as Yt,aR as ve,bZ as be,aI as We,bl as Ht,b_ as Xt,aY as Zt,G as Kt,bI as Wt,bB as Jt,a4 as Re,aj as Qt,bS as ea,b$ as ta,bT as aa}from"./ui-4Jv8TcDS.js";const Ae=50,Oe=100,ra=({placeId:a,initialIndex:s=0,isOpen:r,onClose:g,title:i="Galer√≠a de im√°genes"})=>{const[o,d]=t.useState(s),[m,x]=t.useState(1),[j,_]=t.useState(0),[M,C]=t.useState(!1),[v,N]=t.useState({x:0,y:0}),[R,E]=t.useState({x:0,y:0}),[A,q]=t.useState(!0),[h,O]=t.useState([]),[W,w]=t.useState(!1),[b,c]=t.useState(null),u=t.useRef({x:0,y:0,time:0}),y=t.useRef({x:0,y:0,time:0}),S=t.useRef(null),{getPlaceGallery:I}=Fe(),$=h[o],B=h.length>1;t.useEffect(()=>{(async()=>{if(!(!r||!a))try{w(!0),c(null);const z=await I(a);O(z||[]),s>=(z?.length||0)?d(0):d(s)}catch{c("Error al cargar la galer√≠a de im√°genes"),O([])}finally{w(!1)}})()},[r,a,I,s]),t.useEffect(()=>{if(r&&h.length>0){x(1),_(0),E({x:0,y:0}),q(!0);const p=setTimeout(()=>{q(!1)},3e3);return()=>clearTimeout(p)}},[r,o,h.length]),t.useEffect(()=>{if(h.length>0){q(!0);const p=setTimeout(()=>{q(!1)},2e3);return()=>clearTimeout(p)}},[o,h.length]);const X=t.useCallback(()=>{x(1),_(0),E({x:0,y:0})},[]),V=t.useCallback(()=>{B&&(d(p=>p===0?h.length-1:p-1),X())},[B,X,h.length]),F=t.useCallback(()=>{B&&(d(p=>p===h.length-1?0:p+1),X())},[B,X,h.length]),Z=t.useCallback(()=>{x(p=>Math.min(p+.25,3))},[]),T=t.useCallback(()=>{x(p=>Math.max(p-.25,1))},[]),Y=t.useCallback(()=>{_(p=>(p+90)%360)},[]);t.useEffect(()=>{const p=z=>{if(!(!r||h.length===0))switch(z.key){case"Escape":g();break;case"ArrowLeft":V();break;case"ArrowRight":F();break;case"+":case"=":Z();break;case"-":T();break;case"r":case"R":Y();break;case"0":X();break;case" ":q(Q=>!Q);break}};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r,h.length,g,V,F,Z,T,Y,X]);const J=t.useCallback(p=>{if(m>1)return;const z=p.touches[0];u.current={x:z.clientX,y:z.clientY,time:Date.now()}},[m]),P=t.useCallback(p=>{if(m>1)return;const z=p.touches[0];y.current={x:z.clientX,y:z.clientY,time:Date.now()}},[m]),n=t.useCallback(()=>{if(m>1)return;const{x:p,y:z}=u.current,{x:Q,y:te}=y.current,le=Q-p,ie=te-z;if(y.current.time-u.current.time>300)return;const se=Math.abs(le),ge=Math.abs(ie);se>ge&&se>Ae?le>0?V():F():ie>Oe&&ge>se&&g()},[m,V,F,g]),l=t.useCallback(p=>{m<=1?(u.current={x:p.clientX,y:p.clientY,time:Date.now()},C(!0)):(C(!0),N({x:p.clientX-R.x,y:p.clientY-R.y}))},[m,R.x,R.y]),f=t.useCallback(p=>{if(M)if(m<=1)y.current={x:p.clientX,y:p.clientY,time:Date.now()};else{const z=p.clientX-v.x,Q=p.clientY-v.y,te=(m-1)*100;E({x:Math.max(Math.min(z,te),-te),y:Math.max(Math.min(Q,te),-te)})}},[M,m,v.x,v.y]),k=t.useCallback(()=>{if(M){if(m<=1){const{x:p,y:z}=u.current,{x:Q,y:te}=y.current,le=Q-p,ie=te-z,ce=Math.abs(le),se=Math.abs(ie);ce>se&&ce>Ae?le>0?V():F():ie>Oe&&se>ce&&g()}C(!1)}},[M,m,V,F,g]),U=t.useCallback(()=>{if(!$)return;const p=document.createElement("a");p.href=$.url_foto,p.download=`imagen-${o+1}.jpg`,document.body.appendChild(p),p.click(),document.body.removeChild(p)},[$,o]),oe=t.useCallback(()=>{q(p=>!p)},[]),H=t.useCallback(p=>{p.target===p.currentTarget&&g()},[g]);return r?W?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx(Ce,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Cargando galer√≠a..."})]})}):b?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:g,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"‚ùå Error"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:b}),e.jsx(G,{onClick:g,className:"bg-red-600 hover:bg-red-700",children:"Cerrar"})]})}):!$||h.length===0?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:g,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"üì∑"}),e.jsx("p",{className:"text-sm text-gray-300",children:"No hay im√°genes en la galer√≠a"}),e.jsx(G,{onClick:g,className:"mt-4 bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})}):e.jsxs("div",{ref:S,className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 touch-none",onClick:H,children:[A&&e.jsx("button",{onClick:g,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-40 bg-black/50 rounded-full p-2 backdrop-blur-sm",children:e.jsx(Te,{className:"w-8 h-8"})}),A&&e.jsxs("div",{className:"absolute top-4 left-4 z-40 flex items-center gap-2 bg-black/50 rounded-lg p-3 backdrop-blur-sm",children:[e.jsx(G,{variant:"ghost",size:"icon",onClick:U,className:"text-white hover:bg-white/20",title:"Descargar imagen",children:e.jsx(It,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:Y,className:"text-white hover:bg-white/20",title:"Rotar imagen (R)",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:T,disabled:m<=1,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Zoom out (-)",children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:Z,disabled:m>=3,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Zoom in (+)",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:X,disabled:m===1&&j===0,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Reset transformaci√≥n (0)",children:e.jsx("span",{className:"text-sm",children:"‚ü≤"})})]}),B&&A&&e.jsxs(e.Fragment,{children:[e.jsx(G,{variant:"ghost",size:"icon",onClick:V,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-40 text-white hover:bg-white/20 bg-black/50 backdrop-blur-sm",title:"Imagen anterior (‚Üê)",children:e.jsx(Gt,{className:"w-8 h-8"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:F,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-40 text-white hover:bg-white/20 bg-black/50 backdrop-blur-sm",title:"Siguiente imagen (‚Üí)",children:e.jsx(At,{className:"w-8 h-8"})})]}),e.jsx("div",{className:"relative max-w-full max-h-full flex items-center justify-center",onDoubleClick:oe,onTouchStart:J,onTouchMove:P,onTouchEnd:n,onMouseDown:l,onMouseMove:f,onMouseUp:k,onMouseLeave:k,children:e.jsx("div",{className:K("relative transition-transform duration-200",M&&m<=1?"cursor-grabbing":m>1?"cursor-grab":"cursor-default"),style:{transform:`scale(${m}) rotate(${j}deg) translate(${R.x}px, ${R.y}px)`,transformOrigin:"center center"},children:e.jsx("img",{src:$.url_foto,alt:$.descripcion,className:"max-w-screen max-h-screen object-contain rounded-lg shadow-lg select-none",draggable:!1})})}),A&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-40 max-w-2xl w-full px-4",children:e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm text-white p-4 rounded-lg text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:i}),B&&e.jsxs("span",{className:"text-sm text-gray-300 bg-black/50 px-2 py-1 rounded",children:[o+1," / ",h.length]})]}),$.descripcion&&e.jsx("p",{className:"text-sm leading-relaxed",children:$.descripcion}),(m!==1||j!==0)&&e.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs text-gray-300",children:[m>1&&e.jsxs("span",{children:["Zoom: ",m.toFixed(1),"x"]}),j!==0&&e.jsxs("span",{children:["Rotaci√≥n: ",j,"¬∞"]})]})]})}),!A&&B&&e.jsx("div",{className:"absolute bottom-4 right-4 z-40 bg-black/70 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm",children:e.jsxs("span",{children:[o+1," / ",h.length]})}),!A&&B&&e.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-40 bg-black/70 text-white px-4 py-2 rounded-lg text-sm backdrop-blur-sm text-center",children:e.jsx("p",{children:"‚Üê Desliza ‚Üí para navegar ‚Ä¢ ‚Üì Desliza abajo para cerrar"})}),A&&e.jsxs("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-40 bg-black/70 text-white px-4 py-2 rounded-lg text-sm backdrop-blur-sm text-center",children:[e.jsx("p",{children:"Doble clic para controles ‚Ä¢ Espacio para mostrar/ocultar ‚Ä¢ ESC para salir"}),e.jsx("p",{className:"text-xs mt-1",children:"‚Üê ‚Üí para navegar ‚Ä¢ Click fuera para cerrar"})]})]}):null},sa=a=>{switch(a){case"satellite":return e.jsx(Vt,{className:"h-4 w-4"});case"hybrid":return e.jsx(Bt,{className:"h-4 w-4"});case"terrain":return e.jsx(Ut,{className:"h-4 w-4"});default:return e.jsx(ne,{className:"h-4 w-4"})}},Ue=a=>{switch(a){case"roadmap":return"Mapa";case"satellite":return"Sat√©lite";case"hybrid":return"H√≠brido";case"terrain":return"Relieve";default:return"Mapa"}},na=a=>{switch(a){case"DRIVING":return e.jsx(ue,{className:"h-4 w-4"});case"WALKING":return e.jsx(Le,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Pe,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},oa=a=>{switch(a){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},la=a=>{switch(a){case"via_transport_1":return"v√≠a terminal principal";case"via_transport_2":return"v√≠a terminal secundaria";case"current_to_direct":return"desde tu ubicaci√≥n";case"current_to_transport":return"desde tu ubicaci√≥n v√≠a terminal";default:return"v√≠a terminal"}},ia=({currentMapType:a,onMapTypeChange:s,isLoading:r,onCalculateRoute:g,routeInfo:i,travelMode:o,routeType:d,onToggleSidebar:m})=>{const x=j=>a===j?"default":"outline";return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[m&&e.jsx(G,{variant:"outline",size:"sm",onClick:m,className:"lg:hidden gap-2 border-green-200 text-green-700 hover:bg-green-100",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["roadmap","satellite","hybrid","terrain"].map(j=>e.jsxs(G,{variant:x(j),size:"sm",onClick:()=>s(j),className:"gap-2 border-green-200 text-green-700 hover:bg-green-100",children:[sa(j),e.jsx("span",{className:"hidden sm:inline",children:Ue(j)})]},j))})]}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsx(ee,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200 hidden sm:flex",children:Ue(a)}),i&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm text-green-700",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsxs("span",{className:"hidden lg:inline",children:[la(d)," ‚Ä¢ ",i.distance," ‚Ä¢ ",i.duration]}),e.jsxs(ee,{variant:"outline",className:"text-xs",children:[na(o),e.jsx("span",{className:"hidden xs:inline",children:oa(o)})]})]}),e.jsxs(G,{onClick:g,disabled:r,size:"sm",className:"gap-2 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ot,{className:`h-4 w-4 ${r?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:r?"Calculando...":"Calcular"})]})]})]})};var $e="Radio",[ca,Je]=Ie($e),[da,ua]=ca($e),Qe=t.forwardRef((a,s)=>{const{__scopeRadio:r,name:g,checked:i=!1,required:o,disabled:d,value:m="on",onCheck:x,form:j,..._}=a,[M,C]=t.useState(null),v=pe(s,E=>C(E)),N=t.useRef(!1),R=M?j||!!M.closest("form"):!0;return e.jsxs(da,{scope:r,checked:i,disabled:d,children:[e.jsx(me.button,{type:"button",role:"radio","aria-checked":i,"data-state":rt(i),"data-disabled":d?"":void 0,disabled:d,value:m,..._,ref:v,onClick:je(a.onClick,E=>{i||x?.(),R&&(N.current=E.isPropagationStopped(),N.current||E.stopPropagation())})}),R&&e.jsx(at,{control:M,bubbles:!N.current,name:g,value:m,checked:i,required:o,disabled:d,form:j,style:{transform:"translateX(-100%)"}})]})});Qe.displayName=$e;var et="RadioIndicator",tt=t.forwardRef((a,s)=>{const{__scopeRadio:r,forceMount:g,...i}=a,o=ua(et,r);return e.jsx(Ft,{present:g||o.checked,children:e.jsx(me.span,{"data-state":rt(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:s})})});tt.displayName=et;var ma="RadioBubbleInput",at=t.forwardRef(({__scopeRadio:a,control:s,checked:r,bubbles:g=!0,...i},o)=>{const d=t.useRef(null),m=pe(d,o),x=Ze(r),j=Ke(s);return t.useEffect(()=>{const _=d.current;if(!_)return;const M=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(M,"checked").set;if(x!==r&&v){const N=new Event("click",{bubbles:g});v.call(_,r),_.dispatchEvent(N)}},[x,r,g]),e.jsx(me.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:m,style:{...i.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});at.displayName=ma;function rt(a){return a?"checked":"unchecked"}var ga=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ye="RadioGroup",[xa,Va]=Ie(ye,[qe,Je]),st=qe(),nt=Je(),[ha,ba]=xa(ye),ot=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,name:g,defaultValue:i,value:o,required:d=!1,disabled:m=!1,orientation:x,dir:j,loop:_=!0,onValueChange:M,...C}=a,v=st(r),N=qt(j),[R,E]=Xe({prop:o,defaultProp:i??null,onChange:M,caller:ye});return e.jsx(ha,{scope:r,name:g,required:d,disabled:m,value:R,onValueChange:E,children:e.jsx(_t,{asChild:!0,...v,orientation:x,dir:N,loop:_,children:e.jsx(me.div,{role:"radiogroup","aria-required":d,"aria-orientation":x,"data-disabled":m?"":void 0,dir:N,...C,ref:s})})})});ot.displayName=ye;var lt="RadioGroupItem",it=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,disabled:g,...i}=a,o=ba(lt,r),d=o.disabled||g,m=st(r),x=nt(r),j=t.useRef(null),_=pe(s,j),M=o.value===i.value,C=t.useRef(!1);return t.useEffect(()=>{const v=R=>{ga.includes(R.key)&&(C.current=!0)},N=()=>C.current=!1;return document.addEventListener("keydown",v),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",v),document.removeEventListener("keyup",N)}},[]),e.jsx(St,{asChild:!0,...m,focusable:!d,active:M,children:e.jsx(Qe,{disabled:d,required:o.required,checked:M,...x,...i,name:o.name,ref:_,onCheck:()=>o.onValueChange(i.value),onKeyDown:je(v=>{v.key==="Enter"&&v.preventDefault()}),onFocus:je(i.onFocus,()=>{C.current&&j.current?.click()})})})});it.displayName=lt;var fa="RadioGroupIndicator",ct=t.forwardRef((a,s)=>{const{__scopeRadioGroup:r,...g}=a,i=nt(r);return e.jsx(tt,{...i,...g,ref:s})});ct.displayName=fa;var dt=ot,ut=it,pa=ct;const mt=t.forwardRef(({className:a,...s},r)=>e.jsx(dt,{className:K("grid gap-2",a),...s,ref:r}));mt.displayName=dt.displayName;const gt=t.forwardRef(({className:a,...s},r)=>e.jsx(ut,{ref:r,className:K("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...s,children:e.jsx(pa,{className:"flex items-center justify-center",children:e.jsx(Yt,{className:"h-2.5 w-2.5 fill-current text-current"})})}));gt.displayName=ut.displayName;var Ne="Switch",[va,qa]=Ie(Ne),[wa,ja]=va(Ne),xt=t.forwardRef((a,s)=>{const{__scopeSwitch:r,name:g,checked:i,defaultChecked:o,required:d,disabled:m,value:x="on",onCheckedChange:j,form:_,...M}=a,[C,v]=t.useState(null),N=pe(s,h=>v(h)),R=t.useRef(!1),E=C?_||!!C.closest("form"):!0,[A,q]=Xe({prop:i,defaultProp:o??!1,onChange:j,caller:Ne});return e.jsxs(wa,{scope:r,checked:A,disabled:m,children:[e.jsx(me.button,{type:"button",role:"switch","aria-checked":A,"aria-required":d,"data-state":pt(A),"data-disabled":m?"":void 0,disabled:m,value:x,...M,ref:N,onClick:je(a.onClick,h=>{q(O=>!O),E&&(R.current=h.isPropagationStopped(),R.current||h.stopPropagation())})}),E&&e.jsx(ft,{control:C,bubbles:!R.current,name:g,value:x,checked:A,required:d,disabled:m,form:_,style:{transform:"translateX(-100%)"}})]})});xt.displayName=Ne;var ht="SwitchThumb",bt=t.forwardRef((a,s)=>{const{__scopeSwitch:r,...g}=a,i=ja(ht,r);return e.jsx(me.span,{"data-state":pt(i.checked),"data-disabled":i.disabled?"":void 0,...g,ref:s})});bt.displayName=ht;var ya="SwitchBubbleInput",ft=t.forwardRef(({__scopeSwitch:a,control:s,checked:r,bubbles:g=!0,...i},o)=>{const d=t.useRef(null),m=pe(d,o),x=Ze(r),j=Ke(s);return t.useEffect(()=>{const _=d.current;if(!_)return;const M=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(M,"checked").set;if(x!==r&&v){const N=new Event("click",{bubbles:g});v.call(_,r),_.dispatchEvent(N)}},[x,r,g]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:m,style:{...i.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ft.displayName=ya;function pt(a){return a?"checked":"unchecked"}var vt=xt,Na=bt;const wt=t.forwardRef(({className:a,...s},r)=>e.jsx(vt,{className:K("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:r,children:e.jsx(Na,{className:K("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));wt.displayName=vt.displayName;const ka=a=>{switch(a){case"DRIVING":return e.jsx(ue,{className:"h-4 w-4"});case"WALKING":return e.jsx(Le,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Pe,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},Be=a=>{switch(a){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},Ve=({routeType:a,travelMode:s,routeInfo:r,routeSegments:g,activeSegment:i,showRoute:o,userLocation:d,hasLocationPermission:m,origin:x,destination:j,transportBase:_,transportBase2:M,onRouteTypeChange:C,onTravelModeChange:v,onRouteVisibilityChange:N,onSegmentChange:R,onClose:E})=>{const A=[{value:"via_transport_1",label:"Desde Terminal Principal",description:"Terminal Principal ‚Üí Destino",icon:ve,requiresLocation:!1,badgeVariant:"default"},{value:"via_transport_2",label:"Desde Terminal Secundaria",description:"Terminal Secundaria ‚Üí Destino",icon:ve,requiresLocation:!1,badgeVariant:"outline"},{value:"current_to_direct",label:"Desde mi ubicaci√≥n",description:"Tu ubicaci√≥n ‚Üí Destino",icon:be,requiresLocation:!0,badgeVariant:"outline"},{value:"current_to_transport",label:"Mi ubicaci√≥n ‚Üí Terminal",description:"Tu ubicaci√≥n ‚Üí Terminal ‚Üí Destino",icon:be,requiresLocation:!0,badgeVariant:"outline"}],q=g.length>1;return e.jsxs("div",{className:"space-y-4",children:[E&&e.jsxs("div",{className:"flex items-center justify-between lg:hidden",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Opciones de Ruta"}),e.jsx(G,{variant:"ghost",size:"sm",onClick:E,children:e.jsx(Te,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:[e.jsx(de,{className:"text-sm font-medium text-blue-800 mb-3 block",children:"Tipo de Ruta:"}),e.jsx(mt,{value:a,onValueChange:h=>C(h),className:"space-y-3",children:A.map(h=>{const O=h.requiresLocation&&!m&&!d,W=(h.value==="current_to_direct"||h.value==="current_to_transport")&&d;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gt,{value:h.value,id:h.value,disabled:O}),e.jsxs(de,{htmlFor:h.value,className:`flex items-center gap-2 cursor-pointer flex-1 ${O?"opacity-60 cursor-not-allowed":""}`,children:[e.jsx(h.icon,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:h.label}),e.jsx(ee,{variant:h.badgeVariant,className:`text-xs w-fit ${h.value==="via_transport_1"?"bg-green-100 text-green-800 border-green-200":""}`,children:h.description})]}),O&&e.jsx(ee,{variant:"secondary",className:"mt-1 text-xs bg-amber-100 text-amber-800",children:"Permisos requeridos"}),W&&e.jsx(ee,{variant:"secondary",className:"mt-1 text-xs bg-blue-100 text-blue-800",children:"Usando tu ubicaci√≥n"})]})]})]},h.value)})}),d&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-700 flex items-center gap-1",children:[e.jsx(be,{className:"h-3 w-3"}),"üìç Usando tu ubicaci√≥n actual"]})})]}),q&&r&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-purple-200/50",children:[e.jsx(de,{className:"text-sm font-medium text-purple-800 mb-3 block",children:"Ver Segmento:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(G,{size:"sm",variant:i==="all"?"default":"outline",onClick:()=>R("all"),className:`gap-2 ${i==="all"?"bg-purple-600 text-white":"border-purple-200 text-purple-700 hover:bg-purple-50"}`,children:[e.jsx(fe,{className:"h-4 w-4"}),"Todas las etapas"]}),g.map((h,O)=>e.jsx(G,{size:"sm",variant:i===O?"default":"outline",onClick:()=>R(O),className:`gap-2 ${i===O?"bg-purple-600 text-white":"border-purple-200 text-purple-700 hover:bg-purple-50"}`,children:e.jsxs("span",{children:["Etapa ",O+1]})},O))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-green-200/50",children:[e.jsxs("h3",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4"}),(a==="current_to_direct"||a==="current_to_transport")&&d?"Tu Ubicaci√≥n Actual":"Origen"]}),e.jsx("p",{className:"text-xs text-green-700 line-clamp-2",children:(a==="current_to_direct"||a==="current_to_transport")&&d?d.address||"Ubicaci√≥n detectada":x.address})]}),(a==="via_transport_1"||a==="current_to_transport")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-purple-200/50",children:[e.jsxs("h3",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ve,{className:"h-4 w-4"}),"Terminal Principal"]}),e.jsx("p",{className:"text-xs text-purple-700 line-clamp-2",children:_.address})]}),a==="via_transport_2"&&M&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-indigo-200/50",children:[e.jsxs("h3",{className:"font-semibold text-indigo-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ve,{className:"h-4 w-4"}),"Terminal Secundaria"]}),e.jsx("p",{className:"text-xs text-indigo-700 line-clamp-2",children:M.address})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-red-200/50",children:[e.jsxs("h3",{className:"font-semibold text-red-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4"}),"Destino"]}),e.jsx("p",{className:"text-xs text-red-700 line-clamp-2",children:j.address})]})]}),r&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Informaci√≥n de Ruta"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Distancia total:"}),e.jsx(ee,{variant:"outline",className:"bg-blue-100 text-blue-800",children:r.distance})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Duraci√≥n total:"}),e.jsxs(ee,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(We,{className:"h-3 w-3 mr-1"}),r.duration]})]})]}),g.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(de,{className:"text-sm font-medium text-blue-800 mb-2 block",children:"Segmentos de la ruta:"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:g.map((h,O)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium block",children:["Etapa ",O+1]}),e.jsx("div",{className:"text-gray-600 text-xs mt-1 line-clamp-2",children:h.instructions}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[h.distance," ‚Ä¢ ",h.duration]})]}),e.jsx(ee,{variant:"outline",className:"text-xs ml-2",children:Be(h.mode)})]},O))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(de,{className:"text-sm font-medium text-blue-800 mb-2 block",children:"Modo de transporte:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["DRIVING","WALKING","BICYCLING"].map(h=>e.jsxs(G,{size:"sm",variant:s===h?"default":"outline",onClick:()=>v(h),className:`gap-2 flex-1 min-w-[80px] ${s===h?"bg-blue-600 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,children:[ka(h),e.jsx("span",{className:"hidden xs:inline",children:Be(h)})]},h))})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs(de,{htmlFor:"show-route",className:"text-sm font-medium text-blue-800 flex items-center gap-2",children:[o?e.jsx(Ht,{className:"h-4 w-4"}):e.jsx(Xt,{className:"h-4 w-4"}),"Mostrar ruta en el mapa:"]}),e.jsx(wt,{id:"show-route",checked:o,onCheckedChange:N})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3 text-sm",children:"Leyenda"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${(a==="current_to_direct"||a==="current_to_transport")&&d?"bg-blue-500":"bg-green-500"}`}),e.jsx("span",{className:"text-gray-700",children:(a==="current_to_direct"||a==="current_to_transport")&&d?"Tu ubicaci√≥n":"Origen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Destino"})]}),(a==="via_transport_1"||a==="current_to_transport")&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Terminal Principal"})]}),a==="via_transport_2"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Terminal Secundaria"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Ruta"})]})]})]})]})},Ca=a=>a==="satellite"||a==="hybrid"?[{elementType:"labels",stylers:[{visibility:"on"}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"},{weight:1}]},{elementType:"labels.text.stroke",stylers:[{color:"#000000"},{weight:2}]}]:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f8fafc"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#64748b"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e0f2fe"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f1f5f9"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#cbd5e1"}]}],jt=t.forwardRef(({origin:a,destination:s,routeType:r,currentMapType:g,showRoute:i,userLocation:o,routeSegments:d,isLoading:m,mapError:x,onMapInitialized:j,onMapError:_,onReload:M},C)=>{const v=t.useRef(null),N=t.useRef(null),R=t.useRef(null),E=t.useRef([]),A=t.useRef(!1);t.useImperativeHandle(C,()=>v.current);const q=t.useCallback(()=>{E.current.forEach(b=>{b&&b.setMap&&b.setMap(null)}),E.current=[]},[]),h=t.useCallback(b=>{if(!(!b||!window.google))try{q();const c=(r==="current_to_direct"||r==="current_to_transport")&&o,u=c?{lat:o.lat,lng:o.lng}:{lat:a.lat,lng:a.lng},y=c?"Tu ubicaci√≥n actual":`Origen: ${a.address}`,S=c?"#3b82f6":"#10b981",I=new window.google.maps.Marker({position:u,map:b,title:y,icon:{url:`data:image/svg+xml;base64,${btoa(`
            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0C10.48 0 6 4.48 6 10C6 17.08 16 40 16 40C16 40 26 17.08 26 10C26 4.48 21.52 0 16 0Z" fill="${S}"/>
              <circle cx="16" cy="10" r="5" fill="white"/>
              <circle cx="16" cy="10" r="3" fill="${S}"/>
            </svg>
          `)}`,scaledSize:new window.google.maps.Size(32,40),anchor:new window.google.maps.Point(16,40)}});E.current.push(I);const $=new window.google.maps.Marker({position:{lat:s.lat,lng:s.lng},map:b,title:`Destino: ${s.address}`,icon:{url:`data:image/svg+xml;base64,${btoa(`
            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0C10.48 0 6 4.48 6 10C6 17.08 16 40 16 40C16 40 26 17.08 26 10C26 4.48 21.52 0 16 0Z" fill="#ef4444"/>
              <circle cx="16" cy="10" r="5" fill="white"/>
              <circle cx="16" cy="10" r="3" fill="#ef4444"/>
            </svg>
          `)}`,scaledSize:new window.google.maps.Size(32,40),anchor:new window.google.maps.Point(16,40)}});if(E.current.push($),r==="via_transport_1"||r==="current_to_transport"){const B=new window.google.maps.Marker({position:{lat:19.8758703351958,lng:-97.5889138590976},map:b,title:"Terminal Principal de Transporte Zacapoaxtla",icon:{url:`data:image/svg+xml;base64,${btoa(`
              <svg width="28" height="36" viewBox="0 0 28 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="8" width="20" height="20" rx="2" fill="#8b5cf6"/>
                <circle cx="10" cy="22" r="2" fill="white"/>
                <circle cx="18" cy="22" r="2" fill="white"/>
                <path d="M4 18L4 12L20 12L20 18" fill="#a78bfa"/>
                <rect x="2" y="28" width="24" height="4" rx="1" fill="#8b5cf6"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(28,36),anchor:new window.google.maps.Point(14,36)}});E.current.push(B)}if(r==="via_transport_2"){const B=new window.google.maps.Marker({position:{lat:19.87383634377636,lng:-97.58769273588325},map:b,title:"Terminal Secundaria de Transporte Zacapoaxtla",icon:{url:`data:image/svg+xml;base64,${btoa(`
              <svg width="28" height="36" viewBox="0 0 28 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="8" width="20" height="20" rx="2" fill="#6366f1"/>
                <circle cx="10" cy="22" r="2" fill="white"/>
                <circle cx="18" cy="22" r="2" fill="white"/>
                <path d="M4 18L4 12L20 12L20 18" fill="#818cf8"/>
                <rect x="2" y="28" width="24" height="4" rx="1" fill="#6366f1"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(28,36),anchor:new window.google.maps.Point(14,36)}});E.current.push(B)}}catch(c){console.error("‚ùå Error agregando marcadores:",c)}},[r,o,a,s,q]),O=t.useCallback(b=>{if(!(!N.current||!window.google||!R.current))try{R.current.setDirections({routes:[],request:{origin:"",destination:"",travelMode:google.maps.TravelMode.DRIVING}}),b.forEach(u=>{u.startLocation&&u.endLocation&&new window.google.maps.DirectionsService().route({origin:u.startLocation,destination:u.endLocation,travelMode:window.google.maps.TravelMode[u.mode]},(S,I)=>{I==="OK"&&R.current&&S&&R.current.setDirections(S)})});const c=new window.google.maps.LatLngBounds;b.forEach(u=>{u.startLocation&&c.extend(new window.google.maps.LatLng(u.startLocation.lat,u.startLocation.lng)),u.endLocation&&c.extend(new window.google.maps.LatLng(u.endLocation.lat,u.endLocation.lng))}),c.isEmpty()&&(c.extend(new window.google.maps.LatLng(a.lat,a.lng)),c.extend(new window.google.maps.LatLng(s.lat,s.lng)),(r==="via_transport_1"||r==="current_to_transport")&&c.extend(new window.google.maps.LatLng(19.8758703351958,-97.5889138590976)),o&&(r==="current_to_direct"||r==="current_to_transport")&&c.extend(new window.google.maps.LatLng(o.lat,o.lng))),N.current&&N.current.fitBounds(c)}catch(c){console.error("‚ùå Error renderizando ruta:",c)}},[r,o,a,s]),W=t.useCallback(()=>{if(!(!v.current||!window.google||A.current))try{v.current&&(v.current.innerHTML="");const b=[a,s];(r==="via_transport_1"||r==="current_to_transport")&&b.push({lat:19.8758703351958,lng:-97.5889138590976,address:""}),(r==="current_to_direct"||r==="current_to_transport")&&o&&b.push(o);const c=new window.google.maps.LatLngBounds;b.forEach(S=>{c.extend(new window.google.maps.LatLng(S.lat,S.lng))});const u=new window.google.maps.Map(v.current,{center:c.getCenter(),zoom:12,mapTypeId:g,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,mapTypeControl:!0,styles:Ca(g)});N.current=u,u.fitBounds(c);const y=new window.google.maps.DirectionsRenderer({map:i?u:null,suppressMarkers:!0,polylineOptions:{strokeColor:"#3b82f6",strokeOpacity:.8,strokeWeight:6},preserveViewport:!1});R.current=y,h(u),A.current=!0,j(u)}catch(b){const c="Error al inicializar el mapa: "+(b instanceof Error?b.message:"Error desconocido");_(c)}},[a,s,r,g,i,o,h,j,_]),w=t.useCallback(()=>{if(!A.current)if(window.google)setTimeout(()=>W(),100);else{const b=document.createElement("script"),c="AIzaSyAyGMepBWIz2iAe2RZXcXSB27qwPH3tx2Q";b.src=`https://maps.googleapis.com/maps/api/js?key=${c}&libraries=places,geometry`,b.async=!0,b.defer=!0,b.onload=()=>{setTimeout(()=>W(),100)},b.onerror=()=>{_("Error al cargar Google Maps. Verifica tu API key.")},document.head.appendChild(b)}},[W,_]);return t.useEffect(()=>{w()},[w]),t.useEffect(()=>{d.length>0&&A.current&&O(d)},[d,O]),t.useEffect(()=>{R.current&&N.current&&R.current.setMap(i?N.current:null)},[i]),t.useEffect(()=>{A.current&&N.current&&h(N.current)},[r,o,h]),e.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden border-2 border-green-200/50 bg-white min-h-0",children:[m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-50/50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(we,{className:"h-8 w-8 text-green-600 animate-spin"}),e.jsx("p",{className:"text-green-700 font-medium",children:r.includes("current")?"Calculando ruta desde tu ubicaci√≥n...":"Calculando ruta..."})]})}),x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50/80 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Error al cargar el mapa"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:x}),e.jsxs(G,{onClick:M,className:"gap-2 bg-red-600 hover:bg-red-700",children:[e.jsx(we,{className:"h-4 w-4"}),"Reintentar"]})]})}),e.jsx("div",{ref:v,className:"w-full h-full",style:{minHeight:"400px"}})]})});jt.displayName="MapContainer";const Ra=a=>{switch(a){case"DRIVING":return e.jsx(ue,{className:"h-4 w-4"});case"WALKING":return e.jsx(Le,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Pe,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},_a=a=>{switch(a){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},Sa=a=>{switch(a){case"direct":return"directa";case"via_transport":return"v√≠a terminal";case"current_to_direct":return"desde tu ubicaci√≥n";case"current_to_transport":return"desde tu ubicaci√≥n v√≠a terminal";default:return"directa"}},Ma=({routeInfo:a,routeType:s,travelMode:r,userLocation:g,isLoading:i,onClose:o,onOpenGoogleMaps:d})=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 pt-4 border-t border-green-200/30",children:[e.jsx("div",{className:"text-sm text-green-600 flex-1",children:a?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-green-600"}),"Ruta ",Sa(s)," ‚Ä¢",a.distance," ‚Ä¢ ",a.duration]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:"outline",className:"text-xs",children:[Ra(r),_a(r)]}),g&&(s==="current_to_direct"||s==="current_to_transport")&&e.jsxs(ee,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),"Desde tu ubicaci√≥n"]})]})]}):i?e.jsxs("span",{children:["üîÑ Calculando ruta",s.includes("current")?" desde tu ubicaci√≥n":"","..."]}):e.jsx("span",{children:"üëÜ Selecciona opciones y calcula la ruta..."})}),e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[e.jsx(G,{variant:"outline",onClick:o,className:"border-green-200 text-green-700 hover:bg-green-50 flex-1 sm:flex-none",children:"Cerrar"}),e.jsxs(G,{onClick:d,className:"gap-2 bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white shadow-lg flex-1 sm:flex-none",disabled:!a,children:[e.jsx(Zt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Abrir en "}),"Google Maps"]})]})]}),Ea=({isOpen:a,onAccept:s,onReject:r,onClose:g})=>e.jsx(Se,{open:a,onOpenChange:g,children:e.jsxs(Me,{className:"sm:max-w-md bg-white",children:[e.jsx(Ee,{children:e.jsxs(De,{className:"flex items-center gap-2 text-lg",children:[e.jsx(be,{className:"h-5 w-5 text-blue-600"}),"Acceso a tu ubicaci√≥n"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(Dt,{className:"bg-blue-50 border-blue-200",children:[e.jsx(ne,{className:"h-4 w-4 text-blue-600"}),e.jsx(Tt,{className:"text-blue-800",children:"Para mostrarte rutas desde tu ubicaci√≥n actual, necesitamos tu permiso."})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Kt,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Tu privacidad es importante"}),e.jsx("p",{className:"text-xs",children:"Tu ubicaci√≥n solo se usa para calcular rutas y no se almacena"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ne,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Rutas m√°s precisas"}),e.jsx("p",{className:"text-xs",children:"Obten indicaciones exactas desde donde te encuentras"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Wt,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Sin acceso limitado"}),e.jsx("p",{className:"text-xs",children:"Al rechazar, solo podr√°s ver rutas desde puntos fijos"})]})]})]})]}),e.jsxs(Pt,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(G,{variant:"outline",onClick:r,className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-100",children:"Rechazar"}),e.jsx(G,{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Permitir ubicaci√≥n"})]})]})}),Da=()=>{const[a,s]=t.useState(null),[r,g]=t.useState(!1),[i,o]=t.useState(null),[d,m]=t.useState(!1),{toast:x}=_e(),j=t.useCallback(async(w,b)=>{if(!window.google)return"Ubicaci√≥n actual";try{const c=new window.google.maps.Geocoder;return new Promise(u=>{c.geocode({location:{lat:w,lng:b}},(y,S)=>{S==="OK"&&y&&y[0]?u(y[0].formatted_address):u("Ubicaci√≥n actual")})})}catch{return"Ubicaci√≥n actual"}},[]),_=t.useCallback(async()=>{if(!navigator.permissions)return!1;try{return(await navigator.permissions.query({name:"geolocation"})).state==="granted"}catch{return!1}},[]),M=t.useCallback(async()=>{const w=await _();return m(w),w},[_]),C=t.useCallback(async()=>new Promise((w,b)=>{if(!navigator.geolocation){b(new Error("La geolocalizaci√≥n no es soportada por este navegador"));return}g(!0),o(null);const c={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4};navigator.geolocation.getCurrentPosition(async u=>{try{const{latitude:y,longitude:S}=u.coords,$={address:await j(y,S),lat:y,lng:S};s($),m(!0),g(!1),w($)}catch{const{latitude:y,longitude:S}=u.coords,I={address:"Ubicaci√≥n actual",lat:y,lng:S};s(I),m(!0),g(!1),w(I)}},u=>{g(!1),m(!1);let y="No se pudo obtener la ubicaci√≥n actual. ";switch(u.code){case u.PERMISSION_DENIED:y+="Permiso de ubicaci√≥n denegado.";break;case u.POSITION_UNAVAILABLE:y+="Informaci√≥n de ubicaci√≥n no disponible.";break;case u.TIMEOUT:y+="Tiempo de espera agotado para obtener la ubicaci√≥n.";break;default:y+="Error desconocido al obtener la ubicaci√≥n."}o(y),b(new Error(y))},c)}),[j]),v=t.useCallback(w=>{if(w>=3600){const b=Math.floor(w/3600),c=Math.round(w%3600/60);return`${b} h ${c} min`}else return`${Math.round(w/60)} min`},[]),N=t.useCallback(w=>w>=1e3?`${(w/1e3).toFixed(1)} km`:`${Math.round(w)} m`,[]),R=t.useCallback((w,b)=>{const u=(b.lat-w.lat)*Math.PI/180,y=(b.lng-w.lng)*Math.PI/180,S=Math.sin(u/2)*Math.sin(u/2)+Math.cos(w.lat*Math.PI/180)*Math.cos(b.lat*Math.PI/180)*Math.sin(y/2)*Math.sin(y/2);return 6371*(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)))*1e3},[]),E=t.useCallback(async(w,b,c)=>{if(!window.google?.maps?.DirectionsService)throw new Error("Google Maps no est√° disponible");const u=new window.google.maps.DirectionsService;return new Promise((y,S)=>{const I={origin:{lat:w.lat,lng:w.lng},destination:{lat:b.lat,lng:b.lng},travelMode:window.google.maps.TravelMode[c],provideRouteAlternatives:!1};u.route(I,($,B)=>{if(B==="OK"&&$?.routes[0]?.legs){const V=$.routes[0].legs.map(T=>({distance:T.distance?.text||"0 km",duration:T.duration?.text||"0 min",mode:c,instructions:`De ${T.start_address} a ${T.end_address}`,distanceMeters:T.distance?.value||0,durationSeconds:T.duration?.value||0,startLocation:{address:T.start_address,lat:T.start_location.lat(),lng:T.start_location.lng()},endLocation:{address:T.end_address,lat:T.end_location.lat(),lng:T.end_location.lng()}})),F=V.reduce((T,Y)=>T+Y.distanceMeters,0),Z=V.reduce((T,Y)=>T+Y.durationSeconds,0);y({segments:V,totalDistance:N(F),totalDuration:v(Z),totalDistanceMeters:F,totalDurationSeconds:Z})}else S(new Error(`Error calculando ruta: ${B}`))})})},[N,v]),A=t.useCallback(async w=>{const b=[];let c=0,u=0;for(const y of w)try{const S=await E(y.origin,y.destination,y.mode);b.push(...S.segments),c+=S.totalDistanceMeters,u+=S.totalDurationSeconds}catch(S){throw console.error("Error en segmento:",S),S}return{segments:b,totalDistance:N(c),totalDuration:v(u),totalDistanceMeters:c,totalDurationSeconds:u}},[E,N,v]),q=t.useCallback(async w=>{if(w)try{const b=await C();return m(!0),x({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"}),b}catch(b){throw m(!1),x({title:"Error de ubicaci√≥n",description:"No se pudo obtener la ubicaci√≥n despu√©s de conceder permisos",variant:"destructive"}),b}else throw m(!1),x({title:"Permisos denegados",description:"Usando rutas desde puntos fijos",variant:"default"}),new Error("Permiso de ubicaci√≥n denegado por el usuario")},[C,x]),h=t.useCallback((w,b,c,u,y)=>{if(!y||!w)return"via_transport_1";const S=R(w,b),I=R(w,u),$=R(w,c);if(I<2e3)return"via_transport_1";if(S<1e3)return"via_transport_1";if($<5e3)return"current_to_direct";if(I<1e4)return"current_to_transport";{const B={via_transport_1:I,via_transport_2:I+500,current_to_direct:$,current_to_transport:I};return Object.entries(B).reduce((V,[F,Z])=>Z<B[V]?F:V,"via_transport_1")}},[R]),O=t.useCallback((w,b,c,u,y)=>!!(!u||u.routeType!==w||u.travelMode!==b||c&&y&&R(c,y)>100),[R]),W=t.useCallback(w=>{x({title:"Error de ubicaci√≥n",description:w,variant:"destructive"})},[x]);return{userLocation:a,isGettingLocation:r,locationError:i,hasLocationPermission:d,handlePermissionResponse:q,getUserCurrentLocation:C,calculateRoute:E,calculateComplexRoute:A,determineOptimalRoute:h,initializeLocationPermissions:M,formatDuration:v,shouldRecalculateRoute:O,formatDistance:N,showLocationError:W}},re={address:"Terminal de Autobuses Zacapoaxtla, Carretera Federal Teziutl√°n-Zacapoaxtla, Zacapoaxtla, Puebla",lat:19.8758703351958,lng:-97.5889138590976},he={address:"Segunda Terminal de Transporte Zacapoaxtla, Centro, Zacapoaxtla, Puebla",lat:19.87383634377636,lng:-97.58769273588325},Ta=({origin:a,destination:s,buttonText:r="Ver Ruta",className:g})=>{const[i,o]=t.useState(!1),[d,m]=t.useState("DRIVING"),[x,j]=t.useState("current_to_direct"),[_,M]=t.useState(null),[C,v]=t.useState([]),[N,R]=t.useState(0),[E,A]=t.useState(!1),[q,h]=t.useState(null),[O,W]=t.useState("hybrid"),[w,b]=t.useState(!0),[c,u]=t.useState(!1),[y,S]=t.useState(null),[I,$]=t.useState(!1),B=t.useRef(null),X=t.useRef(null),V=t.useRef(!1),F=t.useRef(!1),Z=t.useRef(null),T=t.useRef(null),Y=t.useRef(null),{toast:J}=_e(),{userLocation:P,isGettingLocation:n,locationError:l,hasLocationPermission:f,getUserCurrentLocation:k,handlePermissionResponse:U,initializeLocationPermissions:oe,calculateRoute:H,calculateComplexRoute:p}=Da(),z=t.useCallback(async()=>{if(!window.google||F.current){console.log("‚è∏Ô∏è  Calculaci√≥n omitida - Google Maps no disponible o ya calculando");return}F.current=!0,A(!0),h(null);try{if((x==="current_to_direct"||x==="current_to_transport")&&!f&&!P)throw new Error("Se requiere permiso de ubicaci√≥n para esta ruta.");let L;switch(console.log("üìç Calculando ruta:",{routeType:x,travelMode:d}),x){case"via_transport_1":L=await H(re,s,d);break;case"via_transport_2":L=await H(he,s,d);break;case"current_to_direct":if(!P)throw new Error("Se requiere ubicaci√≥n del usuario");L=await H(P,s,d);break;case"current_to_transport":if(!P)throw new Error("Se requiere ubicaci√≥n del usuario");L=await p([{origin:P,destination:re,mode:d},{origin:re,destination:s,mode:d}]);break;default:throw new Error("Tipo de ruta no v√°lido")}const ae={distance:L.totalDistance,duration:L.totalDuration,startAddress:L.segments[0]?.startLocation?.address||(x.includes("current")&&P?P.address:a.address),endAddress:L.segments[L.segments.length-1]?.endLocation?.address||s.address,steps:L.segments,totalDistanceMeters:L.totalDistanceMeters,totalDurationSeconds:L.totalDurationSeconds,totalDuration:void 0,totalDistance:void 0};v(L.segments),M(ae),Z.current={routeType:x,travelMode:d,timestamp:Date.now()},T.current&&(T.current.pending=!1),console.log("‚úÖ Ruta calculada exitosamente")}catch(D){console.error("‚ùå Error en calculateOptimalRoute:",D);const L=D instanceof Error?D.message:"Error desconocido";T.current&&(T.current.pending=!1),!L.includes("ubicaci√≥n")&&!L.includes("segmento")&&(M(null),v([])),L.includes("ubicaci√≥n")||J({title:"Error en c√°lculo de ruta",description:L,variant:"destructive"})}finally{A(!1),F.current=!1}},[x,d,f,P,a,s,H,p,J]);t.useEffect(()=>{i&&x==="current_to_direct"&&!P&&f&&(console.log("üìç Inicializando ubicaci√≥n para ruta por defecto..."),k().catch(D=>{console.log("‚ö†Ô∏è No se pudo obtener ubicaci√≥n autom√°tica:",D.message),j("via_transport_1")}))},[i,x,P,f,k]),t.useEffect(()=>{if(!i||!V.current)return;if((()=>{if(F.current)return!1;const L={routeType:x,travelMode:d},ae=Z.current;return!(ae&&ae.routeType===L.routeType&&ae.travelMode===L.travelMode)})()){console.log("üîÑ Efecto principal - Calculando ruta:",{routeType:x,travelMode:d});const L=x.includes("current")&&!P?1e3:0;setTimeout(()=>{z()},L)}},[z,i,x,d,P]),t.useEffect(()=>{!i||!V.current||T.current?.pending&&(console.log("üîÑ Procesando cambio de modo de transporte:",T.current.mode),Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{T.current?.pending&&(z(),T.current.pending=!1)},300))},[d,i,z]),t.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const Q=t.useCallback(D=>{D!==d&&(console.log("üöó Cambiando modo de transporte a:",D),T.current={mode:D,timestamp:Date.now(),pending:!0},m(D))},[d]),te=t.useCallback(async D=>{const L=D==="current_to_direct"||D==="current_to_transport";if(L&&!f&&!P)S(()=>async()=>{j(D),R(0);try{await k()}catch(ae){console.error("Error obteniendo ubicaci√≥n:",ae),j("via_transport_1")}}),u(!0);else if(j(D),R(0),L&&f&&!P)try{await k()}catch(ae){console.error("Error obteniendo ubicaci√≥n:",ae),j("via_transport_1")}},[f,P,k]),le=t.useCallback(D=>{R(D)},[]),ie=t.useCallback(()=>N==="all"?C:C.filter((D,L)=>L===N),[C,N]),ce=t.useCallback(async()=>{if(!n)try{if(!f){u(!0);return}await k(),J({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"})}catch(D){console.error("Error obteniendo ubicaci√≥n:",D),J({title:"Error de ubicaci√≥n",description:l||"No se pudo obtener la ubicaci√≥n",variant:"destructive"})}},[k,J,l,n,f]),se=t.useCallback(async D=>{if(u(!1),D)try{await U(!0),await k(),J({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"})}catch(L){console.error("Error obteniendo ubicaci√≥n despu√©s de permisos:",L),J({title:"Error de ubicaci√≥n",description:"No se pudo obtener la ubicaci√≥n despu√©s de conceder permisos",variant:"destructive"})}else J({title:"Permisos denegados",description:"Usando rutas desde puntos fijos",variant:"default"});y&&setTimeout(()=>{y(),S(null)},300)},[U,k,y,J]),ge=t.useCallback(()=>{V.current=!1,Z.current=null,T.current=null,h(null),M(null),v([]),Y.current&&clearTimeout(Y.current)},[]),yt=t.useCallback(D=>{W(D),X.current&&X.current.setMapTypeId(D)},[]),ze=t.useCallback(()=>{const D="https://www.google.com/maps/dir/";switch(x){case"via_transport_1":return`${D}${a.lat},${a.lng}/${re.lat},${re.lng}/${s.lat},${s.lng}`;case"via_transport_2":return`${D}${a.lat},${a.lng}/${he.lat},${he.lng}/${s.lat},${s.lng}`;case"current_to_direct":return P?`${D}${P.lat},${P.lng}/${s.lat},${s.lng}`:`${D}${a.lat},${a.lng}/${s.lat},${s.lng}`;case"current_to_transport":return P?`${D}${P.lat},${P.lng}/${re.lat},${re.lng}/${s.lat},${s.lng}`:`${D}${a.lat},${a.lng}/${re.lat},${re.lng}/${s.lat},${s.lng}`;default:return`${D}${a.lat},${a.lng}/${s.lat},${s.lng}`}},[x,a,s,P]),Nt=t.useCallback(()=>{window.open(ze(),"_blank")},[ze]),kt=t.useCallback(()=>{o(!1),$(!1),T.current=null,Y.current&&clearTimeout(Y.current)},[]),Ge=t.useCallback(()=>{$(!I)},[I]),Ct=t.useCallback(D=>{X.current=D,V.current=!0,(async()=>{try{await oe(),Z.current||(console.log("üó∫Ô∏è Mapa inicializado, calculando ruta inicial..."),z())}catch(ae){console.error("Error en inicializaci√≥n:",ae)}})()},[z,oe]),Rt=()=>e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 sm:gap-6 min-h-0",children:[e.jsx("div",{className:"hidden lg:block w-96 flex-col gap-4 overflow-y-auto",children:e.jsx(Ve,{routeType:x,travelMode:d,routeInfo:_,routeSegments:C,activeSegment:N,showRoute:w,userLocation:P,hasLocationPermission:f,origin:a,destination:s,transportBase:re,transportBase2:he,onRouteTypeChange:te,onTravelModeChange:Q,onRouteVisibilityChange:b,onSegmentChange:le})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[e.jsx(ia,{currentMapType:O,onMapTypeChange:yt,isLoading:E,onCalculateRoute:z,routeInfo:_,travelMode:d,routeType:x,userLocation:P,onToggleSidebar:Ge,showSidebar:I}),e.jsx(jt,{ref:B,origin:a,destination:s,routeType:x,travelMode:d,currentMapType:O,showRoute:w,userLocation:P,routeSegments:ie(),activeSegment:N,isLoading:E,mapError:q,onMapInitialized:Ct,onMapError:h,onReload:ge})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(Se,{open:i,onOpenChange:o,children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(G,{type:"button",variant:"outline",className:K("gap-2 border-green-300 text-green-700 hover:bg-green-50 hover:text-green-800",g),children:[e.jsx(fe,{className:"h-4 w-4"}),r]})}),e.jsxs(Me,{className:"max-w-7xl h-[95vh] flex flex-col bg-gradient-to-br from-green-50/80 to-blue-100/80 backdrop-blur-sm border border-green-200/50 shadow-2xl rounded-2xl p-2 sm:p-4 md:p-6",children:[e.jsxs(Ee,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between pb-4 border-b border-green-200/30 gap-2 sm:gap-3",children:[e.jsx(De,{className:"text-base sm:text-lg md:text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent text-center sm:text-left w-full sm:w-auto",children:"üó∫Ô∏è C√≥mo Llegar"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-between sm:justify-start",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:Ge,className:"lg:hidden gap-2 border-green-200 text-green-700 hover:bg-green-50",children:[I?e.jsx(Te,{className:"h-4 w-4"}):e.jsx(He,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Men√∫"})]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:ce,disabled:n,className:"gap-2 border-blue-200 text-blue-700 hover:bg-blue-100 flex-1 sm:flex-none",children:[e.jsx(be,{className:`h-4 w-4 ${n?"animate-pulse":""}`}),e.jsx("span",{className:"hidden xs:inline",children:n?"Obteniendo...":"Mi Ubicaci√≥n"})]}),e.jsxs(G,{onClick:ge,disabled:E,variant:"outline",size:"sm",className:"gap-2 border-green-200 text-green-700 hover:bg-green-100 flex-1 sm:flex-none",children:[e.jsx(we,{className:`h-4 w-4 ${E?"animate-spin":""}`}),e.jsx("span",{className:"hidden xs:inline",children:"Recargar"})]})]})]}),e.jsx(Mt,{open:I,onOpenChange:$,children:e.jsx(Et,{side:"left",className:"w-[85vw] sm:w-96 p-4 overflow-y-auto bg-gradient-to-b from-green-50/95 to-blue-100/95 backdrop-blur-sm",children:e.jsx(Ve,{routeType:x,travelMode:d,routeInfo:_,routeSegments:C,activeSegment:N,showRoute:w,userLocation:P,hasLocationPermission:f,origin:a,destination:s,transportBase:re,transportBase2:he,onRouteTypeChange:te,onTravelModeChange:Q,onRouteVisibilityChange:b,onSegmentChange:le,onClose:()=>$(!1)})})}),Rt(),e.jsx(Ma,{routeInfo:_,routeType:x,travelMode:d,userLocation:P,isLoading:E,onClose:kt,onOpenGoogleMaps:Nt})]})]}),e.jsx(Ea,{isOpen:c,onAccept:()=>se(!0),onReject:()=>se(!1),onClose:()=>{u(!1),S(null)}})]})},Pa=()=>{const a=t.useMemo(()=>["Naturaleza","Cultura","Cascada","Mirador","Puente","Playa","Historia","Gastronom√≠a","Aventura","Religioso","Arquitectura"],[]),[s,r]=t.useState("all");return{categories:a,selectedCategory:s,setSelectedCategory:r,getCategoryColor:i=>{if(!i)return"bg-gray-500";const o=i.toLowerCase();return o.includes("naturaleza")||o.includes("nature")?"bg-green-600":o.includes("cultura")||o.includes("culture")?"bg-yellow-500":o.includes("cascada")||o.includes("waterfall")?"bg-sky-500":o.includes("historia")||o.includes("history")?"bg-purple-600":o.includes("puente")||o.includes("bridge")?"bg-red-600":o.includes("mirador")||o.includes("viewpoint")?"bg-rose-500":o.includes("ruta")||o.includes("trail")||o.includes("path")?"bg-emerald-500":o.includes("monta√±a")||o.includes("mountain")?"bg-indigo-700":o.includes("rio")||o.includes("r√≠o")||o.includes("river")?"bg-cyan-600":"bg-gray-400"}}},La=({count:a})=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:Array.from({length:a}).map((s,r)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card border border-white/20",children:[e.jsx(xe,{className:"w-full h-64"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(xe,{className:"h-6 w-3/4"}),e.jsx(xe,{className:"h-4 w-full"}),e.jsx(xe,{className:"h-4 w-2/3"}),e.jsx(xe,{className:"h-10 w-full"})]})]},r))}),Ia=({rating:a,onRatingChange:s,totalRatings:r=0,size:g="md",readonly:i=!1,showProgress:o=!0})=>{const[d,m]=t.useState(0),[x,j]=t.useState(!1),_={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},M=typeof a=="number"?a:0,C=x&&d>0?d:M;return e.jsxs("div",{className:"flex flex-col gap-2",onMouseEnter:()=>!i&&j(!0),onMouseLeave:()=>!i&&j(!1),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(v=>e.jsxs("button",{type:"button",onClick:()=>!i&&s?.(v),onMouseEnter:()=>!i&&m(v),disabled:i,className:`relative transition-all duration-200 ${i?"cursor-default":"cursor-pointer hover:scale-125"}`,children:[e.jsx(Re,{className:_[g],fill:"none",color:"#d1d5db"}),e.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:v<=C?"100%":"0%"},children:e.jsx(Re,{className:_[g],fill:"currentColor",color:v<=C?"#f59e0b":"#d1d5db"})}),!i&&v<=d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-300 rounded-full blur-[3px] opacity-70"})})]},v)),e.jsx("span",{className:K("text-sm font-medium ml-2",M>0?"text-amber-700":"text-muted-foreground"),children:M&&M>0?M.toFixed(1):"Sin calificaciones"})]}),o&&!i&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx(ke.div,{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",initial:{width:"0%"},animate:{width:`${C/5*100}%`},transition:{duration:.5,ease:"easeOut"}})}),e.jsxs(ke.div,{className:"absolute -top-6 text-xs font-bold text-amber-600",initial:{opacity:0,x:-10},animate:{opacity:x?1:0,x:x?0:-10},style:{left:`${C/5*100}%`},children:[C,"/5"]}),e.jsx("div",{className:"flex justify-between mt-1",children:[1,2,3,4,5].map(v=>e.jsx("div",{className:`w-1 h-1 rounded-full ${v<=C?"bg-amber-500":"bg-gray-300"}`},v))})]}),r>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[r," ",r===1?"calificaci√≥n":"calificaciones"]})]})},$a=({placeName:a,stats:s,variant:r="default",theme:g="default"})=>{if(!s)return null;const i={default:{primary:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md hover:from-blue-600 hover:to-indigo-700",secondary:"bg-secondary text-secondary-foreground"},nature:{primary:"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-md hover:from-green-600 hover:to-emerald-700",secondary:"bg-green-200 text-green-800 hover:bg-green-300"},waterfall:{primary:"bg-gradient-to-r from-blue-500 to-cyan-600 text-white shadow-md hover:from-blue-600 hover:to-cyan-700",secondary:"bg-blue-200 text-blue-800 hover:bg-blue-300"},cultural:{primary:"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-md hover:from-amber-600 hover:to-orange-700",secondary:"bg-amber-200 text-amber-800 hover:bg-amber-300"},history:{primary:"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-md hover:from-purple-600 hover:to-pink-700",secondary:"bg-purple-200 text-purple-800 hover:bg-purple-300"},bridge:{primary:"bg-gradient-to-r from-gray-700 to-gray-900 text-white shadow-md hover:from-gray-800 hover:to-black",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"},viewpoint:{primary:"bg-gradient-to-r from-yellow-500 to-red-600 text-white shadow-md hover:from-yellow-600 hover:to-red-700",secondary:"bg-yellow-200 text-yellow-800 hover:bg-yellow-300"},trail:{primary:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",secondary:"bg-teal-200 text-teal-800 hover:bg-teal-300"},montain:{primary:"bg-gradient-to-r from-gray-600 to-gray-800 text-white hover:from-gray-700 hover:to-black",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"},river:{primary:"bg-gradient-to-r from-blue-600 to-blue-800 text-white hover:from-blue-700 hover:to-black",secondary:"bg-blue-200 text-blue-800 hover:bg-blue-300"},path:{primary:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",secondary:"bg-teal-200 text-teal-800 hover:bg-teal-300"}},o=i[g]||i.default,d=o[r||"default"]||o.primary;return e.jsxs(Se,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(G,{variant:r==="primary"?"default":"outline",size:"sm",className:K("mt-2 transition-all duration-300 transform hover:scale-105",d),children:[e.jsx(aa,{className:"w-4 h-4 mr-2"}),"Ver estad√≠sticas"]})}),e.jsxs(Me,{className:"sm:max-w-md bg-white/30 backdrop-blur-sm border border-white/20 p-2 text-gray-900 dark:text-gray-100 dark:bg-black/30 dark:border-gray-700 shadow-lg rounded-md",children:[e.jsx(Ee,{children:e.jsxs(De,{className:K("text-lg font-bold",{"text-primary-foreground":r==="primary","text-secondary-foreground":r==="secondary"}),children:["Estad√≠sticas de calificaciones - ",a]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:K("text-center p-4 rounded-lg",{"bg-primary/20":r==="default","bg-primary/30":r==="primary","bg-secondary/30":r==="secondary"}),children:[e.jsx("p",{className:"text-2xl font-bold",children:s.promedio!==null&&s.promedio!==void 0?Number(s.promedio).toFixed(1):"0.0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Promedio"})]}),e.jsxs("div",{className:K("text-center p-4 rounded-lg",{"bg-primary/20":r==="default","bg-primary/30":r==="primary","bg-secondary/30":r==="secondary"}),children:[e.jsx("p",{className:"text-2xl font-bold",children:s.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total calificaciones"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Distribuci√≥n de calificaciones:"}),s.distribucion.map(m=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-16 text-sm text-muted-foreground",children:[m.calificacion," estrella",m.calificacion!==1?"s":""]}),e.jsx("div",{className:"flex-1 bg-secondary rounded-full h-3",children:e.jsx("div",{className:K("rounded-full h-3",{"bg-primary":r==="default","bg-primary-foreground":r==="primary","bg-secondary-foreground":r==="secondary"}),style:{width:`${s.total>0?m.cantidad/s.total*100:0}%`}})}),e.jsxs("div",{className:"w-12 text-sm font-medium text-right",children:[m.cantidad," (",m.porcentaje,"%)"]})]},m.calificacion))]})]})]})]})},za=({theme:a})=>{const s={default:{bg:"bg-gradient-to-r from-blue-100/80 via-indigo-100/80 to-purple-100/80",border:"border-blue-200/30"},nature:{bg:"bg-gradient-to-r from-green-100/80 via-emerald-100/80 to-teal-100/80",border:"border-green-200/30"},waterfall:{bg:"bg-gradient-to-r from-blue-100/80 via-cyan-100/80 to-sky-100/80",border:"border-blue-200/30"},cultural:{bg:"bg-gradient-to-r from-amber-100/80 via-orange-100/80 to-red-100/80",border:"border-amber-200/30"},history:{bg:"bg-gradient-to-r from-purple-100/80 via-pink-100/80 to-red-100/80",border:"border-purple-200/30"},bridge:{bg:"bg-gradient-to-r from-gray-100/80 via-gray-200/80 to-gray-300/80",border:"border-gray-200/30"},viewpoint:{bg:"bg-gradient-to-r from-yellow-100/80 via-orange-100/80 to-red-100/80",border:"border-yellow-200/30"},trail:{bg:"bg-gradient-to-r from-teal-100/80 via-cyan-100/80 to-sky-100/80",border:"border-teal-200/30"},montain:{bg:"bg-gradient-to-r from-gray-100/80 via-gray-200/80 to-gray-300/80",border:"border-gray-200/30"},river:{bg:"bg-gradient-to-r from-blue-100/80 via-blue-200/80 to-blue-300/80",border:"border-blue-200/30"},path:{bg:"bg-gradient-to-r from-teal-100/80 via-cyan-100/80 to-sky-100/80",border:"border-teal-200/30"}},r=s[a]||s.default;return e.jsx(ke.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-10",children:e.jsx("div",{className:`${r.bg} backdrop-blur-sm shadow-lg hover:shadow-2xl border ${r.border} transition-all duration-500 overflow-hidden rounded-2xl p-6`,children:e.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-3",children:[e.jsx(ta,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-bold",children:"¬°Tu opini√≥n es importante!"})]}),e.jsx("p",{className:"mb-3",children:"Califica los lugares que has visitado. No necesitas crear una cuenta, solo aceptar nuestros t√©rminos de privacidad."}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:"#SinRegistro"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"#Privacidad"}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:"#Comunidad"})]})]})})})})},Ga={address:"Base de Transporte Zacapoaxtla, Puebla",lat:19.8758703351958,lng:-97.5889138590976},Fa=()=>{const{places:a,loading:s,ratePlace:r,getUserRating:g,getRatingStats:i,isRating:o,getUserCurrentRating:d,hasUserRated:m,getPlaceGallery:x,getPlacePdfUrl:j,getPlaceLocation:_}=Fe(),{getCategoryColor:M}=Pa(),{toast:C}=_e(),[v,N]=t.useState({}),[R,E]=t.useState({}),[A,q]=t.useState({}),[,h]=t.useState({}),[O,W]=t.useState({}),[w,b]=t.useState({isOpen:!1,placeId:"",initialIndex:0}),[c,u]=t.useState("default"),[y,S]=t.useState(!1),[I,$]=t.useState(null);t.useEffect(()=>{if(a.length>0){const n=a.map(l=>l.categoria?.toLowerCase());n.some(l=>l?.includes("naturaleza")||l?.includes("nature"))?u("nature"):n.some(l=>l?.includes("cascada")||l?.includes("waterfall"))?u("waterfall"):n.some(l=>l?.includes("cultura")||l?.includes("cultural"))?u("cultural"):n.some(l=>l?.includes("historia")||l?.includes("history"))?u("history"):n.some(l=>l?.includes("puente")||l?.includes("bridge"))?u("bridge"):n.some(l=>l?.includes("mirador")||l?.includes("viewpoint"))?u("viewpoint"):n.some(l=>l?.includes("sendero")||l?.includes("trail"))?u("trail"):n.some(l=>l?.includes("ruta")||l?.includes("path"))?u("path"):n.some(l=>l?.includes("monta√±a")||l?.includes("montain"))?u("montain"):n.some(l=>l?.includes("r√≠o")||l?.includes("river"))?u("river"):u("default")}},[a]),t.useEffect(()=>{a.length>0&&(async()=>{const l={};for(const f of a)try{const k=await g(f.id);k&&(l[f.id]=k.calificacion)}catch(k){console.error(`Error loading rating for place ${f.id}:`,k)}N(l)})()},[a,g]),t.useEffect(()=>{a.length>0&&(async()=>{const l={},f={};for(const k of a){f[k.id]=!0,q(U=>({...U,[k.id]:!0}));try{const U=await i(k.id);console.log(`üìç Stats for ${k.nombre}:`,U),U&&(l[k.id]=U)}catch(U){console.error(`Error loading stats for place ${k.id}:`,U)}finally{f[k.id]=!1,q(U=>({...U,[k.id]:!1}))}}E(l),console.log("üìä All rating stats loaded:",l)})()},[a,i]);const B=n=>{const l=j(n);if(!l){C({title:"‚ÑπÔ∏è Informaci√≥n",description:"Este lugar no tiene una gu√≠a PDF disponible",variant:"default"});return}window.open(l,"_blank","noopener,noreferrer")},X=t.useCallback(async n=>{try{h(f=>({...f,[n]:!0})),console.log("üîÑ [Places] Cargando galer√≠a para:",n);const l=await x(n);return console.log("‚úÖ [Places] Galer√≠a cargada:",l.length,"im√°genes"),W(f=>({...f,[n]:l})),l}catch(l){console.error("‚ùå [Places] Error cargando galer√≠a:",l);const f=a.find(k=>k.id===n);if(f){const k=[{id:"main",url_foto:f.foto_principal_url||"/placeholder.svg",descripcion:f.descripcion||f.nombre,es_principal:!0,orden:1,creado_en:new Date().toISOString()}];return W(U=>({...U,[n]:k})),k}return[]}finally{h(l=>({...l,[n]:!1}))}},[x,a]),V=async n=>{try{console.log("üîÑ [Places] Abriendo galer√≠a desde imagen para:",n),O[n]||await X(n),b({isOpen:!0,placeId:n,initialIndex:0}),console.log("üéâ [Places] Galer√≠a abierta para placeId:",n)}catch(l){console.error("‚ùå [Places] Error abriendo galer√≠a desde imagen:",l),C({title:"Error",description:"No se pudo cargar la galer√≠a de im√°genes",variant:"destructive"})}},F=n=>{V(n)},Z=n=>{console.error("‚ùå Error cargando imagen:",n)},T=async(n,l)=>{try{const f=a.find(H=>H.id===n);if(!f)return;const U=v[n]!==void 0;await r(n,l)&&(N(H=>({...H,[n]:l})),C({title:U?"‚≠ê Calificaci√≥n actualizada":"üéâ ¬°Gracias por tu calificaci√≥n!",description:U?`Tu calificaci√≥n para "${f.nombre}" ha sido actualizada a ${l} estrellas`:`Has calificado "${f.nombre}" con ${l} estrellas`}),setTimeout(async()=>{try{const H=await i(n);H&&E(p=>({...p,[n]:H}))}catch(H){console.error("Error reloading stats:",H)}},1e3))}catch(f){if(f instanceof Error&&f.message==="TERMS_REQUIRED"){const k=a.find(U=>U.id===n);k&&($({placeId:n,placeName:k.nombre,rating:l}),S(!0))}}},Y=async()=>{if(I){const{placeId:n,rating:l}=I;try{await r(n,l)&&(N(k=>({...k,[n]:l})),C({title:"üéâ ¬°Gracias por tu calificaci√≥n!",description:`Has calificado "${I.placeName}" con ${l} estrellas`}),setTimeout(async()=>{try{const k=await i(n);k&&E(U=>({...U,[n]:k}))}catch(k){console.error("Error reloading stats:",k)}},1e3))}catch{}$(null),S(!1)}},J=n=>{if(!n)return[];const l=[],f=n.toLowerCase();return(f.includes("senderismo")||f.includes("hiking"))&&l.push("Senderismo"),(f.includes("nataci√≥n")||f.includes("swimming"))&&l.push("Nataci√≥n"),(f.includes("fotograf√≠a")||f.includes("photo"))&&l.push("Fotograf√≠a"),(f.includes("gastronom√≠a")||f.includes("food"))&&l.push("Gastronom√≠a"),(f.includes("artesan√≠as")||f.includes("crafts"))&&l.push("Artesan√≠as"),(f.includes("m√∫sica")||f.includes("music"))&&l.push("M√∫sica"),(f.includes("deportes")||f.includes("sports"))&&l.push("Deportes acu√°ticos"),(f.includes("atardecer")||f.includes("sunset"))&&l.push("Atardecer"),(f.includes("relax")||f.includes("peaceful"))&&l.push("Relax"),l.length>0?l:["Turismo"]},P=n=>!n||n===0?"0.0":Number(n).toFixed(1);return s?e.jsxs("section",{id:"places",className:"py-20 relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url(https://res.cloudinary.com/dinsl266g/image/upload/v1763074398/fondo-galeria_urye7x.svg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(4px) brightness(0.9)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] z-0"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-100 to-indigo-100 px-4 py-2 rounded-full mb-6",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:"Destinos √önicos"})]}),e.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold text-white mb-6",children:["Lugares"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-300 via-indigo-300 to-purple-300 bg-clip-text text-transparent",children:"Destacados"})]}),e.jsx("p",{className:"text-xl text-gray-200 max-w-4xl mx-auto leading-relaxed",children:"Descubre los rincones m√°s fascinantes de San Juan Tahitic, cada uno con su propia magia y experiencias √∫nicas."})]}),e.jsx(La,{count:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("section",{id:"places",className:"py-20 relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url(https://res.cloudinary.com/dinsl266g/image/upload/v1763074398/fondo-galeria_urye7x.svg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(4px) brightness(0.9)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] z-0"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-20",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-100 to-indigo-100 px-4 py-2 rounded-full mb-6",children:[e.jsx(ne,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:"Destinos √önicos"})]}),e.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold text-white mb-6",children:["Lugares"," ",e.jsx("span",{className:"bg-gradient-to-r from-blue-300 via-indigo-300 to-purple-300 bg-clip-text text-transparent",children:"Destacados"})]}),e.jsx("p",{className:"text-xl text-gray-200 max-w-4xl mx-auto leading-relaxed",children:"Descubre los rincones m√°s fascinantes de San Juan Tahitic, cada uno con su propia magia y experiencias √∫nicas."})]}),e.jsx(za,{theme:c}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:a.map(n=>{const l=J(n.descripcion),f=v[n.id]||n.puntuacion_promedio||0,k=o[n.id]||!1,U=n.foto_principal_url||"/placeholder.svg",oe=m(n.id),H=d(n.id),p=_(n);return e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card hover:shadow-xl transition-shadow group border border-white/30",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:U,alt:n.nombre,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer",loading:"lazy",onClick:()=>F(n.id),onError:()=>Z(U)}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx(ee,{className:K(M(n.categoria),"text-white"),children:n.categoria||"Turismo"})}),p.hasCoordinates&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500/90 backdrop-blur-sm rounded-lg px-2 py-1 text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(Jt,{className:"w-3 h-3"}),"GPS"]}),e.jsx("div",{className:"absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg px-2 py-1 text-white text-sm font-medium",children:"Gratuito"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-800 group-hover:text-blue-600 transition-colors",children:n.nombre})}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed line-clamp-3",children:n.descripcion||"Un hermoso lugar para visitar en San Juan Tahitic."}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{rating:f,onRatingChange:z=>T(n.id,z),totalRatings:n.total_calificaciones||0,size:"sm",readonly:k}),n.puntuacion_promedio!==null&&n.puntuacion_promedio!==void 0&&n.puntuacion_promedio>0&&e.jsxs("div",{className:"flex items-center ml-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-1 px-3 rounded-full shadow-lg",children:[e.jsx(Re,{className:"w-3 h-3 mr-1 fill-white"}),e.jsx("span",{className:"text-sm",children:P(n.puntuacion_promedio)})]})]}),k&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Ce,{className:"w-3 h-3 mr-1 animate-spin"}),"Calificando..."]})]}),oe&&H&&e.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["‚úÖ Ya calificaste con ",H," estrellas"]}),!oe&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Califica este lugar (aceptar√°s t√©rminos de privacidad)"}),R[n.id]&&R[n.id].total>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx($a,{placeName:n.nombre,stats:R[n.id],variant:c==="default"?"default":"primary",theme:c}),A[n.id]&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(Ce,{className:"w-3 h-3 mr-1 animate-spin"}),"Cargando estad√≠sticas..."]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),n.ubicacion||"San Juan Tahitic"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"2-4 horas"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Todos los niveles"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:l.map((z,Q)=>e.jsx(ee,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:z},Q))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(Ta,{origin:Ga,destination:p,buttonText:"C√≥mo Llegar",className:K("w-full shadow-md hover:shadow-lg transition-all duration-300",c==="default"&&"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700",c==="nature"&&"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700",c==="waterfall"&&"bg-gradient-to-r from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700",c==="cultural"&&"bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:from-amber-600 hover:to-orange-700",c==="history"&&"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",c==="bridge"&&"bg-gradient-to-r from-gray-700 to-gray-900 text-white hover:from-gray-800 hover:to-black",c==="viewpoint"&&"bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700",c==="trail"&&"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",c==="montain"&&"bg-gradient-to-r from-gray-600 to-gray-800 text-white hover:from-gray-700 hover:to-black",c==="river"&&"bg-gradient-to-r from-blue-600 to-blue-800 text-white hover:from-blue-700 hover:to-black",c==="path"&&"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700")}),n.pdf_url&&e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>B(n),className:K("w-full border-2 transition-all duration-300 hover:scale-105",c==="default"&&"border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",c==="nature"&&"border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400",c==="waterfall"&&"border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",c==="cultural"&&"border-amber-300 text-amber-700 hover:bg-amber-50 hover:border-amber-400",c==="history"&&"border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",c==="bridge"&&"border-gray-400 text-gray-700 hover:bg-gray-50 hover:border-gray-500",c==="viewpoint"&&"border-yellow-300 text-yellow-700 hover:bg-yellow-50 hover:border-yellow-400",c==="trail"&&"border-teal-300 text-teal-700 hover:bg-teal-50 hover:border-teal-400",c==="montain"&&"border-gray-400 text-gray-700 hover:bg-gray-50 hover:border-gray-500",c==="river"&&"border-blue-400 text-blue-700 hover:bg-blue-50 hover:border-blue-500",c==="path"&&"border-teal-300 text-teal-700 hover:bg-teal-50 hover:border-teal-400"),children:[e.jsx(ea,{className:"w-4 h-4 mr-2"}),"Ver Gu√≠a PDF"]})]})]})]},n.id)})}),a.length>6&&e.jsx("div",{className:"text-center mt-12",children:e.jsx(G,{size:"lg",variant:"outline",className:"px-8 border-white/30 text-white hover:bg-white/10 hover:text-white",children:"Ver Todos los Lugares"})})]})]}),e.jsx(Lt,{isOpen:y,onClose:()=>{S(!1),$(null)},onAccept:Y,placeName:I?.placeName||""}),e.jsx(ra,{placeId:w.placeId,initialIndex:w.initialIndex,isOpen:w.isOpen,onClose:()=>b(n=>({...n,isOpen:!1})),title:"Galer√≠a del lugar"})]})};export{Fa as P,Pa as u};
