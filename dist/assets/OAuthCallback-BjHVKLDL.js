import{r as l,j as r}from"./animations-muhxMtO2.js";import{h as d,i as u,j as m}from"./index-SFMBmmo4.js";import"./vendor-CSbuTdnm.js";import"./charts-x2pUV8ZK.js";import"./ui-4Jv8TcDS.js";import"./utils-BJeS7sC5.js";const k=()=>{const[n]=d(),e=u(),{getPreLoginPath:s}=m(),o=n.get("token"),t=n.get("error");l.useEffect(()=>{(async()=>{if(t){console.error("‚ùå Error de OAuth:",t),e("/login",{replace:!0,state:{error:i(t)}});return}if(o)try{const a=s()||"/admin/places";console.log("‚úÖ Token recibido, guardando..."),console.log("üìç OAuthCallback - Redirigiendo a:",a),localStorage.setItem("admin_token",o),setTimeout(()=>{e(a,{replace:!0})},1e3)}catch(a){console.error("‚ùå Error procesando OAuth callback:",a),e("/login",{replace:!0,state:{error:"Error procesando autenticaci√≥n"}})}else console.error("‚ùå Token no recibido"),e("/login",{replace:!0,state:{error:"Token de autenticaci√≥n no recibido"}})})()},[o,t,e,s]);const i=c=>{switch(c){case"unauthorized":return"No est√°s autorizado para acceder al panel administrativo";case"server_error":return"Error del servidor durante la autenticaci√≥n";default:return"Error durante la autenticaci√≥n"}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Autenticaci√≥n exitosa"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Redirigiendo al panel de administraci√≥n..."})]})})};export{k as OAuthCallback};
