import{r as a,j as e,m as Ce}from"./animations-w5RCdeks.js";import{B as O,d as Z,k as ee,m as Fe,R as St,I as Mt,b as Se,S as Et,n as Dt,u as ye}from"./index-BFbEBVg7.js";import{u as He,L as de,D as Me,a as Ee,b as De,c as Pe,A as Pt,e as Tt,g as It,f as Ye,T as Lt,S as xe}from"./skeleton-DX-Fshdp.js";import{bn as Re,X as Te,bi as $t,bh as we,aI as zt,aE as At,au as Gt,y as Ot,I as Xe,bR as be,bS as Ut,M as le,ab as Bt,bM as Vt,bO as qt,bA as ue,bT as Ie,aF as Le,k as Ft,l as Ze,e as $e,h as me,j as fe,i as je,n as Ht,bU as Ke,bV as We,B as Yt,aP as ve,bW as pe,aG as Qe,bj as Xt,bX as Zt,aW as Kt,S as Wt,bF as Qt,by as Jt,a3 as _e,U as ea,bP as ta,bY as aa,bQ as ra}from"./ui-vuw2n6JC.js";const Oe=50,Ue=100,sa=({placeId:t,initialIndex:r=0,isOpen:s,onClose:u,title:c="Galer√≠a de im√°genes"})=>{const[o,d]=a.useState(r),[g,m]=a.useState(1),[N,C]=a.useState(0),[D,R]=a.useState(!1),[w,v]=a.useState({x:0,y:0}),[k,S]=a.useState({x:0,y:0}),[L,q]=a.useState(!0),[h,G]=a.useState([]),[W,y]=a.useState(!1),[p,j]=a.useState(null),i=a.useRef({x:0,y:0,time:0}),f=a.useRef({x:0,y:0,time:0}),_=a.useRef(null),{getPlaceGallery:$}=He(),z=h[o],B=h.length>1;a.useEffect(()=>{(async()=>{if(!(!s||!t))try{y(!0),j(null);const A=await $(t);G(A||[]),r>=(A?.length||0)?d(0):d(r)}catch{j("Error al cargar la galer√≠a de im√°genes"),G([])}finally{y(!1)}})()},[s,t,$,r]),a.useEffect(()=>{if(s&&h.length>0){m(1),C(0),S({x:0,y:0}),q(!0);const x=setTimeout(()=>{q(!1)},3e3);return()=>clearTimeout(x)}},[s,o,h.length]),a.useEffect(()=>{if(h.length>0){q(!0);const x=setTimeout(()=>{q(!1)},2e3);return()=>clearTimeout(x)}},[o,h.length]);const Y=a.useCallback(()=>{m(1),C(0),S({x:0,y:0})},[]),V=a.useCallback(()=>{B&&(d(x=>x===0?h.length-1:x-1),Y())},[B,Y,h.length]),F=a.useCallback(()=>{B&&(d(x=>x===h.length-1?0:x+1),Y())},[B,Y,h.length]),X=a.useCallback(()=>{m(x=>Math.min(x+.25,3))},[]),P=a.useCallback(()=>{m(x=>Math.max(x-.25,1))},[]),H=a.useCallback(()=>{C(x=>(x+90)%360)},[]);a.useEffect(()=>{const x=A=>{if(!(!s||h.length===0))switch(A.key){case"Escape":u();break;case"ArrowLeft":V();break;case"ArrowRight":F();break;case"+":case"=":X();break;case"-":P();break;case"r":case"R":H();break;case"0":Y();break;case" ":q(K=>!K);break}};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[s,h.length,u,V,F,X,P,H,Y]);const Q=a.useCallback(x=>{if(g>1)return;const A=x.touches[0];i.current={x:A.clientX,y:A.clientY,time:Date.now()}},[g]),T=a.useCallback(x=>{if(g>1)return;const A=x.touches[0];f.current={x:A.clientX,y:A.clientY,time:Date.now()}},[g]),se=a.useCallback(()=>{if(g>1)return;const{x,y:A}=i.current,{x:K,y:J}=f.current,oe=K-x,ie=J-A;if(f.current.time-i.current.time>300)return;const ne=Math.abs(oe),ge=Math.abs(ie);ne>ge&&ne>Oe?oe>0?V():F():ie>Ue&&ge>ne&&u()},[g,V,F,u]),n=a.useCallback(x=>{g<=1?(i.current={x:x.clientX,y:x.clientY,time:Date.now()},R(!0)):(R(!0),v({x:x.clientX-k.x,y:x.clientY-k.y}))},[g,k.x,k.y]),l=a.useCallback(x=>{if(D)if(g<=1)f.current={x:x.clientX,y:x.clientY,time:Date.now()};else{const A=x.clientX-w.x,K=x.clientY-w.y,J=(g-1)*100;S({x:Math.max(Math.min(A,J),-J),y:Math.max(Math.min(K,J),-J)})}},[D,g,w.x,w.y]),b=a.useCallback(()=>{if(D){if(g<=1){const{x,y:A}=i.current,{x:K,y:J}=f.current,oe=K-x,ie=J-A,ce=Math.abs(oe),ne=Math.abs(ie);ce>ne&&ce>Oe?oe>0?V():F():ie>Ue&&ne>ce&&u()}R(!1)}},[D,g,V,F,u]),M=a.useCallback(()=>{if(!z)return;const x=document.createElement("a");x.href=z.url_foto,x.download=`imagen-${o+1}.jpg`,document.body.appendChild(x),x.click(),document.body.removeChild(x)},[z,o]),U=a.useCallback(()=>{q(x=>!x)},[]),re=a.useCallback(x=>{x.target===x.currentTarget&&u()},[u]);return s?W?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx(Re,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Cargando galer√≠a..."})]})}):p?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:u,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"‚ùå Error"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:p}),e.jsx(O,{onClick:u,className:"bg-red-600 hover:bg-red-700",children:"Cerrar"})]})}):!z||h.length===0?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:u,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"üì∑"}),e.jsx("p",{className:"text-sm text-gray-300",children:"No hay im√°genes en la galer√≠a"}),e.jsx(O,{onClick:u,className:"mt-4 bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})}):e.jsxs("div",{ref:_,className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 touch-none",onClick:re,children:[L&&e.jsx("button",{onClick:u,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-40 bg-black/50 rounded-full p-2 backdrop-blur-sm",children:e.jsx(Te,{className:"w-8 h-8"})}),L&&e.jsxs("div",{className:"absolute top-4 left-4 z-40 flex items-center gap-2 bg-black/50 rounded-lg p-3 backdrop-blur-sm",children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:M,className:"text-white hover:bg-white/20",title:"Descargar imagen",children:e.jsx($t,{className:"w-4 h-4"})}),e.jsx(O,{variant:"ghost",size:"icon",onClick:H,className:"text-white hover:bg-white/20",title:"Rotar imagen (R)",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx(O,{variant:"ghost",size:"icon",onClick:P,disabled:g<=1,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Zoom out (-)",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx(O,{variant:"ghost",size:"icon",onClick:X,disabled:g>=3,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Zoom in (+)",children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx(O,{variant:"ghost",size:"icon",onClick:Y,disabled:g===1&&N===0,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Reset transformaci√≥n (0)",children:e.jsx("span",{className:"text-sm",children:"‚ü≤"})})]}),B&&L&&e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"ghost",size:"icon",onClick:V,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-40 text-white hover:bg-white/20 bg-black/50 backdrop-blur-sm",title:"Imagen anterior (‚Üê)",children:e.jsx(Gt,{className:"w-8 h-8"})}),e.jsx(O,{variant:"ghost",size:"icon",onClick:F,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-40 text-white hover:bg-white/20 bg-black/50 backdrop-blur-sm",title:"Siguiente imagen (‚Üí)",children:e.jsx(Ot,{className:"w-8 h-8"})})]}),e.jsx("div",{className:"relative max-w-full max-h-full flex items-center justify-center",onDoubleClick:U,onTouchStart:Q,onTouchMove:T,onTouchEnd:se,onMouseDown:n,onMouseMove:l,onMouseUp:b,onMouseLeave:b,children:e.jsx("div",{className:Z("relative transition-transform duration-200",D&&g<=1?"cursor-grabbing":g>1?"cursor-grab":"cursor-default"),style:{transform:`scale(${g}) rotate(${N}deg) translate(${k.x}px, ${k.y}px)`,transformOrigin:"center center"},children:e.jsx("img",{src:z.url_foto,alt:z.descripcion,className:"max-w-screen max-h-screen object-contain rounded-lg shadow-lg select-none",draggable:!1})})}),L&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-40 max-w-2xl w-full px-4",children:e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm text-white p-4 rounded-lg text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c}),B&&e.jsxs("span",{className:"text-sm text-gray-300 bg-black/50 px-2 py-1 rounded",children:[o+1," / ",h.length]})]}),z.descripcion&&e.jsx("p",{className:"text-sm leading-relaxed",children:z.descripcion}),(g!==1||N!==0)&&e.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs text-gray-300",children:[g>1&&e.jsxs("span",{children:["Zoom: ",g.toFixed(1),"x"]}),N!==0&&e.jsxs("span",{children:["Rotaci√≥n: ",N,"¬∞"]})]})]})}),!L&&B&&e.jsx("div",{className:"absolute bottom-4 right-4 z-40 bg-black/70 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm",children:e.jsxs("span",{children:[o+1," / ",h.length]})}),!L&&B&&e.jsx("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-40 bg-black/70 text-white px-4 py-2 rounded-lg text-sm backdrop-blur-sm text-center",children:e.jsx("p",{children:"‚Üê Desliza ‚Üí para navegar ‚Ä¢ ‚Üì Desliza abajo para cerrar"})}),L&&e.jsxs("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-40 bg-black/70 text-white px-4 py-2 rounded-lg text-sm backdrop-blur-sm text-center",children:[e.jsx("p",{children:"Doble clic para controles ‚Ä¢ Espacio para mostrar/ocultar ‚Ä¢ ESC para salir"}),e.jsx("p",{className:"text-xs mt-1",children:"‚Üê ‚Üí para navegar ‚Ä¢ Click fuera para cerrar"})]})]}):null},na=t=>{switch(t){case"satellite":return e.jsx(qt,{className:"h-4 w-4"});case"hybrid":return e.jsx(Vt,{className:"h-4 w-4"});case"terrain":return e.jsx(Bt,{className:"h-4 w-4"});default:return e.jsx(le,{className:"h-4 w-4"})}},Be=t=>{switch(t){case"roadmap":return"Mapa";case"satellite":return"Sat√©lite";case"hybrid":return"H√≠brido";case"terrain":return"Relieve";default:return"Mapa"}},la=t=>{switch(t){case"DRIVING":return e.jsx(ue,{className:"h-4 w-4"});case"WALKING":return e.jsx(Le,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Ie,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},oa=t=>{switch(t){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},ia=t=>{switch(t){case"via_transport_1":return"v√≠a terminal principal";case"via_transport_2":return"v√≠a terminal secundaria";case"current_to_direct":return"desde tu ubicaci√≥n";case"current_to_transport":return"desde tu ubicaci√≥n v√≠a terminal";default:return"v√≠a terminal"}},ca=({currentMapType:t,onMapTypeChange:r,isLoading:s,onCalculateRoute:u,routeInfo:c,travelMode:o,routeType:d,onToggleSidebar:g})=>{const m=N=>t===N?"default":"outline";return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[g&&e.jsx(O,{variant:"outline",size:"sm",onClick:g,className:"lg:hidden gap-2 border-green-200 text-green-700 hover:bg-green-100",children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["roadmap","satellite","hybrid","terrain"].map(N=>e.jsxs(O,{variant:m(N),size:"sm",onClick:()=>r(N),className:"gap-2 border-green-200 text-green-700 hover:bg-green-100",children:[na(N),e.jsx("span",{className:"hidden sm:inline",children:Be(N)})]},N))})]}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsx(ee,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200 hidden sm:flex",children:Be(t)}),c&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm text-green-700",children:[e.jsx(be,{className:"h-4 w-4"}),e.jsxs("span",{className:"hidden lg:inline",children:[ia(d)," ‚Ä¢ ",c.distance," ‚Ä¢ ",c.duration]}),e.jsxs(ee,{variant:"outline",className:"text-xs",children:[la(o),e.jsx("span",{className:"hidden xs:inline",children:oa(o)})]})]}),e.jsxs(O,{onClick:u,disabled:s,size:"sm",className:"gap-2 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Ut,{className:`h-4 w-4 ${s?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:s?"Calculando...":"Calcular"})]})]})]})};var ze="Radio",[da,Je]=$e(ze),[ua,ma]=da(ze),et=a.forwardRef((t,r)=>{const{__scopeRadio:s,name:u,checked:c=!1,required:o,disabled:d,value:g="on",onCheck:m,form:N,...C}=t,[D,R]=a.useState(null),w=fe(r,S=>R(S)),v=a.useRef(!1),k=D?N||!!D.closest("form"):!0;return e.jsxs(ua,{scope:s,checked:c,disabled:d,children:[e.jsx(me.button,{type:"button",role:"radio","aria-checked":c,"data-state":st(c),"data-disabled":d?"":void 0,disabled:d,value:g,...C,ref:w,onClick:je(t.onClick,S=>{c||m?.(),k&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),k&&e.jsx(rt,{control:D,bubbles:!v.current,name:u,value:g,checked:c,required:o,disabled:d,form:N,style:{transform:"translateX(-100%)"}})]})});et.displayName=ze;var tt="RadioIndicator",at=a.forwardRef((t,r)=>{const{__scopeRadio:s,forceMount:u,...c}=t,o=ma(tt,s);return e.jsx(Ht,{present:u||o.checked,children:e.jsx(me.span,{"data-state":st(o.checked),"data-disabled":o.disabled?"":void 0,...c,ref:r})})});at.displayName=tt;var ga="RadioBubbleInput",rt=a.forwardRef(({__scopeRadio:t,control:r,checked:s,bubbles:u=!0,...c},o)=>{const d=a.useRef(null),g=fe(d,o),m=Ke(s),N=We(r);return a.useEffect(()=>{const C=d.current;if(!C)return;const D=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(D,"checked").set;if(m!==s&&w){const v=new Event("click",{bubbles:u});w.call(C,s),C.dispatchEvent(v)}},[m,s,u]),e.jsx(me.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:g,style:{...c.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rt.displayName=ga;function st(t){return t?"checked":"unchecked"}var xa=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ne="RadioGroup",[ha]=$e(Ne,[Fe,Je]),nt=Fe(),lt=Je(),[pa,ba]=ha(Ne),ot=a.forwardRef((t,r)=>{const{__scopeRadioGroup:s,name:u,defaultValue:c,value:o,required:d=!1,disabled:g=!1,orientation:m,dir:N,loop:C=!0,onValueChange:D,...R}=t,w=nt(s),v=Ft(N),[k,S]=Ze({prop:o,defaultProp:c??null,onChange:D,caller:Ne});return e.jsx(pa,{scope:s,name:u,required:d,disabled:g,value:k,onValueChange:S,children:e.jsx(St,{asChild:!0,...w,orientation:m,dir:v,loop:C,children:e.jsx(me.div,{role:"radiogroup","aria-required":d,"aria-orientation":m,"data-disabled":g?"":void 0,dir:v,...R,ref:r})})})});ot.displayName=Ne;var it="RadioGroupItem",ct=a.forwardRef((t,r)=>{const{__scopeRadioGroup:s,disabled:u,...c}=t,o=ba(it,s),d=o.disabled||u,g=nt(s),m=lt(s),N=a.useRef(null),C=fe(r,N),D=o.value===c.value,R=a.useRef(!1);return a.useEffect(()=>{const w=k=>{xa.includes(k.key)&&(R.current=!0)},v=()=>R.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",v)}},[]),e.jsx(Mt,{asChild:!0,...g,focusable:!d,active:D,children:e.jsx(et,{disabled:d,required:o.required,checked:D,...m,...c,name:o.name,ref:C,onCheck:()=>o.onValueChange(c.value),onKeyDown:je(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:je(c.onFocus,()=>{R.current&&N.current?.click()})})})});ct.displayName=it;var fa="RadioGroupIndicator",dt=a.forwardRef((t,r)=>{const{__scopeRadioGroup:s,...u}=t,c=lt(s);return e.jsx(at,{...c,...u,ref:r})});dt.displayName=fa;var ut=ot,mt=ct,va=dt;const gt=a.forwardRef(({className:t,...r},s)=>e.jsx(ut,{className:Z("grid gap-2",t),...r,ref:s}));gt.displayName=ut.displayName;const xt=a.forwardRef(({className:t,...r},s)=>e.jsx(mt,{ref:s,className:Z("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(va,{className:"flex items-center justify-center",children:e.jsx(Yt,{className:"h-2.5 w-2.5 fill-current text-current"})})}));xt.displayName=mt.displayName;var ke="Switch",[wa]=$e(ke),[ja,ya]=wa(ke),ht=a.forwardRef((t,r)=>{const{__scopeSwitch:s,name:u,checked:c,defaultChecked:o,required:d,disabled:g,value:m="on",onCheckedChange:N,form:C,...D}=t,[R,w]=a.useState(null),v=fe(r,h=>w(h)),k=a.useRef(!1),S=R?C||!!R.closest("form"):!0,[L,q]=Ze({prop:c,defaultProp:o??!1,onChange:N,caller:ke});return e.jsxs(ja,{scope:s,checked:L,disabled:g,children:[e.jsx(me.button,{type:"button",role:"switch","aria-checked":L,"aria-required":d,"data-state":vt(L),"data-disabled":g?"":void 0,disabled:g,value:m,...D,ref:v,onClick:je(t.onClick,h=>{q(G=>!G),S&&(k.current=h.isPropagationStopped(),k.current||h.stopPropagation())})}),S&&e.jsx(ft,{control:R,bubbles:!k.current,name:u,value:m,checked:L,required:d,disabled:g,form:C,style:{transform:"translateX(-100%)"}})]})});ht.displayName=ke;var pt="SwitchThumb",bt=a.forwardRef((t,r)=>{const{__scopeSwitch:s,...u}=t,c=ya(pt,s);return e.jsx(me.span,{"data-state":vt(c.checked),"data-disabled":c.disabled?"":void 0,...u,ref:r})});bt.displayName=pt;var Na="SwitchBubbleInput",ft=a.forwardRef(({__scopeSwitch:t,control:r,checked:s,bubbles:u=!0,...c},o)=>{const d=a.useRef(null),g=fe(d,o),m=Ke(s),N=We(r);return a.useEffect(()=>{const C=d.current;if(!C)return;const D=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(D,"checked").set;if(m!==s&&w){const v=new Event("click",{bubbles:u});w.call(C,s),C.dispatchEvent(v)}},[m,s,u]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:g,style:{...c.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ft.displayName=Na;function vt(t){return t?"checked":"unchecked"}var wt=ht,ka=bt;const jt=a.forwardRef(({className:t,...r},s)=>e.jsx(wt,{className:Z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:e.jsx(ka,{className:Z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jt.displayName=wt.displayName;const Ca=t=>{switch(t){case"DRIVING":return e.jsx(ue,{className:"h-4 w-4"});case"WALKING":return e.jsx(Le,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Ie,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},Ve=t=>{switch(t){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},qe=({routeType:t,travelMode:r,routeInfo:s,routeSegments:u,activeSegment:c,showRoute:o,userLocation:d,hasLocationPermission:g,origin:m,destination:N,transportBase:C,transportBase2:D,onRouteTypeChange:R,onTravelModeChange:w,onRouteVisibilityChange:v,onSegmentChange:k,onClose:S})=>{const L=[{value:"via_transport_1",label:"Desde Terminal Principal",description:"Terminal Principal ‚Üí Destino",icon:ve,requiresLocation:!1,badgeVariant:"default"},{value:"via_transport_2",label:"Desde Terminal Secundaria",description:"Terminal Secundaria ‚Üí Destino",icon:ve,requiresLocation:!1,badgeVariant:"outline"},{value:"current_to_direct",label:"Desde mi ubicaci√≥n",description:"Tu ubicaci√≥n ‚Üí Destino",icon:pe,requiresLocation:!0,badgeVariant:"outline"},{value:"current_to_transport",label:"Mi ubicaci√≥n ‚Üí Terminal",description:"Tu ubicaci√≥n ‚Üí Terminal ‚Üí Destino",icon:pe,requiresLocation:!0,badgeVariant:"outline"}],q=u.length>1;return e.jsxs("div",{className:"space-y-4",children:[S&&e.jsxs("div",{className:"flex items-center justify-between lg:hidden",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Opciones de Ruta"}),e.jsx(O,{variant:"ghost",size:"sm",onClick:S,children:e.jsx(Te,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:[e.jsx(de,{className:"text-sm font-medium text-blue-800 mb-3 block",children:"Tipo de Ruta:"}),e.jsx(gt,{value:t,onValueChange:h=>R(h),className:"space-y-3",children:L.map(h=>{const G=h.requiresLocation&&!g&&!d,W=(h.value==="current_to_direct"||h.value==="current_to_transport")&&d;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xt,{value:h.value,id:h.value,disabled:G}),e.jsxs(de,{htmlFor:h.value,className:`flex items-center gap-2 cursor-pointer flex-1 ${G?"opacity-60 cursor-not-allowed":""}`,children:[e.jsx(h.icon,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:h.label}),e.jsx(ee,{variant:h.badgeVariant,className:`text-xs w-fit ${h.value==="via_transport_1"?"bg-green-100 text-green-800 border-green-200":""}`,children:h.description})]}),G&&e.jsx(ee,{variant:"secondary",className:"mt-1 text-xs bg-amber-100 text-amber-800",children:"Permisos requeridos"}),W&&e.jsx(ee,{variant:"secondary",className:"mt-1 text-xs bg-blue-100 text-blue-800",children:"Usando tu ubicaci√≥n"})]})]})]},h.value)})}),d&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-700 flex items-center gap-1",children:[e.jsx(pe,{className:"h-3 w-3"}),"üìç Usando tu ubicaci√≥n actual"]})})]}),q&&s&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-purple-200/50",children:[e.jsx(de,{className:"text-sm font-medium text-purple-800 mb-3 block",children:"Ver Segmento:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(O,{size:"sm",variant:c==="all"?"default":"outline",onClick:()=>k("all"),className:`gap-2 ${c==="all"?"bg-purple-600 text-white":"border-purple-200 text-purple-700 hover:bg-purple-50"}`,children:[e.jsx(be,{className:"h-4 w-4"}),"Todas las etapas"]}),u.map((h,G)=>e.jsx(O,{size:"sm",variant:c===G?"default":"outline",onClick:()=>k(G),className:`gap-2 ${c===G?"bg-purple-600 text-white":"border-purple-200 text-purple-700 hover:bg-purple-50"}`,children:e.jsxs("span",{children:["Etapa ",G+1]})},G))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-green-200/50",children:[e.jsxs("h3",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(le,{className:"h-4 w-4"}),(t==="current_to_direct"||t==="current_to_transport")&&d?"Tu Ubicaci√≥n Actual":"Origen"]}),e.jsx("p",{className:"text-xs text-green-700 line-clamp-2",children:(t==="current_to_direct"||t==="current_to_transport")&&d?d.address||"Ubicaci√≥n detectada":m.address})]}),(t==="via_transport_1"||t==="current_to_transport")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-purple-200/50",children:[e.jsxs("h3",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ve,{className:"h-4 w-4"}),"Terminal Principal"]}),e.jsx("p",{className:"text-xs text-purple-700 line-clamp-2",children:C.address})]}),t==="via_transport_2"&&D&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-indigo-200/50",children:[e.jsxs("h3",{className:"font-semibold text-indigo-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ve,{className:"h-4 w-4"}),"Terminal Secundaria"]}),e.jsx("p",{className:"text-xs text-indigo-700 line-clamp-2",children:D.address})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-red-200/50",children:[e.jsxs("h3",{className:"font-semibold text-red-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(le,{className:"h-4 w-4"}),"Destino"]}),e.jsx("p",{className:"text-xs text-red-700 line-clamp-2",children:N.address})]})]}),s&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4"}),"Informaci√≥n de Ruta"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Distancia total:"}),e.jsx(ee,{variant:"outline",className:"bg-blue-100 text-blue-800",children:s.distance})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Duraci√≥n total:"}),e.jsxs(ee,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(Qe,{className:"h-3 w-3 mr-1"}),s.duration]})]})]}),u.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(de,{className:"text-sm font-medium text-blue-800 mb-2 block",children:"Segmentos de la ruta:"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:u.map((h,G)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium block",children:["Etapa ",G+1]}),e.jsx("div",{className:"text-gray-600 text-xs mt-1 line-clamp-2",children:h.instructions}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[h.distance," ‚Ä¢ ",h.duration]})]}),e.jsx(ee,{variant:"outline",className:"text-xs ml-2",children:Ve(h.mode)})]},G))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(de,{className:"text-sm font-medium text-blue-800 mb-2 block",children:"Modo de transporte:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["DRIVING","WALKING","BICYCLING"].map(h=>e.jsxs(O,{size:"sm",variant:r===h?"default":"outline",onClick:()=>w(h),className:`gap-2 flex-1 min-w-[80px] ${r===h?"bg-blue-600 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,children:[Ca(h),e.jsx("span",{className:"hidden xs:inline",children:Ve(h)})]},h))})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs(de,{htmlFor:"show-route",className:"text-sm font-medium text-blue-800 flex items-center gap-2",children:[o?e.jsx(Xt,{className:"h-4 w-4"}):e.jsx(Zt,{className:"h-4 w-4"}),"Mostrar ruta en el mapa:"]}),e.jsx(jt,{id:"show-route",checked:o,onCheckedChange:v})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3 text-sm",children:"Leyenda"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${(t==="current_to_direct"||t==="current_to_transport")&&d?"bg-blue-500":"bg-green-500"}`}),e.jsx("span",{className:"text-gray-700",children:(t==="current_to_direct"||t==="current_to_transport")&&d?"Tu ubicaci√≥n":"Origen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Destino"})]}),(t==="via_transport_1"||t==="current_to_transport")&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Terminal Principal"})]}),t==="via_transport_2"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Terminal Secundaria"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Ruta"})]})]})]})]})},Ra=t=>t==="satellite"||t==="hybrid"?[{elementType:"labels",stylers:[{visibility:"on"}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"},{weight:1}]},{elementType:"labels.text.stroke",stylers:[{color:"#000000"},{weight:2}]}]:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f8fafc"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#64748b"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e0f2fe"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f1f5f9"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#cbd5e1"}]}],yt=a.forwardRef(({origin:t,destination:r,routeType:s,currentMapType:u,showRoute:c,userLocation:o,routeSegments:d,isLoading:g,mapError:m,onMapInitialized:N,onMapError:C,onReload:D},R)=>{const w=a.useRef(null),v=a.useRef(null),k=a.useRef(null),S=a.useRef([]),L=a.useRef(!1);a.useImperativeHandle(R,()=>w.current);const q=a.useCallback(()=>{S.current.forEach(p=>{p&&p.setMap&&p.setMap(null)}),S.current=[]},[]),h=a.useCallback(p=>{if(!(!p||!window.google))try{q();const j=(s==="current_to_direct"||s==="current_to_transport")&&o,i=j?{lat:o.lat,lng:o.lng}:{lat:t.lat,lng:t.lng},f=j?"Tu ubicaci√≥n actual":`Origen: ${t.address}`,_=j?"#3b82f6":"#10b981",$=new window.google.maps.Marker({position:i,map:p,title:f,icon:{url:`data:image/svg+xml;base64,${btoa(`
            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0C10.48 0 6 4.48 6 10C6 17.08 16 40 16 40C16 40 26 17.08 26 10C26 4.48 21.52 0 16 0Z" fill="${_}"/>
              <circle cx="16" cy="10" r="5" fill="white"/>
              <circle cx="16" cy="10" r="3" fill="${_}"/>
            </svg>
          `)}`,scaledSize:new window.google.maps.Size(32,40),anchor:new window.google.maps.Point(16,40)}});S.current.push($);const z=new window.google.maps.Marker({position:{lat:r.lat,lng:r.lng},map:p,title:`Destino: ${r.address}`,icon:{url:`data:image/svg+xml;base64,${btoa(`
            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0C10.48 0 6 4.48 6 10C6 17.08 16 40 16 40C16 40 26 17.08 26 10C26 4.48 21.52 0 16 0Z" fill="#ef4444"/>
              <circle cx="16" cy="10" r="5" fill="white"/>
              <circle cx="16" cy="10" r="3" fill="#ef4444"/>
            </svg>
          `)}`,scaledSize:new window.google.maps.Size(32,40),anchor:new window.google.maps.Point(16,40)}});if(S.current.push(z),s==="via_transport_1"||s==="current_to_transport"){const B=new window.google.maps.Marker({position:{lat:19.8758703351958,lng:-97.5889138590976},map:p,title:"Terminal Principal de Transporte Zacapoaxtla",icon:{url:`data:image/svg+xml;base64,${btoa(`
              <svg width="28" height="36" viewBox="0 0 28 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="8" width="20" height="20" rx="2" fill="#8b5cf6"/>
                <circle cx="10" cy="22" r="2" fill="white"/>
                <circle cx="18" cy="22" r="2" fill="white"/>
                <path d="M4 18L4 12L20 12L20 18" fill="#a78bfa"/>
                <rect x="2" y="28" width="24" height="4" rx="1" fill="#8b5cf6"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(28,36),anchor:new window.google.maps.Point(14,36)}});S.current.push(B)}if(s==="via_transport_2"){const B=new window.google.maps.Marker({position:{lat:19.87383634377636,lng:-97.58769273588325},map:p,title:"Terminal Secundaria de Transporte Zacapoaxtla",icon:{url:`data:image/svg+xml;base64,${btoa(`
              <svg width="28" height="36" viewBox="0 0 28 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="8" width="20" height="20" rx="2" fill="#6366f1"/>
                <circle cx="10" cy="22" r="2" fill="white"/>
                <circle cx="18" cy="22" r="2" fill="white"/>
                <path d="M4 18L4 12L20 12L20 18" fill="#818cf8"/>
                <rect x="2" y="28" width="24" height="4" rx="1" fill="#6366f1"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(28,36),anchor:new window.google.maps.Point(14,36)}});S.current.push(B)}}catch(j){console.error("‚ùå Error agregando marcadores:",j)}},[s,o,t,r,q]),G=a.useCallback(p=>{if(!(!v.current||!window.google||!k.current))try{k.current.setDirections({routes:[],request:{origin:"",destination:"",travelMode:google.maps.TravelMode.DRIVING}}),p.forEach(i=>{i.startLocation&&i.endLocation&&new window.google.maps.DirectionsService().route({origin:i.startLocation,destination:i.endLocation,travelMode:window.google.maps.TravelMode[i.mode]},(_,$)=>{$==="OK"&&k.current&&_&&k.current.setDirections(_)})});const j=new window.google.maps.LatLngBounds;p.forEach(i=>{i.startLocation&&j.extend(new window.google.maps.LatLng(i.startLocation.lat,i.startLocation.lng)),i.endLocation&&j.extend(new window.google.maps.LatLng(i.endLocation.lat,i.endLocation.lng))}),j.isEmpty()&&(j.extend(new window.google.maps.LatLng(t.lat,t.lng)),j.extend(new window.google.maps.LatLng(r.lat,r.lng)),(s==="via_transport_1"||s==="current_to_transport")&&j.extend(new window.google.maps.LatLng(19.8758703351958,-97.5889138590976)),o&&(s==="current_to_direct"||s==="current_to_transport")&&j.extend(new window.google.maps.LatLng(o.lat,o.lng))),v.current&&v.current.fitBounds(j)}catch(j){console.error("‚ùå Error renderizando ruta:",j)}},[s,o,t,r]),W=a.useCallback(()=>{if(!(!w.current||!window.google||L.current))try{w.current&&(w.current.innerHTML="");const p=[t,r];(s==="via_transport_1"||s==="current_to_transport")&&p.push({lat:19.8758703351958,lng:-97.5889138590976,address:""}),(s==="current_to_direct"||s==="current_to_transport")&&o&&p.push(o);const j=new window.google.maps.LatLngBounds;p.forEach(_=>{j.extend(new window.google.maps.LatLng(_.lat,_.lng))});const i=new window.google.maps.Map(w.current,{center:j.getCenter(),zoom:12,mapTypeId:u,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,mapTypeControl:!0,styles:Ra(u)});v.current=i,i.fitBounds(j);const f=new window.google.maps.DirectionsRenderer({map:c?i:null,suppressMarkers:!0,polylineOptions:{strokeColor:"#3b82f6",strokeOpacity:.8,strokeWeight:6},preserveViewport:!1});k.current=f,h(i),L.current=!0,N(i)}catch(p){const j="Error al inicializar el mapa: "+(p instanceof Error?p.message:"Error desconocido");C(j)}},[t,r,s,u,c,o,h,N,C]),y=a.useCallback(()=>{if(!L.current)if(window.google)setTimeout(()=>W(),100);else{const p=document.createElement("script"),j="AIzaSyAyGMepBWIz2iAe2RZXcXSB27qwPH3tx2Q";p.src=`https://maps.googleapis.com/maps/api/js?key=${j}&libraries=places,geometry`,p.async=!0,p.defer=!0,p.onload=()=>{setTimeout(()=>W(),100)},p.onerror=()=>{C("Error al cargar Google Maps. Verifica tu API key.")},document.head.appendChild(p)}},[W,C]);return a.useEffect(()=>{y()},[y]),a.useEffect(()=>{d.length>0&&L.current&&G(d)},[d,G]),a.useEffect(()=>{k.current&&v.current&&k.current.setMap(c?v.current:null)},[c]),a.useEffect(()=>{L.current&&v.current&&h(v.current)},[s,o,h]),e.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden border-2 border-green-200/50 bg-white min-h-0",children:[g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-50/50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(we,{className:"h-8 w-8 text-green-600 animate-spin"}),e.jsx("p",{className:"text-green-700 font-medium",children:s.includes("current")?"Calculando ruta desde tu ubicaci√≥n...":"Calculando ruta..."})]})}),m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50/80 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Error al cargar el mapa"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:m}),e.jsxs(O,{onClick:D,className:"gap-2 bg-red-600 hover:bg-red-700",children:[e.jsx(we,{className:"h-4 w-4"}),"Reintentar"]})]})}),e.jsx("div",{ref:w,className:"w-full h-full",style:{minHeight:"400px"}})]})});yt.displayName="MapContainer";const _a=t=>{switch(t){case"DRIVING":return e.jsx(ue,{className:"h-4 w-4"});case"WALKING":return e.jsx(Le,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Ie,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},Sa=t=>{switch(t){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},Ma=t=>{switch(t){case"direct":return"directa";case"via_transport":return"v√≠a terminal";case"current_to_direct":return"desde tu ubicaci√≥n";case"current_to_transport":return"desde tu ubicaci√≥n v√≠a terminal";default:return"directa"}},Ea=({routeInfo:t,routeType:r,travelMode:s,userLocation:u,isLoading:c,onClose:o,onOpenGoogleMaps:d})=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 pt-4 border-t border-green-200/30",children:[e.jsx("div",{className:"text-sm text-green-600 flex-1",children:t?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-green-600"}),"Ruta ",Ma(r)," ‚Ä¢",t.distance," ‚Ä¢ ",t.duration]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ee,{variant:"outline",className:"text-xs",children:[_a(s),Sa(s)]}),u&&(r==="current_to_direct"||r==="current_to_transport")&&e.jsxs(ee,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),"Desde tu ubicaci√≥n"]})]})]}):c?e.jsxs("span",{children:["üîÑ Calculando ruta",r.includes("current")?" desde tu ubicaci√≥n":"","..."]}):e.jsx("span",{children:"üëÜ Selecciona opciones y calcula la ruta..."})}),e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[e.jsx(O,{variant:"outline",onClick:o,className:"border-green-200 text-green-700 hover:bg-green-50 flex-1 sm:flex-none",children:"Cerrar"}),e.jsxs(O,{onClick:d,className:"gap-2 bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white shadow-lg flex-1 sm:flex-none",disabled:!t,children:[e.jsx(Kt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Abrir en "}),"Google Maps"]})]})]}),Da=({isOpen:t,onAccept:r,onReject:s,onClose:u})=>e.jsx(Me,{open:t,onOpenChange:u,children:e.jsxs(Ee,{className:"sm:max-w-md bg-white",children:[e.jsx(De,{children:e.jsxs(Pe,{className:"flex items-center gap-2 text-lg",children:[e.jsx(pe,{className:"h-5 w-5 text-blue-600"}),"Acceso a tu ubicaci√≥n"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(Pt,{className:"bg-blue-50 border-blue-200",children:[e.jsx(le,{className:"h-4 w-4 text-blue-600"}),e.jsx(Tt,{className:"text-blue-800",children:"Para mostrarte rutas desde tu ubicaci√≥n actual, necesitamos tu permiso."})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Wt,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Tu privacidad es importante"}),e.jsx("p",{className:"text-xs",children:"Tu ubicaci√≥n solo se usa para calcular rutas y no se almacena"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(le,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Rutas m√°s precisas"}),e.jsx("p",{className:"text-xs",children:"Obten indicaciones exactas desde donde te encuentras"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qt,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Sin acceso limitado"}),e.jsx("p",{className:"text-xs",children:"Al rechazar, solo podr√°s ver rutas desde puntos fijos"})]})]})]})]}),e.jsxs(It,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(O,{variant:"outline",onClick:s,className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-100",children:"Rechazar"}),e.jsx(O,{onClick:r,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Permitir ubicaci√≥n"})]})]})}),Pa=()=>{const[t,r]=a.useState(null),[s,u]=a.useState(!1),[c,o]=a.useState(null),[d,g]=a.useState(!1),{toast:m}=Se(),N=a.useCallback(async(y,p)=>{if(!window.google)return"Ubicaci√≥n actual";try{const j=new window.google.maps.Geocoder;return new Promise(i=>{j.geocode({location:{lat:y,lng:p}},(f,_)=>{_==="OK"&&f&&f[0]?i(f[0].formatted_address):i("Ubicaci√≥n actual")})})}catch{return"Ubicaci√≥n actual"}},[]),C=a.useCallback(async()=>{if(!navigator.permissions)return!1;try{return(await navigator.permissions.query({name:"geolocation"})).state==="granted"}catch{return!1}},[]),D=a.useCallback(async()=>{const y=await C();return g(y),y},[C]),R=a.useCallback(async()=>new Promise((y,p)=>{if(!navigator.geolocation){p(new Error("La geolocalizaci√≥n no es soportada por este navegador"));return}u(!0),o(null);const j={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4};navigator.geolocation.getCurrentPosition(async i=>{try{const{latitude:f,longitude:_}=i.coords,z={address:await N(f,_),lat:f,lng:_};r(z),g(!0),u(!1),y(z)}catch{const{latitude:f,longitude:_}=i.coords,$={address:"Ubicaci√≥n actual",lat:f,lng:_};r($),g(!0),u(!1),y($)}},i=>{u(!1),g(!1);let f="No se pudo obtener la ubicaci√≥n actual. ";switch(i.code){case i.PERMISSION_DENIED:f+="Permiso de ubicaci√≥n denegado.";break;case i.POSITION_UNAVAILABLE:f+="Informaci√≥n de ubicaci√≥n no disponible.";break;case i.TIMEOUT:f+="Tiempo de espera agotado para obtener la ubicaci√≥n.";break;default:f+="Error desconocido al obtener la ubicaci√≥n."}o(f),p(new Error(f))},j)}),[N]),w=a.useCallback(y=>{if(y>=3600){const p=Math.floor(y/3600),j=Math.round(y%3600/60);return`${p} h ${j} min`}else return`${Math.round(y/60)} min`},[]),v=a.useCallback(y=>y>=1e3?`${(y/1e3).toFixed(1)} km`:`${Math.round(y)} m`,[]),k=a.useCallback((y,p)=>{const i=(p.lat-y.lat)*Math.PI/180,f=(p.lng-y.lng)*Math.PI/180,_=Math.sin(i/2)*Math.sin(i/2)+Math.cos(y.lat*Math.PI/180)*Math.cos(p.lat*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 6371*(2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_)))*1e3},[]),S=a.useCallback(async(y,p,j)=>{if(!window.google?.maps?.DirectionsService)throw new Error("Google Maps no est√° disponible");const i=new window.google.maps.DirectionsService;return new Promise((f,_)=>{const $={origin:{lat:y.lat,lng:y.lng},destination:{lat:p.lat,lng:p.lng},travelMode:window.google.maps.TravelMode[j],provideRouteAlternatives:!1};i.route($,(z,B)=>{if(B==="OK"&&z?.routes[0]?.legs){const V=z.routes[0].legs.map(P=>({distance:P.distance?.text||"0 km",duration:P.duration?.text||"0 min",mode:j,instructions:`De ${P.start_address} a ${P.end_address}`,distanceMeters:P.distance?.value||0,durationSeconds:P.duration?.value||0,startLocation:{address:P.start_address,lat:P.start_location.lat(),lng:P.start_location.lng()},endLocation:{address:P.end_address,lat:P.end_location.lat(),lng:P.end_location.lng()}})),F=V.reduce((P,H)=>P+H.distanceMeters,0),X=V.reduce((P,H)=>P+H.durationSeconds,0);f({segments:V,totalDistance:v(F),totalDuration:w(X),totalDistanceMeters:F,totalDurationSeconds:X})}else _(new Error(`Error calculando ruta: ${B}`))})})},[v,w]),L=a.useCallback(async y=>{const p=[];let j=0,i=0;for(const f of y)try{const _=await S(f.origin,f.destination,f.mode);p.push(..._.segments),j+=_.totalDistanceMeters,i+=_.totalDurationSeconds}catch(_){throw console.error("Error en segmento:",_),_}return{segments:p,totalDistance:v(j),totalDuration:w(i),totalDistanceMeters:j,totalDurationSeconds:i}},[S,v,w]),q=a.useCallback(async y=>{if(y)try{const p=await R();return g(!0),m({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"}),p}catch(p){throw g(!1),m({title:"Error de ubicaci√≥n",description:"No se pudo obtener la ubicaci√≥n despu√©s de conceder permisos",variant:"destructive"}),p}else throw g(!1),m({title:"Permisos denegados",description:"Usando rutas desde puntos fijos",variant:"default"}),new Error("Permiso de ubicaci√≥n denegado por el usuario")},[R,m]),h=a.useCallback((y,p,j,i,f)=>{if(!f||!y)return"via_transport_1";const _=k(y,p),$=k(y,i),z=k(y,j);if($<2e3)return"via_transport_1";if(_<1e3)return"via_transport_1";if(z<5e3)return"current_to_direct";if($<1e4)return"current_to_transport";{const B={via_transport_1:$,via_transport_2:$+500,current_to_direct:z,current_to_transport:$};return Object.entries(B).reduce((V,[F,X])=>X<B[V]?F:V,"via_transport_1")}},[k]),G=a.useCallback((y,p,j,i,f)=>!!(!i||i.routeType!==y||i.travelMode!==p||j&&f&&k(j,f)>100),[k]),W=a.useCallback(y=>{m({title:"Error de ubicaci√≥n",description:y,variant:"destructive"})},[m]);return{userLocation:t,isGettingLocation:s,locationError:c,hasLocationPermission:d,handlePermissionResponse:q,getUserCurrentLocation:R,calculateRoute:S,calculateComplexRoute:L,determineOptimalRoute:h,initializeLocationPermissions:D,formatDuration:w,shouldRecalculateRoute:G,formatDistance:v,showLocationError:W}},ae={address:"Terminal de Autobuses Zacapoaxtla, Carretera Federal Teziutl√°n-Zacapoaxtla, Zacapoaxtla, Puebla",lat:19.8758703351958,lng:-97.5889138590976},he={address:"Segunda Terminal de Transporte Zacapoaxtla, Centro, Zacapoaxtla, Puebla",lat:19.87383634377636,lng:-97.58769273588325},Ta=({origin:t,destination:r,buttonText:s="Ver Ruta",className:u})=>{const[c,o]=a.useState(!1),[d,g]=a.useState("DRIVING"),[m,N]=a.useState("current_to_direct"),[C,D]=a.useState(null),[R,w]=a.useState([]),[v,k]=a.useState(0),[S,L]=a.useState(!1),[q,h]=a.useState(null),[G,W]=a.useState("hybrid"),[y,p]=a.useState(!0),[j,i]=a.useState(!1),[f,_]=a.useState(null),[$,z]=a.useState(!1),B=a.useRef(null),Y=a.useRef(null),V=a.useRef(!1),F=a.useRef(!1),X=a.useRef(null),P=a.useRef(null),H=a.useRef(null),{toast:Q}=Se(),{userLocation:T,isGettingLocation:se,locationError:n,hasLocationPermission:l,getUserCurrentLocation:b,handlePermissionResponse:M,initializeLocationPermissions:U,calculateRoute:re,calculateComplexRoute:x}=Pa(),A=a.useCallback(async()=>{if(!window.google||F.current){console.log("‚è∏Ô∏è  Calculaci√≥n omitida - Google Maps no disponible o ya calculando");return}F.current=!0,L(!0),h(null);try{if((m==="current_to_direct"||m==="current_to_transport")&&!l&&!T)throw new Error("Se requiere permiso de ubicaci√≥n para esta ruta.");let I;switch(console.log("üìç Calculando ruta:",{routeType:m,travelMode:d}),m){case"via_transport_1":I=await re(ae,r,d);break;case"via_transport_2":I=await re(he,r,d);break;case"current_to_direct":if(!T)throw new Error("Se requiere ubicaci√≥n del usuario");I=await re(T,r,d);break;case"current_to_transport":if(!T)throw new Error("Se requiere ubicaci√≥n del usuario");I=await x([{origin:T,destination:ae,mode:d},{origin:ae,destination:r,mode:d}]);break;default:throw new Error("Tipo de ruta no v√°lido")}const te={distance:I.totalDistance,duration:I.totalDuration,startAddress:I.segments[0]?.startLocation?.address||(m.includes("current")&&T?T.address:t.address),endAddress:I.segments[I.segments.length-1]?.endLocation?.address||r.address,steps:I.segments,totalDistanceMeters:I.totalDistanceMeters,totalDurationSeconds:I.totalDurationSeconds,totalDuration:void 0,totalDistance:void 0};w(I.segments),D(te),X.current={routeType:m,travelMode:d,timestamp:Date.now()},P.current&&(P.current.pending=!1),console.log("‚úÖ Ruta calculada exitosamente")}catch(E){console.error("‚ùå Error en calculateOptimalRoute:",E);const I=E instanceof Error?E.message:"Error desconocido";P.current&&(P.current.pending=!1),!I.includes("ubicaci√≥n")&&!I.includes("segmento")&&(D(null),w([])),I.includes("ubicaci√≥n")||Q({title:"Error en c√°lculo de ruta",description:I,variant:"destructive"})}finally{L(!1),F.current=!1}},[m,d,l,T,t,r,re,x,Q]);a.useEffect(()=>{c&&m==="current_to_direct"&&!T&&l&&(console.log("üìç Inicializando ubicaci√≥n para ruta por defecto..."),b().catch(E=>{console.log("‚ö†Ô∏è No se pudo obtener ubicaci√≥n autom√°tica:",E.message),N("via_transport_1")}))},[c,m,T,l,b]),a.useEffect(()=>{if(!c||!V.current)return;if((()=>{if(F.current)return!1;const I={routeType:m,travelMode:d},te=X.current;return!(te&&te.routeType===I.routeType&&te.travelMode===I.travelMode)})()){console.log("üîÑ Efecto principal - Calculando ruta:",{routeType:m,travelMode:d});const I=m.includes("current")&&!T?1e3:0;setTimeout(()=>{A()},I)}},[A,c,m,d,T]),a.useEffect(()=>{!c||!V.current||P.current?.pending&&(console.log("üîÑ Procesando cambio de modo de transporte:",P.current.mode),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{P.current?.pending&&(A(),P.current.pending=!1)},300))},[d,c,A]),a.useEffect(()=>()=>{H.current&&clearTimeout(H.current)},[]);const K=a.useCallback(E=>{E!==d&&(console.log("üöó Cambiando modo de transporte a:",E),P.current={mode:E,timestamp:Date.now(),pending:!0},g(E))},[d]),J=a.useCallback(async E=>{const I=E==="current_to_direct"||E==="current_to_transport";if(I&&!l&&!T)_(()=>async()=>{N(E),k(0);try{await b()}catch(te){console.error("Error obteniendo ubicaci√≥n:",te),N("via_transport_1")}}),i(!0);else if(N(E),k(0),I&&l&&!T)try{await b()}catch(te){console.error("Error obteniendo ubicaci√≥n:",te),N("via_transport_1")}},[l,T,b]),oe=a.useCallback(E=>{k(E)},[]),ie=a.useCallback(()=>v==="all"?R:R.filter((E,I)=>I===v),[R,v]),ce=a.useCallback(async()=>{if(!se)try{if(!l){i(!0);return}await b(),Q({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"})}catch(E){console.error("Error obteniendo ubicaci√≥n:",E),Q({title:"Error de ubicaci√≥n",description:n||"No se pudo obtener la ubicaci√≥n",variant:"destructive"})}},[b,Q,n,se,l]),ne=a.useCallback(async E=>{if(i(!1),E)try{await M(!0),await b(),Q({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"})}catch(I){console.error("Error obteniendo ubicaci√≥n despu√©s de permisos:",I),Q({title:"Error de ubicaci√≥n",description:"No se pudo obtener la ubicaci√≥n despu√©s de conceder permisos",variant:"destructive"})}else Q({title:"Permisos denegados",description:"Usando rutas desde puntos fijos",variant:"default"});f&&setTimeout(()=>{f(),_(null)},300)},[M,b,f,Q]),ge=a.useCallback(()=>{V.current=!1,X.current=null,P.current=null,h(null),D(null),w([]),H.current&&clearTimeout(H.current)},[]),Nt=a.useCallback(E=>{W(E),Y.current&&Y.current.setMapTypeId(E)},[]),Ae=a.useCallback(()=>{const E="https://www.google.com/maps/dir/";switch(m){case"via_transport_1":return`${E}${t.lat},${t.lng}/${ae.lat},${ae.lng}/${r.lat},${r.lng}`;case"via_transport_2":return`${E}${t.lat},${t.lng}/${he.lat},${he.lng}/${r.lat},${r.lng}`;case"current_to_direct":return T?`${E}${T.lat},${T.lng}/${r.lat},${r.lng}`:`${E}${t.lat},${t.lng}/${r.lat},${r.lng}`;case"current_to_transport":return T?`${E}${T.lat},${T.lng}/${ae.lat},${ae.lng}/${r.lat},${r.lng}`:`${E}${t.lat},${t.lng}/${ae.lat},${ae.lng}/${r.lat},${r.lng}`;default:return`${E}${t.lat},${t.lng}/${r.lat},${r.lng}`}},[m,t,r,T]),kt=a.useCallback(()=>{window.open(Ae(),"_blank")},[Ae]),Ct=a.useCallback(()=>{o(!1),z(!1),P.current=null,H.current&&clearTimeout(H.current)},[]),Ge=a.useCallback(()=>{z(!$)},[$]),Rt=a.useCallback(E=>{Y.current=E,V.current=!0,(async()=>{try{await U(),X.current||(console.log("üó∫Ô∏è Mapa inicializado, calculando ruta inicial..."),A())}catch(te){console.error("Error en inicializaci√≥n:",te)}})()},[A,U]),_t=()=>e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 sm:gap-6 min-h-0",children:[e.jsx("div",{className:"hidden lg:block w-96 flex-col gap-4 overflow-y-auto",children:e.jsx(qe,{routeType:m,travelMode:d,routeInfo:C,routeSegments:R,activeSegment:v,showRoute:y,userLocation:T,hasLocationPermission:l,origin:t,destination:r,transportBase:ae,transportBase2:he,onRouteTypeChange:J,onTravelModeChange:K,onRouteVisibilityChange:p,onSegmentChange:oe})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[e.jsx(ca,{currentMapType:G,onMapTypeChange:Nt,isLoading:S,onCalculateRoute:A,routeInfo:C,travelMode:d,routeType:m,userLocation:T,onToggleSidebar:Ge,showSidebar:$}),e.jsx(yt,{ref:B,origin:t,destination:r,routeType:m,travelMode:d,currentMapType:G,showRoute:y,userLocation:T,routeSegments:ie(),activeSegment:v,isLoading:S,mapError:q,onMapInitialized:Rt,onMapError:h,onReload:ge})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(Me,{open:c,onOpenChange:o,children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(O,{type:"button",variant:"outline",className:Z("gap-2 border-green-300 text-green-700 hover:bg-green-50 hover:text-green-800",u),children:[e.jsx(be,{className:"h-4 w-4"}),s]})}),e.jsxs(Ee,{className:"max-w-7xl h-[95vh] flex flex-col bg-gradient-to-br from-green-50/80 to-blue-100/80 backdrop-blur-sm border border-green-200/50 shadow-2xl rounded-2xl p-2 sm:p-4 md:p-6",children:[e.jsxs(De,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between pb-4 border-b border-green-200/30 gap-2 sm:gap-3",children:[e.jsx(Pe,{className:"text-base sm:text-lg md:text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent text-center sm:text-left w-full sm:w-auto",children:"üó∫Ô∏è C√≥mo Llegar"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-between sm:justify-start",children:[e.jsxs(O,{variant:"outline",size:"sm",onClick:Ge,className:"lg:hidden gap-2 border-green-200 text-green-700 hover:bg-green-50",children:[$?e.jsx(Te,{className:"h-4 w-4"}):e.jsx(Xe,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Men√∫"})]}),e.jsxs(O,{variant:"outline",size:"sm",onClick:ce,disabled:se,className:"gap-2 border-blue-200 text-blue-700 hover:bg-blue-100 flex-1 sm:flex-none",children:[e.jsx(pe,{className:`h-4 w-4 ${se?"animate-pulse":""}`}),e.jsx("span",{className:"hidden xs:inline",children:se?"Obteniendo...":"Mi Ubicaci√≥n"})]}),e.jsxs(O,{onClick:ge,disabled:S,variant:"outline",size:"sm",className:"gap-2 border-green-200 text-green-700 hover:bg-green-100 flex-1 sm:flex-none",children:[e.jsx(we,{className:`h-4 w-4 ${S?"animate-spin":""}`}),e.jsx("span",{className:"hidden xs:inline",children:"Recargar"})]})]})]}),e.jsx(Et,{open:$,onOpenChange:z,children:e.jsx(Dt,{side:"left",className:"w-[85vw] sm:w-96 p-4 overflow-y-auto bg-gradient-to-b from-green-50/95 to-blue-100/95 backdrop-blur-sm",children:e.jsx(qe,{routeType:m,travelMode:d,routeInfo:C,routeSegments:R,activeSegment:v,showRoute:y,userLocation:T,hasLocationPermission:l,origin:t,destination:r,transportBase:ae,transportBase2:he,onRouteTypeChange:J,onTravelModeChange:K,onRouteVisibilityChange:p,onSegmentChange:oe,onClose:()=>z(!1)})})}),_t(),e.jsx(Ea,{routeInfo:C,routeType:m,travelMode:d,userLocation:T,isLoading:S,onClose:Ct,onOpenGoogleMaps:kt})]})]}),e.jsx(Da,{isOpen:j,onAccept:()=>ne(!0),onReject:()=>ne(!1),onClose:()=>{i(!1),_(null)}})]})},Ia=()=>{const t=a.useMemo(()=>["Naturaleza","Cultura","Cascada","Mirador","Puente","Playa","Historia","Gastronom√≠a","Aventura","Religioso","Arquitectura"],[]),[r,s]=a.useState("all");return{categories:t,selectedCategory:r,setSelectedCategory:s,getCategoryColor:c=>{if(!c)return"bg-gray-500";const o=c.toLowerCase();return o.includes("naturaleza")||o.includes("nature")?"bg-green-600":o.includes("cultura")||o.includes("culture")?"bg-yellow-500":o.includes("cascada")||o.includes("waterfall")?"bg-sky-500":o.includes("historia")||o.includes("history")?"bg-purple-600":o.includes("puente")||o.includes("bridge")?"bg-red-600":o.includes("mirador")||o.includes("viewpoint")?"bg-rose-500":o.includes("ruta")||o.includes("trail")||o.includes("path")?"bg-emerald-500":o.includes("monta√±a")||o.includes("mountain")?"bg-indigo-700":o.includes("rio")||o.includes("r√≠o")||o.includes("river")?"bg-cyan-600":"bg-gray-400"}}},La=({count:t})=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:Array.from({length:t}).map((r,s)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card border border-white/20",children:[e.jsx(xe,{className:"w-full h-64"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(xe,{className:"h-6 w-3/4"}),e.jsx(xe,{className:"h-4 w-full"}),e.jsx(xe,{className:"h-4 w-2/3"}),e.jsx(xe,{className:"h-10 w-full"})]})]},s))}),$a=({rating:t,onRatingChange:r,totalRatings:s=0,size:u="md",readonly:c=!1,showProgress:o=!0})=>{const{t:d}=ye(),[g,m]=a.useState(0),[N,C]=a.useState(!1),D={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},R=typeof t=="number"?t:0,w=N&&g>0?g:R;return e.jsxs("div",{className:"flex flex-col gap-2",onMouseEnter:()=>!c&&C(!0),onMouseLeave:()=>!c&&C(!1),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(v=>e.jsxs("button",{type:"button",onClick:()=>!c&&r?.(v),onMouseEnter:()=>!c&&m(v),disabled:c,className:`relative transition-all duration-200 ${c?"cursor-default":"cursor-pointer hover:scale-125"}`,children:[e.jsx(_e,{className:D[u],fill:"none",color:"#d1d5db"}),e.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:v<=w?"100%":"0%"},children:e.jsx(_e,{className:D[u],fill:"currentColor",color:v<=w?"#f59e0b":"#d1d5db"})}),!c&&v<=g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-300 rounded-full blur-[3px] opacity-70"})})]},v)),e.jsxs("span",{className:Z("text-sm font-medium ml-2",R>0?"text-amber-700":"text-muted-foreground"),children:[R&&R>0?R.toFixed(1):d("places.rating.noRatings")," "]})]}),o&&!c&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx(Ce.div,{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",initial:{width:"0%"},animate:{width:`${w/5*100}%`},transition:{duration:.5,ease:"easeOut"}})}),e.jsxs(Ce.div,{className:"absolute -top-6 text-xs font-bold text-amber-600",initial:{opacity:0,x:-10},animate:{opacity:N?1:0,x:N?0:-10},style:{left:`${w/5*100}%`},children:[w,"/5"]}),e.jsx("div",{className:"flex justify-between mt-1",children:[1,2,3,4,5].map(v=>e.jsx("div",{className:`w-1 h-1 rounded-full ${v<=w?"bg-amber-500":"bg-gray-300"}`},v))})]}),s>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s," ",d(s===1?"places.rating.rating":"places.rating.ratings")," "]})]})},za=({placeName:t,stats:r,variant:s="default",theme:u="default"})=>{const{t:c}=ye();if(!r)return null;const o={default:{primary:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md hover:from-blue-600 hover:to-indigo-700",secondary:"bg-secondary text-secondary-foreground"},nature:{primary:"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-md hover:from-green-600 hover:to-emerald-700",secondary:"bg-green-200 text-green-800 hover:bg-green-300"},waterfall:{primary:"bg-gradient-to-r from-blue-500 to-cyan-600 text-white shadow-md hover:from-blue-600 hover:to-cyan-700",secondary:"bg-blue-200 text-blue-800 hover:bg-blue-300"},cultural:{primary:"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-md hover:from-amber-600 hover:to-orange-700",secondary:"bg-amber-200 text-amber-800 hover:bg-amber-300"},history:{primary:"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-md hover:from-purple-600 hover:to-pink-700",secondary:"bg-purple-200 text-purple-800 hover:bg-purple-300"},bridge:{primary:"bg-gradient-to-r from-gray-700 to-gray-900 text-white shadow-md hover:from-gray-800 hover:to-black",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"},viewpoint:{primary:"bg-gradient-to-r from-yellow-500 to-red-600 text-white shadow-md hover:from-yellow-600 hover:to-red-700",secondary:"bg-yellow-200 text-yellow-800 hover:bg-yellow-300"},trail:{primary:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",secondary:"bg-teal-200 text-teal-800 hover:bg-teal-300"},montain:{primary:"bg-gradient-to-r from-gray-600 to-gray-800 text-white hover:from-gray-700 hover:to-black",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"},river:{primary:"bg-gradient-to-r from-blue-600 to-blue-800 text-white hover:from-blue-700 hover:to-black",secondary:"bg-blue-200 text-blue-800 hover:bg-blue-300"},path:{primary:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",secondary:"bg-teal-200 text-teal-800 hover:bg-teal-300"}},d=o[u]||o.default,g=d[s||"default"]||d.primary;return e.jsxs(Me,{children:[e.jsx(Ye,{asChild:!0,children:e.jsxs(O,{variant:s==="primary"?"default":"outline",size:"sm",className:Z("mt-2 transition-all duration-300 transform hover:scale-105",g),children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),c("places.rating.stats.viewStats")," "]})}),e.jsxs(Ee,{className:"sm:max-w-md bg-white/30 backdrop-blur-sm border border-white/20 p-2 text-gray-900 dark:text-gray-100 dark:bg-black/30 dark:border-gray-700 shadow-lg rounded-md",children:[e.jsx(De,{children:e.jsx(Pe,{className:Z("text-lg font-bold",{"text-primary-foreground":s==="primary","text-secondary-foreground":s==="secondary"}),children:c("places.rating.stats.title").replace("{{placeName}}",t)})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:Z("text-center p-4 rounded-lg",{"bg-primary/20":s==="default","bg-primary/30":s==="primary","bg-secondary/30":s==="secondary"}),children:[e.jsx("p",{className:"text-2xl font-bold",children:r.promedio!==null&&r.promedio!==void 0?Number(r.promedio).toFixed(1):"0.0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c("places.rating.stats.average")})," "]}),e.jsxs("div",{className:Z("text-center p-4 rounded-lg",{"bg-primary/20":s==="default","bg-primary/30":s==="primary","bg-secondary/30":s==="secondary"}),children:[e.jsx("p",{className:"text-2xl font-bold",children:r.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c("places.rating.stats.total")})," "]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold",children:[c("places.rating.stats.distribution"),":"]})," ",r.distribucion.map(m=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-16 text-sm text-muted-foreground",children:[m.calificacion," ",m.calificacion===1?c("places.rating.stats.star"):c("places.rating.stats.stars")," "]}),e.jsx("div",{className:"flex-1 bg-secondary rounded-full h-3",children:e.jsx("div",{className:Z("rounded-full h-3",{"bg-primary":s==="default","bg-primary-foreground":s==="primary","bg-secondary-foreground":s==="secondary"}),style:{width:`${r.total>0?m.cantidad/r.total*100:0}%`}})}),e.jsxs("div",{className:"w-12 text-sm font-medium text-right",children:[m.cantidad," (",m.porcentaje,"%)"]})]},m.calificacion))]})]})]})]})},Aa=({theme:t})=>{const{t:r}=ye(),s={default:{bg:"bg-gradient-to-r from-blue-100/80 via-indigo-100/80 to-purple-100/80",border:"border-blue-200/30"},nature:{bg:"bg-gradient-to-r from-green-100/80 via-emerald-100/80 to-teal-100/80",border:"border-green-200/30"},waterfall:{bg:"bg-gradient-to-r from-blue-100/80 via-cyan-100/80 to-sky-100/80",border:"border-blue-200/30"},cultural:{bg:"bg-gradient-to-r from-amber-100/80 via-orange-100/80 to-red-100/80",border:"border-amber-200/30"},history:{bg:"bg-gradient-to-r from-purple-100/80 via-pink-100/80 to-red-100/80",border:"border-purple-200/30"},bridge:{bg:"bg-gradient-to-r from-gray-100/80 via-gray-200/80 to-gray-300/80",border:"border-gray-200/30"},viewpoint:{bg:"bg-gradient-to-r from-yellow-100/80 via-orange-100/80 to-red-100/80",border:"border-yellow-200/30"},trail:{bg:"bg-gradient-to-r from-teal-100/80 via-cyan-100/80 to-sky-100/80",border:"border-teal-200/30"},montain:{bg:"bg-gradient-to-r from-gray-100/80 via-gray-200/80 to-gray-300/80",border:"border-gray-200/30"},river:{bg:"bg-gradient-to-r from-blue-100/80 via-blue-200/80 to-blue-300/80",border:"border-blue-200/30"},path:{bg:"bg-gradient-to-r from-teal-100/80 via-cyan-100/80 to-sky-100/80",border:"border-teal-200/30"}},u=s[t]||s.default;return e.jsx(Ce.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-10",children:e.jsx("div",{className:`${u.bg} backdrop-blur-sm shadow-lg hover:shadow-2xl border ${u.border} transition-all duration-500 overflow-hidden rounded-2xl p-6`,children:e.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-3",children:[e.jsx(aa,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-bold",children:r("places.invitation.title")})," "]}),e.jsxs("p",{className:"mb-3",children:[r("places.invitation.description")," "]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[r("places.invitation.hashtags.noRegistration")," "]}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[r("places.invitation.hashtags.privacy")," "]}),e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:[r("places.invitation.hashtags.community")," "]})]})]})})})})},Ga={address:"Base de Transporte Zacapoaxtla, Puebla",lat:19.8758703351958,lng:-97.5889138590976},qa=()=>{const{t}=ye(),{places:r,loading:s,ratePlace:u,getUserRating:c,getRatingStats:o,isRating:d,getUserCurrentRating:g,hasUserRated:m,getPlaceGallery:N,getPlacePdfUrl:C,getPlaceLocation:D}=He(),{getCategoryColor:R}=Ia(),{toast:w}=Se(),[v,k]=a.useState({}),[S,L]=a.useState({}),[q,h]=a.useState({}),[,G]=a.useState({}),[W,y]=a.useState({}),[p,j]=a.useState({isOpen:!1,placeId:"",initialIndex:0}),[i,f]=a.useState("default"),[_,$]=a.useState(!1),[z,B]=a.useState(null);a.useEffect(()=>{if(r.length>0){const n=r.map(l=>l.categoria?.toLowerCase());n.some(l=>l?.includes("naturaleza")||l?.includes("nature"))?f("nature"):n.some(l=>l?.includes("cascada")||l?.includes("waterfall"))?f("waterfall"):n.some(l=>l?.includes("cultura")||l?.includes("cultural"))?f("cultural"):n.some(l=>l?.includes("historia")||l?.includes("history"))?f("history"):n.some(l=>l?.includes("puente")||l?.includes("bridge"))?f("bridge"):n.some(l=>l?.includes("mirador")||l?.includes("viewpoint"))?f("viewpoint"):n.some(l=>l?.includes("sendero")||l?.includes("trail"))?f("trail"):n.some(l=>l?.includes("ruta")||l?.includes("path"))?f("path"):n.some(l=>l?.includes("monta√±a")||l?.includes("montain"))?f("montain"):n.some(l=>l?.includes("r√≠o")||l?.includes("river"))?f("river"):f("default")}},[r]),a.useEffect(()=>{r.length>0&&(async()=>{const l={};for(const b of r)try{const M=await c(b.id);M&&(l[b.id]=M.calificacion)}catch(M){console.error(`Error loading rating for place ${b.id}:`,M)}k(l)})()},[r,c]),a.useEffect(()=>{r.length>0&&(async()=>{const l={},b={};for(const M of r){b[M.id]=!0,h(U=>({...U,[M.id]:!0}));try{const U=await o(M.id);console.log(`üìç Stats for ${M.nombre}:`,U),U&&(l[M.id]=U)}catch(U){console.error(`Error loading stats for place ${M.id}:`,U)}finally{b[M.id]=!1,h(U=>({...U,[M.id]:!1}))}}L(l),console.log("üìä All rating stats loaded:",l)})()},[r,o]);const Y=n=>{const l=C(n);if(!l){w({title:"‚ÑπÔ∏è Informaci√≥n",description:"Este lugar no tiene una gu√≠a PDF disponible",variant:"default"});return}window.open(l,"_blank","noopener,noreferrer")},V=a.useCallback(async n=>{try{G(b=>({...b,[n]:!0})),console.log("üîÑ [Places] Cargando galer√≠a para:",n);const l=await N(n);return console.log("‚úÖ [Places] Galer√≠a cargada:",l.length,"im√°genes"),y(b=>({...b,[n]:l})),l}catch(l){console.error("‚ùå [Places] Error cargando galer√≠a:",l);const b=r.find(M=>M.id===n);if(b){const M=[{id:"main",url_foto:b.foto_principal_url||"/placeholder.svg",descripcion:b.descripcion||b.nombre,es_principal:!0,orden:1,creado_en:new Date().toISOString()}];return y(U=>({...U,[n]:M})),M}return[]}finally{G(l=>({...l,[n]:!1}))}},[N,r]),F=async n=>{try{console.log("üîÑ [Places] Abriendo galer√≠a desde imagen para:",n),W[n]||await V(n),j({isOpen:!0,placeId:n,initialIndex:0}),console.log("üéâ [Places] Galer√≠a abierta para placeId:",n)}catch(l){console.error("‚ùå [Places] Error abriendo galer√≠a desde imagen:",l),w({title:"Error",description:"No se pudo cargar la galer√≠a de im√°genes",variant:"destructive"})}},X=n=>{F(n)},P=n=>{console.error("‚ùå Error cargando imagen:",n)},H=async(n,l)=>{try{const b=r.find(x=>x.id===n);if(!b)return;const U=v[n]!==void 0;await u(n,l)&&(k(x=>({...x,[n]:l})),w({title:U?"‚≠ê Calificaci√≥n actualizada":"üéâ ¬°Gracias por tu calificaci√≥n!",description:U?`Tu calificaci√≥n para "${b.nombre}" ha sido actualizada a ${l} estrellas`:`Has calificado "${b.nombre}" con ${l} estrellas`}),setTimeout(async()=>{try{const x=await o(n);x&&L(A=>({...A,[n]:x}))}catch(x){console.error("Error reloading stats:",x)}},1e3))}catch(b){if(b instanceof Error&&b.message==="TERMS_REQUIRED"){const M=r.find(U=>U.id===n);M&&(B({placeId:n,placeName:M.nombre,rating:l}),$(!0))}}},Q=async()=>{if(z){const{placeId:n,rating:l}=z;try{await u(n,l)&&(k(M=>({...M,[n]:l})),w({title:"üéâ ¬°Gracias por tu calificaci√≥n!",description:`Has calificado "${z.placeName}" con ${l} estrellas`}),setTimeout(async()=>{try{const M=await o(n);M&&L(U=>({...U,[n]:M}))}catch(M){console.error("Error reloading stats:",M)}},1e3))}catch{}B(null),$(!1)}},T=n=>{if(!n)return[];const l=[],b=n.toLowerCase();return(b.includes("senderismo")||b.includes("hiking"))&&l.push(t("places.features.hiking")),(b.includes("nataci√≥n")||b.includes("swimming"))&&l.push(t("places.features.swimming")),(b.includes("fotograf√≠a")||b.includes("photo"))&&l.push(t("places.features.photography")),(b.includes("gastronom√≠a")||b.includes("food"))&&l.push(t("places.features.gastronomy")),(b.includes("artesan√≠as")||b.includes("crafts"))&&l.push(t("places.features.crafts")),(b.includes("m√∫sica")||b.includes("music"))&&l.push(t("places.features.music")),(b.includes("deportes")||b.includes("sports"))&&l.push(t("places.features.waterSports")),(b.includes("atardecer")||b.includes("sunset"))&&l.push(t("places.features.sunset")),(b.includes("relax")||b.includes("peaceful"))&&l.push(t("places.features.relax")),l.length>0?l:[t("places.features.tourism")]},se=n=>!n||n===0?"0.0":Number(n).toFixed(1);return s?e.jsxs("section",{id:"places",className:"py-20 relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url(https://res.cloudinary.com/dinsl266g/image/upload/v1763074398/fondo-galeria_urye7x.svg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(4px) brightness(0.9)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] z-0"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-100 to-indigo-100 px-4 py-2 rounded-full mb-6",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:t("places.sectionSubtitle")})," "]}),e.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:[t("places.sectionTitle")," "]}),e.jsxs("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:[t("places.sectionDescription")," "]})]}),e.jsx(La,{count:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("section",{id:"places",className:"py-20 relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url(https://res.cloudinary.com/dinsl266g/image/upload/v1763074398/fondo-galeria_urye7x.svg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(4px) brightness(0.9)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] z-0"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-20",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-100 to-indigo-100 px-4 py-2 rounded-full mb-6",children:[e.jsx(le,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:t("places.sectionSubtitle")})," "]}),e.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:[t("places.sectionTitle")," "]}),e.jsxs("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:[t("places.sectionDescription")," "]})]}),e.jsx(Aa,{theme:i}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:r.map(n=>{const l=T(n.descripcion),b=v[n.id]||n.puntuacion_promedio||0,M=d[n.id]||!1,U=n.foto_principal_url||"/placeholder.svg",re=m(n.id),x=g(n.id),A=D(n);return e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card hover:shadow-xl transition-shadow group border border-white/30",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:U,alt:n.nombre,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer",loading:"lazy",onClick:()=>X(n.id),onError:()=>P(U)}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs(ee,{className:Z(R(n.categoria),"text-white"),children:[n.categoria||t("places.features.tourism")," "]})}),A.hasCoordinates&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500/90 backdrop-blur-sm rounded-lg px-2 py-1 text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(Jt,{className:"w-3 h-3"}),t("places.info.gps")," "]}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg px-2 py-1 text-white text-sm font-medium",children:[t("places.info.free")," "]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-800 group-hover:text-blue-600 transition-colors",children:n.nombre})}),e.jsxs("p",{className:"text-muted-foreground mb-4 leading-relaxed line-clamp-3",children:[n.descripcion||t("places.info.defaultDescription")," "]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($a,{rating:b,onRatingChange:K=>H(n.id,K),totalRatings:n.total_calificaciones||0,size:"sm",readonly:M}),n.puntuacion_promedio!==null&&n.puntuacion_promedio!==void 0&&n.puntuacion_promedio>0&&e.jsxs("div",{className:"flex items-center ml-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-1 px-3 rounded-full shadow-lg",children:[e.jsx(_e,{className:"w-3 h-3 mr-1 fill-white"}),e.jsx("span",{className:"text-sm",children:se(n.puntuacion_promedio)})]})]}),M&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Re,{className:"w-3 h-3 mr-1 animate-spin"}),t("places.rating.ratinging")," "]})]}),re&&x&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:t("places.rating.alreadyRated").replace("{{stars}}",x.toString())}),!re&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t("places.rating.ratePrompt")," "]}),S[n.id]&&S[n.id].total>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(za,{placeName:n.nombre,stats:S[n.id],variant:i==="default"?"default":"primary",theme:i}),q[n.id]&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(Re,{className:"w-3 h-3 mr-1 animate-spin"}),t("places.rating.loadingStats")," "]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),n.ubicacion||"San Juan Tahitic"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),t("places.info.hours")," "]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ea,{className:"w-4 h-4 mr-2"}),t("places.info.allLevels")," "]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:l.map((K,J)=>e.jsx(ee,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:K},J))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(Ta,{origin:Ga,destination:A,buttonText:t("places.buttons.getDirections"),className:Z("w-full shadow-md hover:shadow-lg transition-all duration-300",i==="default"&&"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700",i==="nature"&&"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700",i==="waterfall"&&"bg-gradient-to-r from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700",i==="cultural"&&"bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:from-amber-600 hover:to-orange-700",i==="history"&&"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",i==="bridge"&&"bg-gradient-to-r from-gray-700 to-gray-900 text-white hover:from-gray-800 hover:to-black",i==="viewpoint"&&"bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700",i==="trail"&&"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",i==="montain"&&"bg-gradient-to-r from-gray-600 to-gray-800 text-white hover:from-gray-700 hover:to-black",i==="river"&&"bg-gradient-to-r from-blue-600 to-blue-800 text-white hover:from-blue-700 hover:to-black",i==="path"&&"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700")}),n.pdf_url&&e.jsxs(O,{variant:"outline",size:"sm",onClick:()=>Y(n),className:Z("w-full border-2 transition-all duration-300 hover:scale-105",i==="default"&&"border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",i==="nature"&&"border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400",i==="waterfall"&&"border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",i==="cultural"&&"border-amber-300 text-amber-700 hover:bg-amber-50 hover:border-amber-400",i==="history"&&"border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",i==="bridge"&&"border-gray-400 text-gray-700 hover:bg-gray-50 hover:border-gray-500",i==="viewpoint"&&"border-yellow-300 text-yellow-700 hover:bg-yellow-50 hover:border-yellow-400",i==="trail"&&"border-teal-300 text-teal-700 hover:bg-teal-50 hover:border-teal-400",i==="montain"&&"border-gray-400 text-gray-700 hover:bg-gray-50 hover:border-gray-500",i==="river"&&"border-blue-400 text-blue-700 hover:bg-blue-50 hover:border-blue-500",i==="path"&&"border-teal-300 text-teal-700 hover:bg-teal-50 hover:border-teal-400"),children:[e.jsx(ta,{className:"w-4 h-4 mr-2"}),t("places.buttons.viewPdf")," "]})]})]})]},n.id)})}),e.jsx("div",{className:"text-center mt-12",children:e.jsxs(O,{size:"lg",variant:"outline",className:"px-8",children:[t("places.buttons.viewAll")," "]})})]})]}),e.jsx(Lt,{isOpen:_,onClose:()=>{$(!1),B(null)},onAccept:Q,placeName:z?.placeName||""}),e.jsx(sa,{placeId:p.placeId,initialIndex:p.initialIndex,isOpen:p.isOpen,onClose:()=>j(n=>({...n,isOpen:!1})),title:"Galer√≠a del lugar"})]})};export{qa as P,Ia as u};
