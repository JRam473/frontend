import{r as l,j as t}from"./animations-w5RCdeks.js";import{h as d,i as u,j as m}from"./index-BFbEBVg7.js";import"./vendor-BImi-76D.js";import"./charts-qq9cUDqM.js";import"./ui-vuw2n6JC.js";import"./utils-BNe0Xlio.js";const k=()=>{const[n]=d(),e=u(),{getPreLoginPath:s}=m(),r=n.get("token"),a=n.get("error");l.useEffect(()=>{(async()=>{if(a){console.error("‚ùå Error de OAuth:",a),e("/login",{replace:!0,state:{error:i(a)}});return}if(r)try{const o=s();console.log("‚úÖ Token recibido, guardando..."),console.log("üìç OAuthCallback - Redirigiendo a:",o),localStorage.setItem("admin_token",r),setTimeout(()=>{e(o,{replace:!0})},500)}catch(o){console.error("‚ùå Error procesando OAuth callback:",o),e("/login",{replace:!0,state:{error:"Error procesando autenticaci√≥n"}})}else console.error("‚ùå Token no recibido"),e("/login",{replace:!0,state:{error:"Token de autenticaci√≥n no recibido"}})})()},[r,a,e,s]);const i=c=>{switch(c){case"unauthorized":return"No est√°s autorizado para acceder al panel administrativo";case"server_error":return"Error del servidor durante la autenticaci√≥n";default:return"Error durante la autenticaci√≥n"}};return t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-blue-100",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:r?"Autenticaci√≥n exitosa":"Procesando autenticaci√≥n"}),t.jsx("p",{className:"text-gray-600 mt-2",children:r?"Redirigiendo...":"Esperando respuesta..."})]})})};export{k as OAuthCallback};
