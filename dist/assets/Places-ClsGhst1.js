import{r as a,j as e,m as Pe}from"./animations-w5RCdeks.js";import{B as G,d as K,k as ae,m as We,R as Et,I as Dt,b as Le,S as Pt,n as Tt,u as Se}from"./index-FEn-eR-a.js";import{u as Qe,L as be,D as $e,a as ze,b as Ae,c as Ge,A as It,e as Lt,g as $t,f as Je,T as zt,S as ve}from"./skeleton-D4vjSNg6.js";import{bn as Te,X as Oe,bi as At,bh as Re,aI as Gt,aE as Ot,au as Ut,y as Bt,I as et,bR as je,bS as Vt,M as ue,ab as qt,bM as Ft,bO as Yt,bA as pe,bT as Ue,aF as Be,k as Xt,l as tt,e as Ve,h as fe,j as Ne,i as _e,n as Ht,bU as at,bV as rt,B as Zt,aP as Ce,bW as ye,aG as st,bj as Kt,bX as Wt,aW as Qt,S as Jt,bF as ea,by as ta,a3 as Ie,U as aa,bP as ra,bY as sa,bQ as na}from"./ui-vuw2n6JC.js";const Fe=50,Ye=100,Xe=1,De=4,oa=({placeId:t,initialIndex:r=0,isOpen:s,onClose:m,title:c="Galer√≠a de im√°genes"})=>{const[i,d]=a.useState(r),[g,u]=a.useState(1),[N,C]=a.useState(0),[E,R]=a.useState(!1),[w,v]=a.useState({x:0,y:0}),[k,_]=a.useState({x:0,y:0}),[L,Y]=a.useState(!0),[x,A]=a.useState([]),[J,j]=a.useState(!1),[b,y]=a.useState(null),n=a.useRef({x:0,y:0,time:0,distance:0}),f=a.useRef({x:0,y:0,time:0}),S=a.useRef(null),$=a.useRef(0),O=a.useRef(!1),X=a.useRef([]),{getPlaceGallery:oe}=Qe(),q=x[i],H=x.length>1;a.useEffect(()=>{(async()=>{if(!(!s||!t))try{j(!0),y(null);const z=await oe(t);A(z||[]),r>=(z?.length||0)?d(0):d(r)}catch{y("Error al cargar la galer√≠a de im√°genes"),A([])}finally{j(!1)}})()},[s,t,oe,r]),a.useEffect(()=>{if(s&&x.length>0){u(1),C(0),_({x:0,y:0}),Y(!0);const h=setTimeout(()=>{Y(!1)},3e3);return()=>clearTimeout(h)}},[s,i,x.length]),a.useEffect(()=>{if(x.length>0){Y(!0);const h=setTimeout(()=>{Y(!1)},2e3);return()=>clearTimeout(h)}},[i,x.length]);const B=a.useCallback(()=>{u(1),C(0),_({x:0,y:0})},[]),M=a.useCallback(()=>{H&&(d(h=>h===0?x.length-1:h-1),B())},[H,B,x.length]),V=a.useCallback(()=>{H&&(d(h=>h===x.length-1?0:h+1),B())},[H,B,x.length]),W=a.useCallback(()=>{u(h=>Math.min(h+.25,De))},[]),T=a.useCallback(()=>{u(h=>{const z=Math.max(h-.25,Xe);return z===1&&_({x:0,y:0}),z})},[]),re=a.useCallback(()=>{C(h=>(h+90)%360)},[]),o=a.useCallback(h=>{h.stopPropagation(),g>1?B():u(2.5),Y(!0);const z=setTimeout(()=>{Y(!1)},3e3);return()=>clearTimeout(z)},[g,B]),l=a.useCallback(h=>{h.stopPropagation(),O.current=!0;const z=Array.from(h.touches);if(X.current=z.map(F=>({x:F.clientX,y:F.clientY})),z.length===1){const F=z[0];n.current={x:F.clientX,y:F.clientY,time:Date.now(),distance:0}}else z.length===2&&h.preventDefault()},[]),p=a.useCallback(h=>{if(!O.current)return;const z=Array.from(h.touches);if(z.length===1&&g===1){const F=z[0];f.current={x:F.clientX,y:F.clientY,time:Date.now()}}else if(z.length===2){h.preventDefault(),h.stopPropagation();const[F,ee]=z,te=X.current;if(te.length===2){const ie=Math.sqrt(Math.pow(F.clientX-ee.clientX,2)+Math.pow(F.clientY-ee.clientY,2)),ce=Math.sqrt(Math.pow(te[0].x-te[1].x,2)+Math.pow(te[0].y-te[1].y,2)),de=ie/ce,he=Math.max(Xe,Math.min(De,g*de));u(he),X.current=z.map(ge=>({x:ge.clientX,y:ge.clientY}))}}},[g]),D=a.useCallback(h=>{if(!O.current)return;h.stopPropagation();const{x:z,y:F}=n.current,{x:ee,y:te}=f.current,ie=ee-z,ce=te-F,de=f.current.time-n.current.time;if(g===1&&de<300){const xe=Math.abs(ie),ke=Math.abs(ce);xe>ke&&xe>Fe?(h.preventDefault(),ie>0?M():V()):ce>Ye&&ke>xe&&(h.preventDefault(),m())}const he=Date.now(),ge=he-$.current;ge<300&&ge>0&&(h.preventDefault(),g>1?B():u(2.5)),$.current=he,O.current=!1,X.current=[]},[g,M,V,m,B]),U=a.useCallback(h=>{h.stopPropagation(),g<=1?(n.current={x:h.clientX,y:h.clientY,time:Date.now(),distance:0},R(!0)):(R(!0),v({x:h.clientX-k.x,y:h.clientY-k.y}))},[g,k.x,k.y]),le=a.useCallback(h=>{if(E)if(g<=1)f.current={x:h.clientX,y:h.clientY,time:Date.now()};else{const z=h.clientX-w.x,F=h.clientY-w.y,ee=(g-1)*150;_({x:Math.max(Math.min(z,ee),-ee),y:Math.max(Math.min(F,ee),-ee)})}},[E,g,w.x,w.y]),Z=a.useCallback(()=>{if(E){if(g<=1){const{x:h,y:z}=n.current,{x:F,y:ee}=f.current,te=F-h,ie=ee-z,ce=Math.abs(te),de=Math.abs(ie);ce>de&&ce>Fe?te>0?M():V():ie>Ye&&de>ce&&m()}R(!1)}},[E,g,M,V,m]),Q=a.useCallback(()=>{if(!q)return;const h=document.createElement("a");h.href=q.url_foto,h.download=`imagen-${i+1}.jpg`,document.body.appendChild(h),h.click(),document.body.removeChild(h)},[q,i]),me=a.useCallback(h=>{h.target===h.currentTarget&&!O.current&&m()},[m]);return a.useEffect(()=>{const h=z=>{if(!(!s||x.length===0))switch(z.key){case"Escape":m();break;case"ArrowLeft":M();break;case"ArrowRight":V();break;case"+":case"=":W();break;case"-":T();break;case"r":case"R":re();break;case"0":B();break;case" ":Y(F=>!F);break}};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[s,x.length,m,M,V,W,T,re,B]),s?J?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx(Te,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Cargando galer√≠a..."})]})}):b?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:m,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"‚ùå Error"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:b}),e.jsx(G,{onClick:m,className:"bg-red-600 hover:bg-red-700",children:"Cerrar"})]})}):!q||x.length===0?e.jsx("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:m,children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("p",{className:"text-lg mb-4",children:"üì∑"}),e.jsx("p",{className:"text-sm text-gray-300",children:"No hay im√°genes en la galer√≠a"}),e.jsx(G,{onClick:m,className:"mt-4 bg-gray-600 hover:bg-gray-700",children:"Cerrar"})]})}):e.jsxs("div",{ref:S,className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 touch-none",onClick:me,children:[L&&e.jsx("button",{onClick:m,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-40 bg-black/50 rounded-full p-2 backdrop-blur-sm",children:e.jsx(Oe,{className:"w-8 h-8"})}),L&&e.jsxs("div",{className:"absolute top-4 left-4 z-40 flex items-center gap-2 bg-black/50 rounded-lg p-3 backdrop-blur-sm",children:[e.jsx(G,{variant:"ghost",size:"icon",onClick:Q,className:"text-white hover:bg-white/20",title:"Descargar imagen",children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:re,className:"text-white hover:bg-white/20",title:"Rotar imagen (R)",children:e.jsx(Re,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:T,disabled:g<=1,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Zoom out (-)",children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:W,disabled:g>=De,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Zoom in (+)",children:e.jsx(Ot,{className:"w-4 h-4"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:B,disabled:g===1&&N===0,className:"text-white hover:bg-white/20 disabled:opacity-50",title:"Reset transformaci√≥n (0)",children:e.jsx("span",{className:"text-sm",children:"‚ü≤"})})]}),H&&L&&e.jsxs(e.Fragment,{children:[e.jsx(G,{variant:"ghost",size:"icon",onClick:M,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-40 text-white hover:bg-white/20 bg-black/50 backdrop-blur-sm",title:"Imagen anterior (‚Üê)",children:e.jsx(Ut,{className:"w-8 h-8"})}),e.jsx(G,{variant:"ghost",size:"icon",onClick:V,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-40 text-white hover:bg-white/20 bg-black/50 backdrop-blur-sm",title:"Siguiente imagen (‚Üí)",children:e.jsx(Bt,{className:"w-8 h-8"})})]}),e.jsx("div",{className:"relative max-w-full max-h-full flex items-center justify-center",onDoubleClick:o,onTouchStart:l,onTouchMove:p,onTouchEnd:D,onMouseDown:U,onMouseMove:le,onMouseUp:Z,onMouseLeave:Z,children:e.jsx("div",{className:K("relative transition-transform duration-200 ease-out",E&&g<=1?"cursor-grabbing":g>1?"cursor-grab":"cursor-default"),style:{transform:`scale(${g}) rotate(${N}deg) translate(${k.x}px, ${k.y}px)`,transformOrigin:"center center",transition:E?"none":"transform 0.2s ease-out"},children:e.jsx("img",{src:q.url_foto,alt:q.descripcion,className:"max-w-screen max-h-screen object-contain rounded-lg shadow-lg select-none",draggable:!1,onDragStart:h=>h.preventDefault()})})}),L&&e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-40 max-w-2xl w-full px-4",children:e.jsxs("div",{className:"bg-black/70 backdrop-blur-sm text-white p-4 rounded-lg text-center",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c}),H&&e.jsxs("span",{className:"text-sm text-gray-300 bg-black/50 px-2 py-1 rounded",children:[i+1," / ",x.length]})]}),q.descripcion&&e.jsx("p",{className:"text-sm leading-relaxed",children:q.descripcion}),(g!==1||N!==0)&&e.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-xs text-gray-300",children:[g>1&&e.jsxs("span",{children:["Zoom: ",g.toFixed(1),"x"]}),N!==0&&e.jsxs("span",{children:["Rotaci√≥n: ",N,"¬∞"]})]})]})}),!L&&H&&e.jsx("div",{className:"absolute bottom-4 right-4 z-40 bg-black/70 text-white px-3 py-2 rounded-lg text-sm backdrop-blur-sm",children:e.jsxs("span",{children:[i+1," / ",x.length]})}),!L&&e.jsxs("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-40 bg-black/70 text-white px-4 py-2 rounded-lg text-sm backdrop-blur-sm text-center max-w-xs",children:[H&&e.jsx("p",{className:"mb-1",children:"‚Üê Desliza ‚Üí para navegar"}),e.jsx("p",{className:"mb-1",children:"‚Üì Desliza abajo para cerrar"})]}),L&&e.jsxs("div",{className:"absolute top-20 left-1/2 transform -translate-x-1/2 z-40 bg-black/70 text-white px-4 py-2 rounded-lg text-sm backdrop-blur-sm text-center",children:[e.jsxs("p",{children:["Doble clic para ",g>1?"resetear":"zoom"," ‚Ä¢ Espacio para controles ‚Ä¢ ESC para salir"]}),e.jsx("p",{className:"text-xs mt-1",children:"‚Üê ‚Üí para navegar ‚Ä¢ Click fuera para cerrar ‚Ä¢ Rueda del rat√≥n para zoom"})]})]}):null},la=t=>{switch(t){case"satellite":return e.jsx(Yt,{className:"h-4 w-4"});case"hybrid":return e.jsx(Ft,{className:"h-4 w-4"});case"terrain":return e.jsx(qt,{className:"h-4 w-4"});default:return e.jsx(ue,{className:"h-4 w-4"})}},He=t=>{switch(t){case"roadmap":return"Mapa";case"satellite":return"Sat√©lite";case"hybrid":return"H√≠brido";case"terrain":return"Relieve";default:return"Mapa"}},ia=t=>{switch(t){case"DRIVING":return e.jsx(pe,{className:"h-4 w-4"});case"WALKING":return e.jsx(Be,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Ue,{className:"h-4 w-4"});default:return e.jsx(pe,{className:"h-4 w-4"})}},ca=t=>{switch(t){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},da=t=>{switch(t){case"via_transport_1":return"v√≠a terminal principal";case"via_transport_2":return"v√≠a terminal secundaria";case"current_to_direct":return"desde tu ubicaci√≥n";case"current_to_transport":return"desde tu ubicaci√≥n v√≠a terminal";default:return"v√≠a terminal"}},ua=({currentMapType:t,onMapTypeChange:r,isLoading:s,onCalculateRoute:m,routeInfo:c,travelMode:i,routeType:d,onToggleSidebar:g})=>{const u=N=>t===N?"default":"outline";return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[g&&e.jsx(G,{variant:"outline",size:"sm",onClick:g,className:"lg:hidden gap-2 border-green-200 text-green-700 hover:bg-green-100",children:e.jsx(et,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["roadmap","satellite","hybrid","terrain"].map(N=>e.jsxs(G,{variant:u(N),size:"sm",onClick:()=>r(N),className:"gap-2 border-green-200 text-green-700 hover:bg-green-100",children:[la(N),e.jsx("span",{className:"hidden sm:inline",children:He(N)})]},N))})]}),e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsx(ae,{variant:"secondary",className:"bg-green-100 text-green-800 border-green-200 hidden sm:flex",children:He(t)}),c&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 text-sm text-green-700",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsxs("span",{className:"hidden lg:inline",children:[da(d)," ‚Ä¢ ",c.distance," ‚Ä¢ ",c.duration]}),e.jsxs(ae,{variant:"outline",className:"text-xs",children:[ia(i),e.jsx("span",{className:"hidden xs:inline",children:ca(i)})]})]}),e.jsxs(G,{onClick:m,disabled:s,size:"sm",className:"gap-2 bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(Vt,{className:`h-4 w-4 ${s?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:s?"Calculando...":"Calcular"})]})]})]})};var qe="Radio",[ma,nt]=Ve(qe),[ga,ha]=ma(qe),ot=a.forwardRef((t,r)=>{const{__scopeRadio:s,name:m,checked:c=!1,required:i,disabled:d,value:g="on",onCheck:u,form:N,...C}=t,[E,R]=a.useState(null),w=Ne(r,_=>R(_)),v=a.useRef(!1),k=E?N||!!E.closest("form"):!0;return e.jsxs(ga,{scope:s,checked:c,disabled:d,children:[e.jsx(fe.button,{type:"button",role:"radio","aria-checked":c,"data-state":dt(c),"data-disabled":d?"":void 0,disabled:d,value:g,...C,ref:w,onClick:_e(t.onClick,_=>{c||u?.(),k&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})}),k&&e.jsx(ct,{control:E,bubbles:!v.current,name:m,value:g,checked:c,required:i,disabled:d,form:N,style:{transform:"translateX(-100%)"}})]})});ot.displayName=qe;var lt="RadioIndicator",it=a.forwardRef((t,r)=>{const{__scopeRadio:s,forceMount:m,...c}=t,i=ha(lt,s);return e.jsx(Ht,{present:m||i.checked,children:e.jsx(fe.span,{"data-state":dt(i.checked),"data-disabled":i.disabled?"":void 0,...c,ref:r})})});it.displayName=lt;var xa="RadioBubbleInput",ct=a.forwardRef(({__scopeRadio:t,control:r,checked:s,bubbles:m=!0,...c},i)=>{const d=a.useRef(null),g=Ne(d,i),u=at(s),N=rt(r);return a.useEffect(()=>{const C=d.current;if(!C)return;const E=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(E,"checked").set;if(u!==s&&w){const v=new Event("click",{bubbles:m});w.call(C,s),C.dispatchEvent(v)}},[u,s,m]),e.jsx(fe.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:g,style:{...c.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ct.displayName=xa;function dt(t){return t?"checked":"unchecked"}var ba=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Me="RadioGroup",[pa]=Ve(Me,[We,nt]),ut=We(),mt=nt(),[fa,va]=pa(Me),gt=a.forwardRef((t,r)=>{const{__scopeRadioGroup:s,name:m,defaultValue:c,value:i,required:d=!1,disabled:g=!1,orientation:u,dir:N,loop:C=!0,onValueChange:E,...R}=t,w=ut(s),v=Xt(N),[k,_]=tt({prop:i,defaultProp:c??null,onChange:E,caller:Me});return e.jsx(fa,{scope:s,name:m,required:d,disabled:g,value:k,onValueChange:_,children:e.jsx(Et,{asChild:!0,...w,orientation:u,dir:v,loop:C,children:e.jsx(fe.div,{role:"radiogroup","aria-required":d,"aria-orientation":u,"data-disabled":g?"":void 0,dir:v,...R,ref:r})})})});gt.displayName=Me;var ht="RadioGroupItem",xt=a.forwardRef((t,r)=>{const{__scopeRadioGroup:s,disabled:m,...c}=t,i=va(ht,s),d=i.disabled||m,g=ut(s),u=mt(s),N=a.useRef(null),C=Ne(r,N),E=i.value===c.value,R=a.useRef(!1);return a.useEffect(()=>{const w=k=>{ba.includes(k.key)&&(R.current=!0)},v=()=>R.current=!1;return document.addEventListener("keydown",w),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",w),document.removeEventListener("keyup",v)}},[]),e.jsx(Dt,{asChild:!0,...g,focusable:!d,active:E,children:e.jsx(ot,{disabled:d,required:i.required,checked:E,...u,...c,name:i.name,ref:C,onCheck:()=>i.onValueChange(c.value),onKeyDown:_e(w=>{w.key==="Enter"&&w.preventDefault()}),onFocus:_e(c.onFocus,()=>{R.current&&N.current?.click()})})})});xt.displayName=ht;var wa="RadioGroupIndicator",bt=a.forwardRef((t,r)=>{const{__scopeRadioGroup:s,...m}=t,c=mt(s);return e.jsx(it,{...c,...m,ref:r})});bt.displayName=wa;var pt=gt,ft=xt,ya=bt;const vt=a.forwardRef(({className:t,...r},s)=>e.jsx(pt,{className:K("grid gap-2",t),...r,ref:s}));vt.displayName=pt.displayName;const wt=a.forwardRef(({className:t,...r},s)=>e.jsx(ft,{ref:s,className:K("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:e.jsx(ya,{className:"flex items-center justify-center",children:e.jsx(Zt,{className:"h-2.5 w-2.5 fill-current text-current"})})}));wt.displayName=ft.displayName;var Ee="Switch",[ja]=Ve(Ee),[Na,ka]=ja(Ee),yt=a.forwardRef((t,r)=>{const{__scopeSwitch:s,name:m,checked:c,defaultChecked:i,required:d,disabled:g,value:u="on",onCheckedChange:N,form:C,...E}=t,[R,w]=a.useState(null),v=Ne(r,x=>w(x)),k=a.useRef(!1),_=R?C||!!R.closest("form"):!0,[L,Y]=tt({prop:c,defaultProp:i??!1,onChange:N,caller:Ee});return e.jsxs(Na,{scope:s,checked:L,disabled:g,children:[e.jsx(fe.button,{type:"button",role:"switch","aria-checked":L,"aria-required":d,"data-state":Ct(L),"data-disabled":g?"":void 0,disabled:g,value:u,...E,ref:v,onClick:_e(t.onClick,x=>{Y(A=>!A),_&&(k.current=x.isPropagationStopped(),k.current||x.stopPropagation())})}),_&&e.jsx(kt,{control:R,bubbles:!k.current,name:m,value:u,checked:L,required:d,disabled:g,form:C,style:{transform:"translateX(-100%)"}})]})});yt.displayName=Ee;var jt="SwitchThumb",Nt=a.forwardRef((t,r)=>{const{__scopeSwitch:s,...m}=t,c=ka(jt,s);return e.jsx(fe.span,{"data-state":Ct(c.checked),"data-disabled":c.disabled?"":void 0,...m,ref:r})});Nt.displayName=jt;var Ca="SwitchBubbleInput",kt=a.forwardRef(({__scopeSwitch:t,control:r,checked:s,bubbles:m=!0,...c},i)=>{const d=a.useRef(null),g=Ne(d,i),u=at(s),N=rt(r);return a.useEffect(()=>{const C=d.current;if(!C)return;const E=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(E,"checked").set;if(u!==s&&w){const v=new Event("click",{bubbles:m});w.call(C,s),C.dispatchEvent(v)}},[u,s,m]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...c,tabIndex:-1,ref:g,style:{...c.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});kt.displayName=Ca;function Ct(t){return t?"checked":"unchecked"}var Rt=yt,Ra=Nt;const _t=a.forwardRef(({className:t,...r},s)=>e.jsx(Rt,{className:K("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...r,ref:s,children:e.jsx(Ra,{className:K("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));_t.displayName=Rt.displayName;const _a=t=>{switch(t){case"DRIVING":return e.jsx(pe,{className:"h-4 w-4"});case"WALKING":return e.jsx(Be,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Ue,{className:"h-4 w-4"});default:return e.jsx(pe,{className:"h-4 w-4"})}},Ze=t=>{switch(t){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},Ke=({routeType:t,travelMode:r,routeInfo:s,routeSegments:m,activeSegment:c,showRoute:i,userLocation:d,hasLocationPermission:g,origin:u,destination:N,transportBase:C,transportBase2:E,onRouteTypeChange:R,onTravelModeChange:w,onRouteVisibilityChange:v,onSegmentChange:k,onClose:_})=>{const L=[{value:"via_transport_1",label:"Desde Terminal Principal",description:"Terminal Principal ‚Üí Destino",icon:Ce,requiresLocation:!1,badgeVariant:"default"},{value:"via_transport_2",label:"Desde Terminal Secundaria",description:"Terminal Secundaria ‚Üí Destino",icon:Ce,requiresLocation:!1,badgeVariant:"outline"},{value:"current_to_direct",label:"Desde mi ubicaci√≥n",description:"Tu ubicaci√≥n ‚Üí Destino",icon:ye,requiresLocation:!0,badgeVariant:"outline"},{value:"current_to_transport",label:"Mi ubicaci√≥n ‚Üí Terminal",description:"Tu ubicaci√≥n ‚Üí Terminal ‚Üí Destino",icon:ye,requiresLocation:!0,badgeVariant:"outline"}],Y=m.length>1;return e.jsxs("div",{className:"space-y-4",children:[_&&e.jsxs("div",{className:"flex items-center justify-between lg:hidden",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:"Opciones de Ruta"}),e.jsx(G,{variant:"ghost",size:"sm",onClick:_,children:e.jsx(Oe,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:[e.jsx(be,{className:"text-sm font-medium text-blue-800 mb-3 block",children:"Tipo de Ruta:"}),e.jsx(vt,{value:t,onValueChange:x=>R(x),className:"space-y-3",children:L.map(x=>{const A=x.requiresLocation&&!g&&!d,J=(x.value==="current_to_direct"||x.value==="current_to_transport")&&d;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{value:x.value,id:x.value,disabled:A}),e.jsxs(be,{htmlFor:x.value,className:`flex items-center gap-2 cursor-pointer flex-1 ${A?"opacity-60 cursor-not-allowed":""}`,children:[e.jsx(x.icon,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:x.label}),e.jsx(ae,{variant:x.badgeVariant,className:`text-xs w-fit ${x.value==="via_transport_1"?"bg-green-100 text-green-800 border-green-200":""}`,children:x.description})]}),A&&e.jsx(ae,{variant:"secondary",className:"mt-1 text-xs bg-amber-100 text-amber-800",children:"Permisos requeridos"}),J&&e.jsx(ae,{variant:"secondary",className:"mt-1 text-xs bg-blue-100 text-blue-800",children:"Usando tu ubicaci√≥n"})]})]})]},x.value)})}),d&&e.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-xs text-blue-700 flex items-center gap-1",children:[e.jsx(ye,{className:"h-3 w-3"}),"üìç Usando tu ubicaci√≥n actual"]})})]}),Y&&s&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-purple-200/50",children:[e.jsx(be,{className:"text-sm font-medium text-purple-800 mb-3 block",children:"Ver Segmento:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(G,{size:"sm",variant:c==="all"?"default":"outline",onClick:()=>k("all"),className:`gap-2 ${c==="all"?"bg-purple-600 text-white":"border-purple-200 text-purple-700 hover:bg-purple-50"}`,children:[e.jsx(je,{className:"h-4 w-4"}),"Todas las etapas"]}),m.map((x,A)=>e.jsx(G,{size:"sm",variant:c===A?"default":"outline",onClick:()=>k(A),className:`gap-2 ${c===A?"bg-purple-600 text-white":"border-purple-200 text-purple-700 hover:bg-purple-50"}`,children:e.jsxs("span",{children:["Etapa ",A+1]})},A))]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-green-200/50",children:[e.jsxs("h3",{className:"font-semibold text-green-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ue,{className:"h-4 w-4"}),(t==="current_to_direct"||t==="current_to_transport")&&d?"Tu Ubicaci√≥n Actual":"Origen"]}),e.jsx("p",{className:"text-xs text-green-700 line-clamp-2",children:(t==="current_to_direct"||t==="current_to_transport")&&d?d.address||"Ubicaci√≥n detectada":u.address})]}),(t==="via_transport_1"||t==="current_to_transport")&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-purple-200/50",children:[e.jsxs("h3",{className:"font-semibold text-purple-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Terminal Principal"]}),e.jsx("p",{className:"text-xs text-purple-700 line-clamp-2",children:C.address})]}),t==="via_transport_2"&&E&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-indigo-200/50",children:[e.jsxs("h3",{className:"font-semibold text-indigo-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(Ce,{className:"h-4 w-4"}),"Terminal Secundaria"]}),e.jsx("p",{className:"text-xs text-indigo-700 line-clamp-2",children:E.address})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 border border-red-200/50",children:[e.jsxs("h3",{className:"font-semibold text-red-800 mb-2 flex items-center gap-2 text-sm",children:[e.jsx(ue,{className:"h-4 w-4"}),"Destino"]}),e.jsx("p",{className:"text-xs text-red-700 line-clamp-2",children:N.address})]})]}),s&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-blue-200/50",children:[e.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Informaci√≥n de Ruta"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Distancia total:"}),e.jsx(ae,{variant:"outline",className:"bg-blue-100 text-blue-800",children:s.distance})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Duraci√≥n total:"}),e.jsxs(ae,{variant:"outline",className:"bg-green-100 text-green-800",children:[e.jsx(st,{className:"h-3 w-3 mr-1"}),s.duration]})]})]}),m.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(be,{className:"text-sm font-medium text-blue-800 mb-2 block",children:"Segmentos de la ruta:"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:m.map((x,A)=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"font-medium block",children:["Etapa ",A+1]}),e.jsx("div",{className:"text-gray-600 text-xs mt-1 line-clamp-2",children:x.instructions}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[x.distance," ‚Ä¢ ",x.duration]})]}),e.jsx(ae,{variant:"outline",className:"text-xs ml-2",children:Ze(x.mode)})]},A))})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(be,{className:"text-sm font-medium text-blue-800 mb-2 block",children:"Modo de transporte:"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["DRIVING","WALKING","BICYCLING"].map(x=>e.jsxs(G,{size:"sm",variant:r===x?"default":"outline",onClick:()=>w(x),className:`gap-2 flex-1 min-w-[80px] ${r===x?"bg-blue-600 text-white":"border-blue-200 text-blue-700 hover:bg-blue-50"}`,children:[_a(x),e.jsx("span",{className:"hidden xs:inline",children:Ze(x)})]},x))})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs(be,{htmlFor:"show-route",className:"text-sm font-medium text-blue-800 flex items-center gap-2",children:[i?e.jsx(Kt,{className:"h-4 w-4"}):e.jsx(Wt,{className:"h-4 w-4"}),"Mostrar ruta en el mapa:"]}),e.jsx(_t,{id:"show-route",checked:i,onCheckedChange:v})]})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-4 border border-gray-200/50",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3 text-sm",children:"Leyenda"}),e.jsxs("div",{className:"space-y-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${(t==="current_to_direct"||t==="current_to_transport")&&d?"bg-blue-500":"bg-green-500"}`}),e.jsx("span",{className:"text-gray-700",children:(t==="current_to_direct"||t==="current_to_transport")&&d?"Tu ubicaci√≥n":"Origen"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Destino"})]}),(t==="via_transport_1"||t==="current_to_transport")&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Terminal Principal"})]}),t==="via_transport_2"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-indigo-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Terminal Secundaria"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Ruta"})]})]})]})]})},Sa=t=>t==="satellite"||t==="hybrid"?[{elementType:"labels",stylers:[{visibility:"on"}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"},{weight:1}]},{elementType:"labels.text.stroke",stylers:[{color:"#000000"},{weight:2}]}]:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f8fafc"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#64748b"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#e0f2fe"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f1f5f9"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#cbd5e1"}]}],St=a.forwardRef(({origin:t,destination:r,routeType:s,currentMapType:m,showRoute:c,userLocation:i,routeSegments:d,isLoading:g,mapError:u,onMapInitialized:N,onMapError:C,onReload:E},R)=>{const w=a.useRef(null),v=a.useRef(null),k=a.useRef(null),_=a.useRef([]),L=a.useRef(!1);a.useImperativeHandle(R,()=>w.current);const Y=a.useCallback(()=>{_.current.forEach(b=>{b&&b.setMap&&b.setMap(null)}),_.current=[]},[]),x=a.useCallback(b=>{if(!(!b||!window.google))try{Y();const y=(s==="current_to_direct"||s==="current_to_transport")&&i,n=y?{lat:i.lat,lng:i.lng}:{lat:t.lat,lng:t.lng},f=y?"Tu ubicaci√≥n actual":`Origen: ${t.address}`,S=y?"#3b82f6":"#10b981",$=new window.google.maps.Marker({position:n,map:b,title:f,icon:{url:`data:image/svg+xml;base64,${btoa(`
            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0C10.48 0 6 4.48 6 10C6 17.08 16 40 16 40C16 40 26 17.08 26 10C26 4.48 21.52 0 16 0Z" fill="${S}"/>
              <circle cx="16" cy="10" r="5" fill="white"/>
              <circle cx="16" cy="10" r="3" fill="${S}"/>
            </svg>
          `)}`,scaledSize:new window.google.maps.Size(32,40),anchor:new window.google.maps.Point(16,40)}});_.current.push($);const O=new window.google.maps.Marker({position:{lat:r.lat,lng:r.lng},map:b,title:`Destino: ${r.address}`,icon:{url:`data:image/svg+xml;base64,${btoa(`
            <svg width="32" height="40" viewBox="0 0 32 40" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 0C10.48 0 6 4.48 6 10C6 17.08 16 40 16 40C16 40 26 17.08 26 10C26 4.48 21.52 0 16 0Z" fill="#ef4444"/>
              <circle cx="16" cy="10" r="5" fill="white"/>
              <circle cx="16" cy="10" r="3" fill="#ef4444"/>
            </svg>
          `)}`,scaledSize:new window.google.maps.Size(32,40),anchor:new window.google.maps.Point(16,40)}});if(_.current.push(O),s==="via_transport_1"||s==="current_to_transport"){const X=new window.google.maps.Marker({position:{lat:19.8758703351958,lng:-97.5889138590976},map:b,title:"Terminal Principal de Transporte Zacapoaxtla",icon:{url:`data:image/svg+xml;base64,${btoa(`
              <svg width="28" height="36" viewBox="0 0 28 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="8" width="20" height="20" rx="2" fill="#8b5cf6"/>
                <circle cx="10" cy="22" r="2" fill="white"/>
                <circle cx="18" cy="22" r="2" fill="white"/>
                <path d="M4 18L4 12L20 12L20 18" fill="#a78bfa"/>
                <rect x="2" y="28" width="24" height="4" rx="1" fill="#8b5cf6"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(28,36),anchor:new window.google.maps.Point(14,36)}});_.current.push(X)}if(s==="via_transport_2"){const X=new window.google.maps.Marker({position:{lat:19.87383634377636,lng:-97.58769273588325},map:b,title:"Terminal Secundaria de Transporte Zacapoaxtla",icon:{url:`data:image/svg+xml;base64,${btoa(`
              <svg width="28" height="36" viewBox="0 0 28 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="4" y="8" width="20" height="20" rx="2" fill="#6366f1"/>
                <circle cx="10" cy="22" r="2" fill="white"/>
                <circle cx="18" cy="22" r="2" fill="white"/>
                <path d="M4 18L4 12L20 12L20 18" fill="#818cf8"/>
                <rect x="2" y="28" width="24" height="4" rx="1" fill="#6366f1"/>
              </svg>
            `)}`,scaledSize:new window.google.maps.Size(28,36),anchor:new window.google.maps.Point(14,36)}});_.current.push(X)}}catch(y){console.error("‚ùå Error agregando marcadores:",y)}},[s,i,t,r,Y]),A=a.useCallback(b=>{if(!(!v.current||!window.google||!k.current))try{k.current.setDirections({routes:[],request:{origin:"",destination:"",travelMode:google.maps.TravelMode.DRIVING}}),b.forEach(n=>{n.startLocation&&n.endLocation&&new window.google.maps.DirectionsService().route({origin:n.startLocation,destination:n.endLocation,travelMode:window.google.maps.TravelMode[n.mode]},(S,$)=>{$==="OK"&&k.current&&S&&k.current.setDirections(S)})});const y=new window.google.maps.LatLngBounds;b.forEach(n=>{n.startLocation&&y.extend(new window.google.maps.LatLng(n.startLocation.lat,n.startLocation.lng)),n.endLocation&&y.extend(new window.google.maps.LatLng(n.endLocation.lat,n.endLocation.lng))}),y.isEmpty()&&(y.extend(new window.google.maps.LatLng(t.lat,t.lng)),y.extend(new window.google.maps.LatLng(r.lat,r.lng)),(s==="via_transport_1"||s==="current_to_transport")&&y.extend(new window.google.maps.LatLng(19.8758703351958,-97.5889138590976)),i&&(s==="current_to_direct"||s==="current_to_transport")&&y.extend(new window.google.maps.LatLng(i.lat,i.lng))),v.current&&v.current.fitBounds(y)}catch(y){console.error("‚ùå Error renderizando ruta:",y)}},[s,i,t,r]),J=a.useCallback(()=>{if(!(!w.current||!window.google||L.current))try{w.current&&(w.current.innerHTML="");const b=[t,r];(s==="via_transport_1"||s==="current_to_transport")&&b.push({lat:19.8758703351958,lng:-97.5889138590976,address:""}),(s==="current_to_direct"||s==="current_to_transport")&&i&&b.push(i);const y=new window.google.maps.LatLngBounds;b.forEach(S=>{y.extend(new window.google.maps.LatLng(S.lat,S.lng))});const n=new window.google.maps.Map(w.current,{center:y.getCenter(),zoom:12,mapTypeId:m,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,mapTypeControl:!0,styles:Sa(m)});v.current=n,n.fitBounds(y);const f=new window.google.maps.DirectionsRenderer({map:c?n:null,suppressMarkers:!0,polylineOptions:{strokeColor:"#3b82f6",strokeOpacity:.8,strokeWeight:6},preserveViewport:!1});k.current=f,x(n),L.current=!0,N(n)}catch(b){const y="Error al inicializar el mapa: "+(b instanceof Error?b.message:"Error desconocido");C(y)}},[t,r,s,m,c,i,x,N,C]),j=a.useCallback(()=>{if(!L.current)if(window.google)setTimeout(()=>J(),100);else{const b=document.createElement("script"),y="AIzaSyAyGMepBWIz2iAe2RZXcXSB27qwPH3tx2Q";b.src=`https://maps.googleapis.com/maps/api/js?key=${y}&libraries=places,geometry`,b.async=!0,b.defer=!0,b.onload=()=>{setTimeout(()=>J(),100)},b.onerror=()=>{C("Error al cargar Google Maps. Verifica tu API key.")},document.head.appendChild(b)}},[J,C]);return a.useEffect(()=>{j()},[j]),a.useEffect(()=>{d.length>0&&L.current&&A(d)},[d,A]),a.useEffect(()=>{k.current&&v.current&&k.current.setMap(c?v.current:null)},[c]),a.useEffect(()=>{L.current&&v.current&&x(v.current)},[s,i,x]),e.jsxs("div",{className:"flex-1 relative rounded-xl overflow-hidden border-2 border-green-200/50 bg-white min-h-0",children:[g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-50/50 z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx(Re,{className:"h-8 w-8 text-green-600 animate-spin"}),e.jsx("p",{className:"text-green-700 font-medium",children:s.includes("current")?"Calculando ruta desde tu ubicaci√≥n...":"Calculando ruta..."})]})}),u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-50/80 z-10",children:e.jsxs("div",{className:"text-center p-6",children:[e.jsx("p",{className:"text-red-600 font-medium mb-2",children:"Error al cargar el mapa"}),e.jsx("p",{className:"text-red-500 text-sm mb-4",children:u}),e.jsxs(G,{onClick:E,className:"gap-2 bg-red-600 hover:bg-red-700",children:[e.jsx(Re,{className:"h-4 w-4"}),"Reintentar"]})]})}),e.jsx("div",{ref:w,className:"w-full h-full",style:{minHeight:"400px"}})]})});St.displayName="MapContainer";const Ma=t=>{switch(t){case"DRIVING":return e.jsx(pe,{className:"h-4 w-4"});case"WALKING":return e.jsx(Be,{className:"h-4 w-4"});case"BICYCLING":return e.jsx(Ue,{className:"h-4 w-4"});default:return e.jsx(pe,{className:"h-4 w-4"})}},Ea=t=>{switch(t){case"DRIVING":return"Auto";case"WALKING":return"Caminando";case"BICYCLING":return"Bicicleta";default:return"Auto"}},Da=t=>{switch(t){case"direct":return"directa";case"via_transport":return"v√≠a terminal";case"current_to_direct":return"desde tu ubicaci√≥n";case"current_to_transport":return"desde tu ubicaci√≥n v√≠a terminal";default:return"directa"}},Pa=({routeInfo:t,routeType:r,travelMode:s,userLocation:m,isLoading:c,onClose:i,onOpenGoogleMaps:d})=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 pt-4 border-t border-green-200/30",children:[e.jsx("div",{className:"text-sm text-green-600 flex-1",children:t?e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-green-600"}),"Ruta ",Da(r)," ‚Ä¢",t.distance," ‚Ä¢ ",t.duration]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ae,{variant:"outline",className:"text-xs",children:[Ma(s),Ea(s)]}),m&&(r==="current_to_direct"||r==="current_to_transport")&&e.jsxs(ae,{variant:"outline",className:"text-xs bg-blue-100 text-blue-800",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"Desde tu ubicaci√≥n"]})]})]}):c?e.jsxs("span",{children:["üîÑ Calculando ruta",r.includes("current")?" desde tu ubicaci√≥n":"","..."]}):e.jsx("span",{children:"üëÜ Selecciona opciones y calcula la ruta..."})}),e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[e.jsx(G,{variant:"outline",onClick:i,className:"border-green-200 text-green-700 hover:bg-green-50 flex-1 sm:flex-none",children:"Cerrar"}),e.jsxs(G,{onClick:d,className:"gap-2 bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white shadow-lg flex-1 sm:flex-none",disabled:!t,children:[e.jsx(Qt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Abrir en "}),"Google Maps"]})]})]}),Ta=({isOpen:t,onAccept:r,onReject:s,onClose:m})=>e.jsx($e,{open:t,onOpenChange:m,children:e.jsxs(ze,{className:"sm:max-w-md bg-white",children:[e.jsx(Ae,{children:e.jsxs(Ge,{className:"flex items-center gap-2 text-lg",children:[e.jsx(ye,{className:"h-5 w-5 text-blue-600"}),"Acceso a tu ubicaci√≥n"]})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(It,{className:"bg-blue-50 border-blue-200",children:[e.jsx(ue,{className:"h-4 w-4 text-blue-600"}),e.jsx(Lt,{className:"text-blue-800",children:"Para mostrarte rutas desde tu ubicaci√≥n actual, necesitamos tu permiso."})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Jt,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Tu privacidad es importante"}),e.jsx("p",{className:"text-xs",children:"Tu ubicaci√≥n solo se usa para calcular rutas y no se almacena"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ue,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Rutas m√°s precisas"}),e.jsx("p",{className:"text-xs",children:"Obten indicaciones exactas desde donde te encuentras"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ea,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Sin acceso limitado"}),e.jsx("p",{className:"text-xs",children:"Al rechazar, solo podr√°s ver rutas desde puntos fijos"})]})]})]})]}),e.jsxs($t,{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(G,{variant:"outline",onClick:s,className:"flex-1 border-gray-300 text-gray-700 hover:bg-gray-100",children:"Rechazar"}),e.jsx(G,{onClick:r,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:"Permitir ubicaci√≥n"})]})]})}),Ia=()=>{const[t,r]=a.useState(null),[s,m]=a.useState(!1),[c,i]=a.useState(null),[d,g]=a.useState(!1),{toast:u}=Le(),N=a.useCallback(async(j,b)=>{if(!window.google)return"Ubicaci√≥n actual";try{const y=new window.google.maps.Geocoder;return new Promise(n=>{y.geocode({location:{lat:j,lng:b}},(f,S)=>{S==="OK"&&f&&f[0]?n(f[0].formatted_address):n("Ubicaci√≥n actual")})})}catch{return"Ubicaci√≥n actual"}},[]),C=a.useCallback(async()=>{if(!navigator.permissions)return!1;try{return(await navigator.permissions.query({name:"geolocation"})).state==="granted"}catch{return!1}},[]),E=a.useCallback(async()=>{const j=await C();return g(j),j},[C]),R=a.useCallback(async()=>new Promise((j,b)=>{if(!navigator.geolocation){b(new Error("La geolocalizaci√≥n no es soportada por este navegador"));return}m(!0),i(null);const y={enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4};navigator.geolocation.getCurrentPosition(async n=>{try{const{latitude:f,longitude:S}=n.coords,O={address:await N(f,S),lat:f,lng:S};r(O),g(!0),m(!1),j(O)}catch{const{latitude:f,longitude:S}=n.coords,$={address:"Ubicaci√≥n actual",lat:f,lng:S};r($),g(!0),m(!1),j($)}},n=>{m(!1),g(!1);let f="No se pudo obtener la ubicaci√≥n actual. ";switch(n.code){case n.PERMISSION_DENIED:f+="Permiso de ubicaci√≥n denegado.";break;case n.POSITION_UNAVAILABLE:f+="Informaci√≥n de ubicaci√≥n no disponible.";break;case n.TIMEOUT:f+="Tiempo de espera agotado para obtener la ubicaci√≥n.";break;default:f+="Error desconocido al obtener la ubicaci√≥n."}i(f),b(new Error(f))},y)}),[N]),w=a.useCallback(j=>{if(j>=3600){const b=Math.floor(j/3600),y=Math.round(j%3600/60);return`${b} h ${y} min`}else return`${Math.round(j/60)} min`},[]),v=a.useCallback(j=>j>=1e3?`${(j/1e3).toFixed(1)} km`:`${Math.round(j)} m`,[]),k=a.useCallback((j,b)=>{const n=(b.lat-j.lat)*Math.PI/180,f=(b.lng-j.lng)*Math.PI/180,S=Math.sin(n/2)*Math.sin(n/2)+Math.cos(j.lat*Math.PI/180)*Math.cos(b.lat*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 6371*(2*Math.atan2(Math.sqrt(S),Math.sqrt(1-S)))*1e3},[]),_=a.useCallback(async(j,b,y)=>{if(!window.google?.maps?.DirectionsService)throw new Error("Google Maps no est√° disponible");const n=new window.google.maps.DirectionsService;return new Promise((f,S)=>{const $={origin:{lat:j.lat,lng:j.lng},destination:{lat:b.lat,lng:b.lng},travelMode:window.google.maps.TravelMode[y],provideRouteAlternatives:!1};n.route($,(O,X)=>{if(X==="OK"&&O?.routes[0]?.legs){const q=O.routes[0].legs.map(M=>({distance:M.distance?.text||"0 km",duration:M.duration?.text||"0 min",mode:y,instructions:`De ${M.start_address} a ${M.end_address}`,distanceMeters:M.distance?.value||0,durationSeconds:M.duration?.value||0,startLocation:{address:M.start_address,lat:M.start_location.lat(),lng:M.start_location.lng()},endLocation:{address:M.end_address,lat:M.end_location.lat(),lng:M.end_location.lng()}})),H=q.reduce((M,V)=>M+V.distanceMeters,0),B=q.reduce((M,V)=>M+V.durationSeconds,0);f({segments:q,totalDistance:v(H),totalDuration:w(B),totalDistanceMeters:H,totalDurationSeconds:B})}else S(new Error(`Error calculando ruta: ${X}`))})})},[v,w]),L=a.useCallback(async j=>{const b=[];let y=0,n=0;for(const f of j)try{const S=await _(f.origin,f.destination,f.mode);b.push(...S.segments),y+=S.totalDistanceMeters,n+=S.totalDurationSeconds}catch(S){throw console.error("Error en segmento:",S),S}return{segments:b,totalDistance:v(y),totalDuration:w(n),totalDistanceMeters:y,totalDurationSeconds:n}},[_,v,w]),Y=a.useCallback(async j=>{if(j)try{const b=await R();return g(!0),u({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"}),b}catch(b){throw g(!1),u({title:"Error de ubicaci√≥n",description:"No se pudo obtener la ubicaci√≥n despu√©s de conceder permisos",variant:"destructive"}),b}else throw g(!1),u({title:"Permisos denegados",description:"Usando rutas desde puntos fijos",variant:"default"}),new Error("Permiso de ubicaci√≥n denegado por el usuario")},[R,u]),x=a.useCallback((j,b,y,n,f)=>{if(!f||!j)return"via_transport_1";const S=k(j,b),$=k(j,n),O=k(j,y);if($<2e3)return"via_transport_1";if(S<1e3)return"via_transport_1";if(O<5e3)return"current_to_direct";if($<1e4)return"current_to_transport";{const X={via_transport_1:$,via_transport_2:$+500,current_to_direct:O,current_to_transport:$};return Object.entries(X).reduce((q,[H,B])=>B<X[q]?H:q,"via_transport_1")}},[k]),A=a.useCallback((j,b,y,n,f)=>!!(!n||n.routeType!==j||n.travelMode!==b||y&&f&&k(y,f)>100),[k]),J=a.useCallback(j=>{u({title:"Error de ubicaci√≥n",description:j,variant:"destructive"})},[u]);return{userLocation:t,isGettingLocation:s,locationError:c,hasLocationPermission:d,handlePermissionResponse:Y,getUserCurrentLocation:R,calculateRoute:_,calculateComplexRoute:L,determineOptimalRoute:x,initializeLocationPermissions:E,formatDuration:w,shouldRecalculateRoute:A,formatDistance:v,showLocationError:J}},ne={address:"Terminal de Autobuses Zacapoaxtla, Carretera Federal Teziutl√°n-Zacapoaxtla, Zacapoaxtla, Puebla",lat:19.8758703351958,lng:-97.5889138590976},we={address:"Segunda Terminal de Transporte Zacapoaxtla, Centro, Zacapoaxtla, Puebla",lat:19.87383634377636,lng:-97.58769273588325},La=({origin:t,destination:r,buttonText:s="Ver Ruta",className:m})=>{const[c,i]=a.useState(!1),[d,g]=a.useState("DRIVING"),[u,N]=a.useState("current_to_direct"),[C,E]=a.useState(null),[R,w]=a.useState([]),[v,k]=a.useState(0),[_,L]=a.useState(!1),[Y,x]=a.useState(null),[A,J]=a.useState("hybrid"),[j,b]=a.useState(!0),[y,n]=a.useState(!1),[f,S]=a.useState(null),[$,O]=a.useState(!1),X=a.useRef(null),oe=a.useRef(null),q=a.useRef(!1),H=a.useRef(!1),B=a.useRef(null),M=a.useRef(null),V=a.useRef(null),{toast:W}=Le(),{userLocation:T,isGettingLocation:re,locationError:o,hasLocationPermission:l,getUserCurrentLocation:p,handlePermissionResponse:D,initializeLocationPermissions:U,calculateRoute:le,calculateComplexRoute:Z}=Ia(),Q=a.useCallback(async()=>{if(!window.google||H.current){console.log("‚è∏Ô∏è  Calculaci√≥n omitida - Google Maps no disponible o ya calculando");return}H.current=!0,L(!0),x(null);try{if((u==="current_to_direct"||u==="current_to_transport")&&!l&&!T)throw new Error("Se requiere permiso de ubicaci√≥n para esta ruta.");let I;switch(console.log("üìç Calculando ruta:",{routeType:u,travelMode:d}),u){case"via_transport_1":I=await le(ne,r,d);break;case"via_transport_2":I=await le(we,r,d);break;case"current_to_direct":if(!T)throw new Error("Se requiere ubicaci√≥n del usuario");I=await le(T,r,d);break;case"current_to_transport":if(!T)throw new Error("Se requiere ubicaci√≥n del usuario");I=await Z([{origin:T,destination:ne,mode:d},{origin:ne,destination:r,mode:d}]);break;default:throw new Error("Tipo de ruta no v√°lido")}const se={distance:I.totalDistance,duration:I.totalDuration,startAddress:I.segments[0]?.startLocation?.address||(u.includes("current")&&T?T.address:t.address),endAddress:I.segments[I.segments.length-1]?.endLocation?.address||r.address,steps:I.segments,totalDistanceMeters:I.totalDistanceMeters,totalDurationSeconds:I.totalDurationSeconds,totalDuration:void 0,totalDistance:void 0};w(I.segments),E(se),B.current={routeType:u,travelMode:d,timestamp:Date.now()},M.current&&(M.current.pending=!1),console.log("‚úÖ Ruta calculada exitosamente")}catch(P){console.error("‚ùå Error en calculateOptimalRoute:",P);const I=P instanceof Error?P.message:"Error desconocido";M.current&&(M.current.pending=!1),!I.includes("ubicaci√≥n")&&!I.includes("segmento")&&(E(null),w([])),I.includes("ubicaci√≥n")||W({title:"Error en c√°lculo de ruta",description:I,variant:"destructive"})}finally{L(!1),H.current=!1}},[u,d,l,T,t,r,le,Z,W]);a.useEffect(()=>{c&&u==="current_to_direct"&&!T&&l&&(console.log("üìç Inicializando ubicaci√≥n para ruta por defecto..."),p().catch(P=>{console.log("‚ö†Ô∏è No se pudo obtener ubicaci√≥n autom√°tica:",P.message),N("via_transport_1")}))},[c,u,T,l,p]),a.useEffect(()=>{if(!c||!q.current)return;if((()=>{if(H.current)return!1;const I={routeType:u,travelMode:d},se=B.current;return!(se&&se.routeType===I.routeType&&se.travelMode===I.travelMode)})()){console.log("üîÑ Efecto principal - Calculando ruta:",{routeType:u,travelMode:d});const I=u.includes("current")&&!T?1e3:0;setTimeout(()=>{Q()},I)}},[Q,c,u,d,T]),a.useEffect(()=>{!c||!q.current||M.current?.pending&&(console.log("üîÑ Procesando cambio de modo de transporte:",M.current.mode),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{M.current?.pending&&(Q(),M.current.pending=!1)},300))},[d,c,Q]),a.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]);const me=a.useCallback(P=>{P!==d&&(console.log("üöó Cambiando modo de transporte a:",P),M.current={mode:P,timestamp:Date.now(),pending:!0},g(P))},[d]),h=a.useCallback(async P=>{const I=P==="current_to_direct"||P==="current_to_transport";if(I&&!l&&!T)S(()=>async()=>{N(P),k(0);try{await p()}catch(se){console.error("Error obteniendo ubicaci√≥n:",se),N("via_transport_1")}}),n(!0);else if(N(P),k(0),I&&l&&!T)try{await p()}catch(se){console.error("Error obteniendo ubicaci√≥n:",se),N("via_transport_1")}},[l,T,p]),z=a.useCallback(P=>{k(P)},[]),F=a.useCallback(()=>v==="all"?R:R.filter((P,I)=>I===v),[R,v]),ee=a.useCallback(async()=>{if(!re)try{if(!l){n(!0);return}await p(),W({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"})}catch(P){console.error("Error obteniendo ubicaci√≥n:",P),W({title:"Error de ubicaci√≥n",description:o||"No se pudo obtener la ubicaci√≥n",variant:"destructive"})}},[p,W,o,re,l]),te=a.useCallback(async P=>{if(n(!1),P)try{await D(!0),await p(),W({title:"Ubicaci√≥n obtenida",description:"Se ha obtenido tu ubicaci√≥n actual correctamente",variant:"default"})}catch(I){console.error("Error obteniendo ubicaci√≥n despu√©s de permisos:",I),W({title:"Error de ubicaci√≥n",description:"No se pudo obtener la ubicaci√≥n despu√©s de conceder permisos",variant:"destructive"})}else W({title:"Permisos denegados",description:"Usando rutas desde puntos fijos",variant:"default"});f&&setTimeout(()=>{f(),S(null)},300)},[D,p,f,W]),ie=a.useCallback(()=>{q.current=!1,B.current=null,M.current=null,x(null),E(null),w([]),V.current&&clearTimeout(V.current)},[]),ce=a.useCallback(P=>{J(P),oe.current&&oe.current.setMapTypeId(P)},[]),de=a.useCallback(()=>{const P="https://www.google.com/maps/dir/";switch(u){case"via_transport_1":return`${P}${t.lat},${t.lng}/${ne.lat},${ne.lng}/${r.lat},${r.lng}`;case"via_transport_2":return`${P}${t.lat},${t.lng}/${we.lat},${we.lng}/${r.lat},${r.lng}`;case"current_to_direct":return T?`${P}${T.lat},${T.lng}/${r.lat},${r.lng}`:`${P}${t.lat},${t.lng}/${r.lat},${r.lng}`;case"current_to_transport":return T?`${P}${T.lat},${T.lng}/${ne.lat},${ne.lng}/${r.lat},${r.lng}`:`${P}${t.lat},${t.lng}/${ne.lat},${ne.lng}/${r.lat},${r.lng}`;default:return`${P}${t.lat},${t.lng}/${r.lat},${r.lng}`}},[u,t,r,T]),he=a.useCallback(()=>{window.open(de(),"_blank")},[de]),ge=a.useCallback(()=>{i(!1),O(!1),M.current=null,V.current&&clearTimeout(V.current)},[]),xe=a.useCallback(()=>{O(!$)},[$]),ke=a.useCallback(P=>{oe.current=P,q.current=!0,(async()=>{try{await U(),B.current||(console.log("üó∫Ô∏è Mapa inicializado, calculando ruta inicial..."),Q())}catch(se){console.error("Error en inicializaci√≥n:",se)}})()},[Q,U]),Mt=()=>e.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 sm:gap-6 min-h-0",children:[e.jsx("div",{className:"hidden lg:block w-96 flex-col gap-4 overflow-y-auto",children:e.jsx(Ke,{routeType:u,travelMode:d,routeInfo:C,routeSegments:R,activeSegment:v,showRoute:j,userLocation:T,hasLocationPermission:l,origin:t,destination:r,transportBase:ne,transportBase2:we,onRouteTypeChange:h,onTravelModeChange:me,onRouteVisibilityChange:b,onSegmentChange:z})}),e.jsxs("div",{className:"flex-1 flex flex-col gap-4 min-h-0",children:[e.jsx(ua,{currentMapType:A,onMapTypeChange:ce,isLoading:_,onCalculateRoute:Q,routeInfo:C,travelMode:d,routeType:u,userLocation:T,onToggleSidebar:xe,showSidebar:$}),e.jsx(St,{ref:X,origin:t,destination:r,routeType:u,travelMode:d,currentMapType:A,showRoute:j,userLocation:T,routeSegments:F(),activeSegment:v,isLoading:_,mapError:Y,onMapInitialized:ke,onMapError:x,onReload:ie})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs($e,{open:c,onOpenChange:i,children:[e.jsx(Je,{asChild:!0,children:e.jsxs(G,{type:"button",variant:"outline",className:K("gap-2 border-green-300 text-green-700 hover:bg-green-50 hover:text-green-800",m),children:[e.jsx(je,{className:"h-4 w-4"}),s]})}),e.jsxs(ze,{className:"max-w-7xl h-[95vh] flex flex-col bg-gradient-to-br from-green-50/80 to-blue-100/80 backdrop-blur-sm border border-green-200/50 shadow-2xl rounded-2xl p-2 sm:p-4 md:p-6",children:[e.jsxs(Ae,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between pb-4 border-b border-green-200/30 gap-2 sm:gap-3",children:[e.jsx(Ge,{className:"text-base sm:text-lg md:text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent text-center sm:text-left w-full sm:w-auto",children:"üó∫Ô∏è C√≥mo Llegar"}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto justify-between sm:justify-start",children:[e.jsxs(G,{variant:"outline",size:"sm",onClick:xe,className:"lg:hidden gap-2 border-green-200 text-green-700 hover:bg-green-50",children:[$?e.jsx(Oe,{className:"h-4 w-4"}):e.jsx(et,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xs:inline",children:"Men√∫"})]}),e.jsxs(G,{variant:"outline",size:"sm",onClick:ee,disabled:re,className:"gap-2 border-blue-200 text-blue-700 hover:bg-blue-100 flex-1 sm:flex-none",children:[e.jsx(ye,{className:`h-4 w-4 ${re?"animate-pulse":""}`}),e.jsx("span",{className:"hidden xs:inline",children:re?"Obteniendo...":"Mi Ubicaci√≥n"})]}),e.jsxs(G,{onClick:ie,disabled:_,variant:"outline",size:"sm",className:"gap-2 border-green-200 text-green-700 hover:bg-green-100 flex-1 sm:flex-none",children:[e.jsx(Re,{className:`h-4 w-4 ${_?"animate-spin":""}`}),e.jsx("span",{className:"hidden xs:inline",children:"Recargar"})]})]})]}),e.jsx(Pt,{open:$,onOpenChange:O,children:e.jsx(Tt,{side:"left",className:"w-[85vw] sm:w-96 p-4 overflow-y-auto bg-gradient-to-b from-green-50/95 to-blue-100/95 backdrop-blur-sm",children:e.jsx(Ke,{routeType:u,travelMode:d,routeInfo:C,routeSegments:R,activeSegment:v,showRoute:j,userLocation:T,hasLocationPermission:l,origin:t,destination:r,transportBase:ne,transportBase2:we,onRouteTypeChange:h,onTravelModeChange:me,onRouteVisibilityChange:b,onSegmentChange:z,onClose:()=>O(!1)})})}),Mt(),e.jsx(Pa,{routeInfo:C,routeType:u,travelMode:d,userLocation:T,isLoading:_,onClose:ge,onOpenGoogleMaps:he})]})]}),e.jsx(Ta,{isOpen:y,onAccept:()=>te(!0),onReject:()=>te(!1),onClose:()=>{n(!1),S(null)}})]})},$a=()=>{const t=a.useMemo(()=>["Naturaleza","Cultura","Cascada","Mirador","Puente","Playa","Historia","Gastronom√≠a","Aventura","Religioso","Arquitectura"],[]),[r,s]=a.useState("all");return{categories:t,selectedCategory:r,setSelectedCategory:s,getCategoryColor:c=>{if(!c)return"bg-gray-500";const i=c.toLowerCase();return i.includes("naturaleza")||i.includes("nature")?"bg-green-600":i.includes("cultura")||i.includes("culture")?"bg-yellow-500":i.includes("cascada")||i.includes("waterfall")?"bg-sky-500":i.includes("historia")||i.includes("history")?"bg-purple-600":i.includes("puente")||i.includes("bridge")?"bg-red-600":i.includes("mirador")||i.includes("viewpoint")?"bg-rose-500":i.includes("ruta")||i.includes("trail")||i.includes("path")?"bg-emerald-500":i.includes("monta√±a")||i.includes("mountain")?"bg-indigo-700":i.includes("rio")||i.includes("r√≠o")||i.includes("river")?"bg-cyan-600":"bg-gray-400"}}},za=({count:t})=>e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:Array.from({length:t}).map((r,s)=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card border border-white/20",children:[e.jsx(ve,{className:"w-full h-64"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx(ve,{className:"h-6 w-3/4"}),e.jsx(ve,{className:"h-4 w-full"}),e.jsx(ve,{className:"h-4 w-2/3"}),e.jsx(ve,{className:"h-10 w-full"})]})]},s))}),Aa=({rating:t,onRatingChange:r,totalRatings:s=0,size:m="md",readonly:c=!1,showProgress:i=!0})=>{const{t:d}=Se(),[g,u]=a.useState(0),[N,C]=a.useState(!1),E={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},R=typeof t=="number"?t:0,w=N&&g>0?g:R;return e.jsxs("div",{className:"flex flex-col gap-2",onMouseEnter:()=>!c&&C(!0),onMouseLeave:()=>!c&&C(!1),children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(v=>e.jsxs("button",{type:"button",onClick:()=>!c&&r?.(v),onMouseEnter:()=>!c&&u(v),disabled:c,className:`relative transition-all duration-200 ${c?"cursor-default":"cursor-pointer hover:scale-125"}`,children:[e.jsx(Ie,{className:E[m],fill:"none",color:"#d1d5db"}),e.jsx("div",{className:"absolute top-0 left-0 overflow-hidden",style:{width:v<=w?"100%":"0%"},children:e.jsx(Ie,{className:E[m],fill:"currentColor",color:v<=w?"#f59e0b":"#d1d5db"})}),!c&&v<=g&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-300 rounded-full blur-[3px] opacity-70"})})]},v)),e.jsxs("span",{className:K("text-sm font-medium ml-2",R>0?"text-amber-700":"text-muted-foreground"),children:[R&&R>0?R.toFixed(1):d("places.rating.noRatings")," "]})]}),i&&!c&&e.jsxs("div",{className:"mt-2 relative",children:[e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx(Pe.div,{className:"h-full bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full",initial:{width:"0%"},animate:{width:`${w/5*100}%`},transition:{duration:.5,ease:"easeOut"}})}),e.jsxs(Pe.div,{className:"absolute -top-6 text-xs font-bold text-amber-600",initial:{opacity:0,x:-10},animate:{opacity:N?1:0,x:N?0:-10},style:{left:`${w/5*100}%`},children:[w,"/5"]}),e.jsx("div",{className:"flex justify-between mt-1",children:[1,2,3,4,5].map(v=>e.jsx("div",{className:`w-1 h-1 rounded-full ${v<=w?"bg-amber-500":"bg-gray-300"}`},v))})]}),s>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s," ",d(s===1?"places.rating.rating":"places.rating.ratings")," "]})]})},Ga=({placeName:t,stats:r,variant:s="default",theme:m="default"})=>{const{t:c}=Se();if(!r)return null;const i={default:{primary:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md hover:from-blue-600 hover:to-indigo-700",secondary:"bg-secondary text-secondary-foreground"},nature:{primary:"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-md hover:from-green-600 hover:to-emerald-700",secondary:"bg-green-200 text-green-800 hover:bg-green-300"},waterfall:{primary:"bg-gradient-to-r from-blue-500 to-cyan-600 text-white shadow-md hover:from-blue-600 hover:to-cyan-700",secondary:"bg-blue-200 text-blue-800 hover:bg-blue-300"},cultural:{primary:"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-md hover:from-amber-600 hover:to-orange-700",secondary:"bg-amber-200 text-amber-800 hover:bg-amber-300"},history:{primary:"bg-gradient-to-r from-purple-500 to-pink-600 text-white shadow-md hover:from-purple-600 hover:to-pink-700",secondary:"bg-purple-200 text-purple-800 hover:bg-purple-300"},bridge:{primary:"bg-gradient-to-r from-gray-700 to-gray-900 text-white shadow-md hover:from-gray-800 hover:to-black",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"},viewpoint:{primary:"bg-gradient-to-r from-yellow-500 to-red-600 text-white shadow-md hover:from-yellow-600 hover:to-red-700",secondary:"bg-yellow-200 text-yellow-800 hover:bg-yellow-300"},trail:{primary:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",secondary:"bg-teal-200 text-teal-800 hover:bg-teal-300"},montain:{primary:"bg-gradient-to-r from-gray-600 to-gray-800 text-white hover:from-gray-700 hover:to-black",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300"},river:{primary:"bg-gradient-to-r from-blue-600 to-blue-800 text-white hover:from-blue-700 hover:to-black",secondary:"bg-blue-200 text-blue-800 hover:bg-blue-300"},path:{primary:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",secondary:"bg-teal-200 text-teal-800 hover:bg-teal-300"}},d=i[m]||i.default,g=d[s||"default"]||d.primary;return e.jsxs($e,{children:[e.jsx(Je,{asChild:!0,children:e.jsxs(G,{variant:s==="primary"?"default":"outline",size:"sm",className:K("mt-2 transition-all duration-300 transform hover:scale-105",g),children:[e.jsx(na,{className:"w-4 h-4 mr-2"}),c("places.rating.stats.viewStats")," "]})}),e.jsxs(ze,{className:"sm:max-w-md bg-white/30 backdrop-blur-sm border border-white/20 p-2 text-gray-900 dark:text-gray-100 dark:bg-black/30 dark:border-gray-700 shadow-lg rounded-md",children:[e.jsx(Ae,{children:e.jsx(Ge,{className:K("text-lg font-bold",{"text-primary-foreground":s==="primary","text-secondary-foreground":s==="secondary"}),children:c("places.rating.stats.title").replace("{{placeName}}",t)})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:K("text-center p-4 rounded-lg",{"bg-primary/20":s==="default","bg-primary/30":s==="primary","bg-secondary/30":s==="secondary"}),children:[e.jsx("p",{className:"text-2xl font-bold",children:r.promedio!==null&&r.promedio!==void 0?Number(r.promedio).toFixed(1):"0.0"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c("places.rating.stats.average")})," "]}),e.jsxs("div",{className:K("text-center p-4 rounded-lg",{"bg-primary/20":s==="default","bg-primary/30":s==="primary","bg-secondary/30":s==="secondary"}),children:[e.jsx("p",{className:"text-2xl font-bold",children:r.total}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c("places.rating.stats.total")})," "]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold",children:[c("places.rating.stats.distribution"),":"]})," ",r.distribucion.map(u=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-16 text-sm text-muted-foreground",children:[u.calificacion," ",u.calificacion===1?c("places.rating.stats.star"):c("places.rating.stats.stars")," "]}),e.jsx("div",{className:"flex-1 bg-secondary rounded-full h-3",children:e.jsx("div",{className:K("rounded-full h-3",{"bg-primary":s==="default","bg-primary-foreground":s==="primary","bg-secondary-foreground":s==="secondary"}),style:{width:`${r.total>0?u.cantidad/r.total*100:0}%`}})}),e.jsxs("div",{className:"w-12 text-sm font-medium text-right",children:[u.cantidad," (",u.porcentaje,"%)"]})]},u.calificacion))]})]})]})]})},Oa=({theme:t})=>{const{t:r}=Se(),s={default:{bg:"bg-gradient-to-r from-blue-100/80 via-indigo-100/80 to-purple-100/80",border:"border-blue-200/30"},nature:{bg:"bg-gradient-to-r from-green-100/80 via-emerald-100/80 to-teal-100/80",border:"border-green-200/30"},waterfall:{bg:"bg-gradient-to-r from-blue-100/80 via-cyan-100/80 to-sky-100/80",border:"border-blue-200/30"},cultural:{bg:"bg-gradient-to-r from-amber-100/80 via-orange-100/80 to-red-100/80",border:"border-amber-200/30"},history:{bg:"bg-gradient-to-r from-purple-100/80 via-pink-100/80 to-red-100/80",border:"border-purple-200/30"},bridge:{bg:"bg-gradient-to-r from-gray-100/80 via-gray-200/80 to-gray-300/80",border:"border-gray-200/30"},viewpoint:{bg:"bg-gradient-to-r from-yellow-100/80 via-orange-100/80 to-red-100/80",border:"border-yellow-200/30"},trail:{bg:"bg-gradient-to-r from-teal-100/80 via-cyan-100/80 to-sky-100/80",border:"border-teal-200/30"},montain:{bg:"bg-gradient-to-r from-gray-100/80 via-gray-200/80 to-gray-300/80",border:"border-gray-200/30"},river:{bg:"bg-gradient-to-r from-blue-100/80 via-blue-200/80 to-blue-300/80",border:"border-blue-200/30"},path:{bg:"bg-gradient-to-r from-teal-100/80 via-cyan-100/80 to-sky-100/80",border:"border-teal-200/30"}},m=s[t]||s.default;return e.jsx(Pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-10",children:e.jsx("div",{className:`${m.bg} backdrop-blur-sm shadow-lg hover:shadow-2xl border ${m.border} transition-all duration-500 overflow-hidden rounded-2xl p-6`,children:e.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-3",children:[e.jsx(sa,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-bold",children:r("places.invitation.title")})," "]}),e.jsxs("p",{className:"mb-3",children:[r("places.invitation.description")," "]}),e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center md:justify-start",children:[e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:[r("places.invitation.hashtags.noRegistration")," "]}),e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:[r("places.invitation.hashtags.privacy")," "]}),e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs",children:[r("places.invitation.hashtags.community")," "]})]})]})})})})},Ua={address:"Base de Transporte Zacapoaxtla, Puebla",lat:19.8758703351958,lng:-97.5889138590976},Ya=()=>{const{t}=Se(),{places:r,loading:s,ratePlace:m,getUserRating:c,getRatingStats:i,isRating:d,getUserCurrentRating:g,hasUserRated:u,getPlaceGallery:N,getPlacePdfUrl:C,getPlaceLocation:E}=Qe(),{getCategoryColor:R}=$a(),{toast:w}=Le(),[v,k]=a.useState({}),[_,L]=a.useState({}),[Y,x]=a.useState({}),[,A]=a.useState({}),[J,j]=a.useState({}),[b,y]=a.useState({isOpen:!1,placeId:"",initialIndex:0}),[n,f]=a.useState("default"),[S,$]=a.useState(!1),[O,X]=a.useState(null);a.useEffect(()=>{if(r.length>0){const o=r.map(l=>l.categoria?.toLowerCase());o.some(l=>l?.includes("naturaleza")||l?.includes("nature"))?f("nature"):o.some(l=>l?.includes("cascada")||l?.includes("waterfall"))?f("waterfall"):o.some(l=>l?.includes("cultura")||l?.includes("cultural"))?f("cultural"):o.some(l=>l?.includes("historia")||l?.includes("history"))?f("history"):o.some(l=>l?.includes("puente")||l?.includes("bridge"))?f("bridge"):o.some(l=>l?.includes("mirador")||l?.includes("viewpoint"))?f("viewpoint"):o.some(l=>l?.includes("sendero")||l?.includes("trail"))?f("trail"):o.some(l=>l?.includes("ruta")||l?.includes("path"))?f("path"):o.some(l=>l?.includes("monta√±a")||l?.includes("montain"))?f("montain"):o.some(l=>l?.includes("r√≠o")||l?.includes("river"))?f("river"):f("default")}},[r]),a.useEffect(()=>{r.length>0&&(async()=>{const l={};for(const p of r)try{const D=await c(p.id);D&&(l[p.id]=D.calificacion)}catch(D){console.error(`Error loading rating for place ${p.id}:`,D)}k(l)})()},[r,c]),a.useEffect(()=>{r.length>0&&(async()=>{const l={},p={};for(const D of r){p[D.id]=!0,x(U=>({...U,[D.id]:!0}));try{const U=await i(D.id);console.log(`üìç Stats for ${D.nombre}:`,U),U&&(l[D.id]=U)}catch(U){console.error(`Error loading stats for place ${D.id}:`,U)}finally{p[D.id]=!1,x(U=>({...U,[D.id]:!1}))}}L(l),console.log("üìä All rating stats loaded:",l)})()},[r,i]);const oe=o=>{const l=C(o);if(!l){w({title:"‚ÑπÔ∏è Informaci√≥n",description:"Este lugar no tiene una gu√≠a PDF disponible",variant:"default"});return}window.open(l,"_blank","noopener,noreferrer")},q=a.useCallback(async o=>{try{A(p=>({...p,[o]:!0})),console.log("üîÑ [Places] Cargando galer√≠a para:",o);const l=await N(o);return console.log("‚úÖ [Places] Galer√≠a cargada:",l.length,"im√°genes"),j(p=>({...p,[o]:l})),l}catch(l){console.error("‚ùå [Places] Error cargando galer√≠a:",l);const p=r.find(D=>D.id===o);if(p){const D=[{id:"main",url_foto:p.foto_principal_url||"/placeholder.svg",descripcion:p.descripcion||p.nombre,es_principal:!0,orden:1,creado_en:new Date().toISOString()}];return j(U=>({...U,[o]:D})),D}return[]}finally{A(l=>({...l,[o]:!1}))}},[N,r]),H=async o=>{try{console.log("üîÑ [Places] Abriendo galer√≠a desde imagen para:",o),J[o]||await q(o),y({isOpen:!0,placeId:o,initialIndex:0}),console.log("üéâ [Places] Galer√≠a abierta para placeId:",o)}catch(l){console.error("‚ùå [Places] Error abriendo galer√≠a desde imagen:",l),w({title:"Error",description:"No se pudo cargar la galer√≠a de im√°genes",variant:"destructive"})}},B=o=>{H(o)},M=o=>{console.error("‚ùå Error cargando imagen:",o)},V=async(o,l)=>{try{const p=r.find(Z=>Z.id===o);if(!p)return;const U=v[o]!==void 0;await m(o,l)&&(k(Z=>({...Z,[o]:l})),w({title:U?"‚≠ê Calificaci√≥n actualizada":"üéâ ¬°Gracias por tu calificaci√≥n!",description:U?`Tu calificaci√≥n para "${p.nombre}" ha sido actualizada a ${l} estrellas`:`Has calificado "${p.nombre}" con ${l} estrellas`}),setTimeout(async()=>{try{const Z=await i(o);Z&&L(Q=>({...Q,[o]:Z}))}catch(Z){console.error("Error reloading stats:",Z)}},1e3))}catch(p){if(p instanceof Error&&p.message==="TERMS_REQUIRED"){const D=r.find(U=>U.id===o);D&&(X({placeId:o,placeName:D.nombre,rating:l}),$(!0))}}},W=async()=>{if(O){const{placeId:o,rating:l}=O;try{await m(o,l)&&(k(D=>({...D,[o]:l})),w({title:"üéâ ¬°Gracias por tu calificaci√≥n!",description:`Has calificado "${O.placeName}" con ${l} estrellas`}),setTimeout(async()=>{try{const D=await i(o);D&&L(U=>({...U,[o]:D}))}catch(D){console.error("Error reloading stats:",D)}},1e3))}catch{}X(null),$(!1)}},T=o=>{if(!o)return[];const l=[],p=o.toLowerCase();return(p.includes("senderismo")||p.includes("hiking"))&&l.push(t("places.features.hiking")),(p.includes("nataci√≥n")||p.includes("swimming"))&&l.push(t("places.features.swimming")),(p.includes("fotograf√≠a")||p.includes("photo"))&&l.push(t("places.features.photography")),(p.includes("gastronom√≠a")||p.includes("food"))&&l.push(t("places.features.gastronomy")),(p.includes("artesan√≠as")||p.includes("crafts"))&&l.push(t("places.features.crafts")),(p.includes("m√∫sica")||p.includes("music"))&&l.push(t("places.features.music")),(p.includes("deportes")||p.includes("sports"))&&l.push(t("places.features.waterSports")),(p.includes("atardecer")||p.includes("sunset"))&&l.push(t("places.features.sunset")),(p.includes("relax")||p.includes("peaceful"))&&l.push(t("places.features.relax")),l.length>0?l:[t("places.features.tourism")]},re=o=>!o||o===0?"0.0":Number(o).toFixed(1);return s?e.jsxs("section",{id:"places",className:"py-20 relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url(https://res.cloudinary.com/dinsl266g/image/upload/v1763074398/fondo-galeria_urye7x.svg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(4px) brightness(0.9)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] z-0"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-100 to-indigo-100 px-4 py-2 rounded-full mb-6",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:t("places.sectionSubtitle")})," "]}),e.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:[t("places.sectionTitle")," "]}),e.jsxs("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:[t("places.sectionDescription")," "]})]}),e.jsx(za,{count:3})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("section",{id:"places",className:"py-20 relative min-h-screen overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url(https://res.cloudinary.com/dinsl266g/image/upload/v1763074398/fondo-galeria_urye7x.svg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",filter:"blur(4px) brightness(0.9)"}}),e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[1px] z-0"}),e.jsxs("div",{className:"container mx-auto px-4 relative z-10",children:[e.jsxs("div",{className:"text-center mb-20",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-100 to-indigo-100 px-4 py-2 rounded-full mb-6",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:t("places.sectionSubtitle")})," "]}),e.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold text-gray-900 mb-6",children:[t("places.sectionTitle")," "]}),e.jsxs("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto leading-relaxed",children:[t("places.sectionDescription")," "]})]}),e.jsx(Oa,{theme:n}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:r.map(o=>{const l=T(o.descripcion),p=v[o.id]||o.puntuacion_promedio||0,D=d[o.id]||!1,U=o.foto_principal_url||"/placeholder.svg",le=u(o.id),Z=g(o.id),Q=E(o);return e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden shadow-card hover:shadow-xl transition-shadow group border border-white/30",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:U,alt:o.nombre,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300 cursor-pointer",loading:"lazy",onClick:()=>B(o.id),onError:()=>M(U)}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs(ae,{className:K(R(o.categoria),"text-white"),children:[o.categoria||t("places.features.tourism")," "]})}),Q.hasCoordinates&&e.jsxs("div",{className:"absolute top-4 right-4 bg-green-500/90 backdrop-blur-sm rounded-lg px-2 py-1 text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ta,{className:"w-3 h-3"}),t("places.info.gps")," "]}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-black/50 backdrop-blur-sm rounded-lg px-2 py-1 text-white text-sm font-medium",children:[t("places.info.free")," "]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-800 group-hover:text-blue-600 transition-colors",children:o.nombre})}),e.jsxs("p",{className:"text-muted-foreground mb-4 leading-relaxed line-clamp-3",children:[o.descripcion||t("places.info.defaultDescription")," "]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Aa,{rating:p,onRatingChange:me=>V(o.id,me),totalRatings:o.total_calificaciones||0,size:"sm",readonly:D}),o.puntuacion_promedio!==null&&o.puntuacion_promedio!==void 0&&o.puntuacion_promedio>0&&e.jsxs("div",{className:"flex items-center ml-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white font-bold py-1 px-3 rounded-full shadow-lg",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1 fill-white"}),e.jsx("span",{className:"text-sm",children:re(o.puntuacion_promedio)})]})]}),D&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Te,{className:"w-3 h-3 mr-1 animate-spin"}),t("places.rating.ratinging")," "]})]}),le&&Z&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:t("places.rating.alreadyRated").replace("{{stars}}",Z.toString())}),!le&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[t("places.rating.ratePrompt")," "]}),_[o.id]&&_[o.id].total>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx(Ga,{placeName:o.nombre,stats:_[o.id],variant:n==="default"?"default":"primary",theme:n}),Y[o.id]&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(Te,{className:"w-3 h-3 mr-1 animate-spin"}),t("places.rating.loadingStats")," "]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ue,{className:"w-4 h-4 mr-2"}),o.ubicacion||"San Juan Tahitic"]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(st,{className:"w-4 h-4 mr-2"}),t("places.info.hours")," "]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(aa,{className:"w-4 h-4 mr-2"}),t("places.info.allLevels")," "]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:l.map((me,h)=>e.jsx(ae,{variant:"secondary",className:"text-xs bg-gray-100 text-gray-700",children:me},h))}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(La,{origin:Ua,destination:Q,buttonText:t("places.buttons.getDirections"),className:K("w-full shadow-md hover:shadow-lg transition-all duration-300",n==="default"&&"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700",n==="nature"&&"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700",n==="waterfall"&&"bg-gradient-to-r from-blue-500 to-cyan-600 text-white hover:from-blue-600 hover:to-cyan-700",n==="cultural"&&"bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:from-amber-600 hover:to-orange-700",n==="history"&&"bg-gradient-to-r from-purple-500 to-pink-600 text-white hover:from-purple-600 hover:to-pink-700",n==="bridge"&&"bg-gradient-to-r from-gray-700 to-gray-900 text-white hover:from-gray-800 hover:to-black",n==="viewpoint"&&"bg-gradient-to-r from-yellow-500 to-red-600 text-white hover:from-yellow-600 hover:to-red-700",n==="trail"&&"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700",n==="montain"&&"bg-gradient-to-r from-gray-600 to-gray-800 text-white hover:from-gray-700 hover:to-black",n==="river"&&"bg-gradient-to-r from-blue-600 to-blue-800 text-white hover:from-blue-700 hover:to-black",n==="path"&&"bg-gradient-to-r from-teal-500 to-cyan-600 text-white hover:from-teal-600 hover:to-cyan-700")}),o.pdf_url&&e.jsxs(G,{variant:"outline",size:"sm",onClick:()=>oe(o),className:K("w-full border-2 transition-all duration-300 hover:scale-105",n==="default"&&"border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",n==="nature"&&"border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400",n==="waterfall"&&"border-blue-300 text-blue-700 hover:bg-blue-50 hover:border-blue-400",n==="cultural"&&"border-amber-300 text-amber-700 hover:bg-amber-50 hover:border-amber-400",n==="history"&&"border-purple-300 text-purple-700 hover:bg-purple-50 hover:border-purple-400",n==="bridge"&&"border-gray-400 text-gray-700 hover:bg-gray-50 hover:border-gray-500",n==="viewpoint"&&"border-yellow-300 text-yellow-700 hover:bg-yellow-50 hover:border-yellow-400",n==="trail"&&"border-teal-300 text-teal-700 hover:bg-teal-50 hover:border-teal-400",n==="montain"&&"border-gray-400 text-gray-700 hover:bg-gray-50 hover:border-gray-500",n==="river"&&"border-blue-400 text-blue-700 hover:bg-blue-50 hover:border-blue-500",n==="path"&&"border-teal-300 text-teal-700 hover:bg-teal-50 hover:border-teal-400"),children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),t("places.buttons.viewPdf")," "]})]})]})]},o.id)})}),e.jsx("div",{className:"text-center mt-12",children:r.length>6&&e.jsx(G,{size:"lg",variant:"outline",className:K("px-8 transition-all duration-300 hover:scale-105 border-2 font-semibold",n==="default"&&"border-blue-500 text-blue-700 hover:bg-blue-50 hover:border-blue-600 hover:text-blue-800",n==="nature"&&"border-green-500 text-green-700 hover:bg-green-50 hover:border-green-600 hover:text-green-800",n==="waterfall"&&"border-cyan-500 text-cyan-700 hover:bg-cyan-50 hover:border-cyan-600 hover:text-cyan-800",n==="cultural"&&"border-amber-500 text-amber-700 hover:bg-amber-50 hover:border-amber-600 hover:text-amber-800",n==="history"&&"border-purple-500 text-purple-700 hover:bg-purple-50 hover:border-purple-600 hover:text-purple-800",n==="bridge"&&"border-gray-600 text-gray-700 hover:bg-gray-50 hover:border-gray-700 hover:text-gray-800",n==="viewpoint"&&"border-orange-500 text-orange-700 hover:bg-orange-50 hover:border-orange-600 hover:text-orange-800",n==="trail"&&"border-teal-500 text-teal-700 hover:bg-teal-50 hover:border-teal-600 hover:text-teal-800",n==="montain"&&"border-gray-600 text-gray-700 hover:bg-gray-50 hover:border-gray-700 hover:text-gray-800",n==="river"&&"border-blue-600 text-blue-700 hover:bg-blue-50 hover:border-blue-700 hover:text-blue-800",n==="path"&&"border-teal-500 text-teal-700 hover:bg-teal-50 hover:border-teal-600 hover:text-teal-800"),children:t("places.buttons.viewAll")})})]})]}),e.jsx(zt,{isOpen:S,onClose:()=>{$(!1),X(null)},onAccept:W,placeName:O?.placeName||""}),e.jsx(oa,{placeId:b.placeId,initialIndex:b.initialIndex,isOpen:b.isOpen,onClose:()=>y(o=>({...o,isOpen:!1})),title:"Galer√≠a del lugar"})]})};export{Ya as P,$a as u};
